"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[2436],{5599:(A,e,n)=>{n.r(e),n.d(e,{default:()=>D});var t=n(4848),a=n(8453),M=n(6540),r=n(7402),s=n(9074),c=n(9199),i=n(7289);const o=n.p+"bin/chinese-chandelier.d27dbc106783f8d8ac4d.glb",l="data:model/gltf-binary;base64,Z2xURgIAAADEEgAA4AIAAEpTT057ImFzc2V0Ijp7ImdlbmVyYXRvciI6Iktocm9ub3MgZ2xURiBCbGVuZGVyIEkvTyB2NC4zLjQ3IiwidmVyc2lvbiI6IjIuMCJ9LCJzY2VuZSI6MCwic2NlbmVzIjpbeyJuYW1lIjoiU2NlbmUiLCJub2RlcyI6WzBdfV0sIm5vZGVzIjpbeyJtZXNoIjowLCJuYW1lIjoiR3JpZCJ9XSwibWVzaGVzIjpbeyJuYW1lIjoiR3JpZCIsInByaW1pdGl2ZXMiOlt7ImF0dHJpYnV0ZXMiOnsiUE9TSVRJT04iOjAsIlRFWENPT1JEXzAiOjF9LCJpbmRpY2VzIjoyfV19XSwiYWNjZXNzb3JzIjpbeyJidWZmZXJWaWV3IjowLCJjb21wb25lbnRUeXBlIjo1MTI2LCJjb3VudCI6MTQyLCJtYXgiOlsxLDAsMV0sIm1pbiI6Wy0xLDAsLTFdLCJ0eXBlIjoiVkVDMyJ9LHsiYnVmZmVyVmlldyI6MSwiY29tcG9uZW50VHlwZSI6NTEyNiwiY291bnQiOjE0MiwidHlwZSI6IlZFQzIifSx7ImJ1ZmZlclZpZXciOjIsImNvbXBvbmVudFR5cGUiOjUxMjMsImNvdW50Ijo2MDAsInR5cGUiOiJTQ0FMQVIifV0sImJ1ZmZlclZpZXdzIjpbeyJidWZmZXIiOjAsImJ5dGVMZW5ndGgiOjE3MDQsImJ5dGVPZmZzZXQiOjAsInRhcmdldCI6MzQ5NjJ9LHsiYnVmZmVyIjowLCJieXRlTGVuZ3RoIjoxMTM2LCJieXRlT2Zmc2V0IjoxNzA0LCJ0YXJnZXQiOjM0OTYyfSx7ImJ1ZmZlciI6MCwiYnl0ZUxlbmd0aCI6MTIwMCwiYnl0ZU9mZnNldCI6Mjg0MCwidGFyZ2V0IjozNDk2M31dLCJidWZmZXJzIjpbeyJieXRlTGVuZ3RoIjo0MDQwfV19ICAgyA8AAEJJTgAAAIC/AAAAAAAAgD/NzEy/AAAAAAAAgD+amRm/AAAAAAAAgD/MzMy+AAAAAAAAgD/MzEy+AAAAAAAAgD8AAAAAAAAAAAAAgD/QzEw+AAAAAAAAgD/MzMw+AAAAAAAAgD+amRk/AAAAAAAAgD/OzEw/AAAAAAAAgD8AAIA/AAAAAAAAgD8AAIC/AAAAAM3MTD/NzEy/AAAAAM3MTD+amRm/AAAAAM3MTD+amRm/AAAAAM3MTD/MzMy+AAAAAM3MTD/MzEy+AAAAAM3MTD8AAAAAAAAAAM3MTD/QzEw+AAAAAM3MTD/MzMw+AAAAAM3MTD+amRk/AAAAAM3MTD/OzEw/AAAAAM3MTD8AAIA/AAAAAM3MTD8AAIC/AAAAAJqZGT8AAIC/AAAAAJqZGT/NzEy/AAAAAJqZGT/NzEy/AAAAAJqZGT+amRm/AAAAAJqZGT+amRm/AAAAAJqZGT+amRm/AAAAAJqZGT/MzMy+AAAAAJqZGT/MzMy+AAAAAJqZGT/MzEy+AAAAAJqZGT/MzEy+AAAAAJqZGT8AAAAAAAAAAJqZGT8AAAAAAAAAAJqZGT/QzEw+AAAAAJqZGT/QzEw+AAAAAJqZGT/MzMw+AAAAAJqZGT/MzMw+AAAAAJqZGT+amRk/AAAAAJqZGT+amRk/AAAAAJqZGT/OzEw/AAAAAJqZGT/OzEw/AAAAAJqZGT8AAIA/AAAAAJqZGT8AAIA/AAAAAJqZGT8AAIC/AAAAAMzMzD7NzEy/AAAAAMzMzD6amRm/AAAAAMzMzD6amRm/AAAAAMzMzD7MzMy+AAAAAMzMzD7MzEy+AAAAAMzMzD4AAAAAAAAAAMzMzD7QzEw+AAAAAMzMzD7MzMw+AAAAAMzMzD6amRk/AAAAAMzMzD7OzEw/AAAAAMzMzD4AAIA/AAAAAMzMzD4AAIC/AAAAAMzMTD7NzEy/AAAAAMzMTD6amRm/AAAAAMzMTD6amRm/AAAAAMzMTD7MzMy+AAAAAMzMTD7MzEy+AAAAAMzMTD4AAAAAAAAAAMzMTD7QzEw+AAAAAMzMTD7MzMw+AAAAAMzMTD6amRk/AAAAAMzMTD7OzEw/AAAAAMzMTD4AAIA/AAAAAMzMTD4AAIC/AAAAAAAAAIDNzEy/AAAAAAAAAICamRm/AAAAAAAAAICamRm/AAAAAAAAAIDMzMy+AAAAAAAAAIDMzEy+AAAAAAAAAIAAAAAAAAAAAAAAAIDQzEw+AAAAAAAAAIDMzMw+AAAAAAAAAICamRk/AAAAAAAAAIDOzEw/AAAAAAAAAIAAAIA/AAAAAAAAAIAAAIC/AAAAANDMTL7NzEy/AAAAANDMTL6amRm/AAAAANDMTL6amRm/AAAAANDMTL7MzMy+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AAAAtAAAAQAMAAAADAALAAEAAgANAAEADQAMAAIAAwAPAAIADwAOAAMABAAQAAMAEAAPAAQABQARAAQAEQAQAAUABgASAAUAEgARAAYABwATAAYAEwASAAcACAAUAAcAFAATAAgACQAVAAgAFQAUAAkACgAWAAkAFgAVAAsADAAaAAsAGgAYAAwADQAcAAwAHAAaAA0ADwAfAA0AHwAdAA8AEAAhAA8AIQAfABAAEQAjABAAIwAhABEAEgAlABEAJQAjABIAEwAnABIAJwAlABMAFAApABMAKQAnABQAFQArABQAKwApABUAFgAtABUALQArABcAGQAvABcALwAuABkAGwAwABkAMAAvABsAHgAyABsAMgAxAB4AIAAzAB4AMwAyACAAIgA0ACAANAAzACIAJAA1ACIANQA0ACQAJgA2ACQANgA1ACYAKAA3ACYANwA2ACgAKgA4ACgAOAA3ACoALAA5ACoAOQA4AC4ALwA7AC4AOwA6AC8AMAA8AC8APAA7ADAAMgA+ADAAPgA9ADIAMwA/ADIAPwA+ADMANABAADMAQAA/ADQANQBBADQAQQBAADUANgBCADUAQgBBADYANwBDADYAQwBCADcAOABEADcARABDADgAOQBFADgARQBEADoAOwBHADoARwBGADsAPABIADsASABHADwAPgBKADwASgBJAD4APwBLAD4ASwBKAD8AQABMAD8ATABLAEAAQQBNAEAATQBMAEEAQgBOAEEATgBNAEIAQwBPAEIATwBOAEMARABQAEMAUABPAEQARQBRAEQAUQBQAEYARwBTAEYAUwBSAEcASABUAEcAVABTAEgASgBWAEgAVgBVAEoASwBXAEoAVwBWAEsATABYAEsAWABXAEwATQBZAEwAWQBYAE0ATgBaAE0AWgBZAE4ATwBbAE4AWwBaAE8AUABcAE8AXABbAFAAUQBdAFAAXQBcAFIAUwBfAFIAXwBeAFMAVABgAFMAYABfAFQAVgBiAFQAYgBhAFYAVwBjAFYAYwBiAFcAWABkAFcAZABjAFgAWQBlAFgAZQBkAFkAWgBmAFkAZgBlAFoAWwBnAFoAZwBmAFsAXABoAFsAaABnAFwAXQBpAFwAaQBoAF4AXwBrAF4AawBqAF8AYABsAF8AbABrAGAAYgBuAGAAbgBtAGIAYwBvAGIAbwBuAGMAZABwAGMAcABvAGQAZQBxAGQAcQBwAGUAZgByAGUAcgBxAGYAZwBzAGYAcwByAGcAaAB0AGcAdABzAGgAaQB1AGgAdQB0AGoAawB3AGoAdwB2AGsAbAB4AGsAeAB3AGwAbgB6AGwAegB5AG4AbwB7AG4AewB6AG8AcAB8AG8AfAB7AHAAcQB9AHAAfQB8AHEAcgB+AHEAfgB9AHIAcwB/AHIAfwB+AHMAdACAAHMAgAB/AHQAdQCBAHQAgQCAAHYAdwCDAHYAgwCCAHcAeACEAHcAhACDAHgAegCGAHgAhgCFAHoAewCHAHoAhwCGAHsAfACIAHsAiACHAHwAfQCJAHwAiQCIAH0AfgCKAH0AigCJAH4AfwCLAH4AiwCKAH8AgACMAH8AjACLAIAAgQCNAIAAjQCMAA==";function z(A,e){const n=new c.HTX(A);A.camera=new c.xNY({transfo:{distance:2},far:100,near:.01,fovy:(0,c.HPH)(35),zoom:1}),new c.pwt(A,{speedPanning:0,inertiaOrbit:1e3,geo:{lat:(0,c.HPH)(50),minLat:(0,c.HPH)(20),maxLat:(0,c.HPH)(80)}});const t=new c.o57(A,{color:new c.oao(.4,.7,.9),depth:1,stencil:0}),a=new c.dRj(A,{asset:e.glb.world}),M=new c.g6h(A,{geometry:new c.oq({sizeX:1,sizeY:1}),material:new c.M3Z({color:[0,0,.8,1]})}),r=new c.Ipk(A,{depth:c.Eg5.less,children:[new c.Ipk(A,{cull:c.TfJ.back,children:[a]}),new c.Ipk(A,{color:!1,stencil:c.d7A.write(1),children:[M]})]}),s=new c.K7(A,{textureColor0:new c.HTX(A),children:[t,r]}),i=new c.D$w(A,{flipY:!0,filters:[new c.i0P],texture:s.textureColor0??n});s.onExit=()=>i.texture=s.textureColor0??n,A.add(s,new c.o57(A,{color:[0,1,0,1]}),new c.ZJl((()=>{})),new c.Ipk(A,{stencil:c.d7A.paintIfEqual(0),children:[i]}),new c.iFy(A)),A.paint()}function w(){return(0,t.jsx)(i.A,{options:{antialias:!0,stencil:!0,depth:!0},onReady:z,assets:{glb:{world:o,see:l}}})}const m={"Detail #1":"    const defaultTexture = new TgdTexture2D(context)\n    context.camera = new TgdCameraPerspective({\n        transfo: { distance: 2 },\n        far: 100,\n        near: 0.01,\n        fovy: tgdCalcDegToRad(35),\n        zoom: 1,\n    })\n    new TgdControllerCameraOrbit(context, {\n        speedPanning: 0,\n        inertiaOrbit: 1000,\n        geo: {\n            lat: tgdCalcDegToRad(50),\n            minLat: tgdCalcDegToRad(20),\n            maxLat: tgdCalcDegToRad(80),\n        },\n    })\n    const clear = new TgdPainterClear(context, {\n        color: new TgdVec4(0.4, 0.7, 0.9),\n        depth: 1,\n        stencil: 0,\n    })\n    const mesh = new TgdPainterMeshGltf(context, {\n        asset: assets.glb.world,\n    })\n    const sea = new TgdPainterMesh(context, {\n        geometry: new TgdGeometryPlane({ sizeX: 1, sizeY: 1 }),\n        material: new TgdMaterialSolid({ color: [0, 0, 0.8, 1] }),\n    })\n    const scene = new TgdPainterState(context, {\n        depth: webglPresetDepth.less,\n        children: [\n            new TgdPainterState(context, {\n                cull: webglPresetCull.back,\n                children: [mesh],\n            }),\n            new TgdPainterState(context, {\n                color: false,\n                stencil: webglPresetStencil.write(1),\n                children: [sea],\n            }),\n        ],\n    })\n\n    const framebuffer = new TgdPainterFramebuffer(context, {\n        textureColor0: new TgdTexture2D(context),\n        children: [clear, scene],\n    })\n    const filter = new TgdPainterFilter(context, {\n        flipY: true,\n        filters: [new TgdFilterVerbatim()],\n        texture: framebuffer.textureColor0 ?? defaultTexture,\n    })\n    framebuffer.onExit = () =>\n        (filter.texture = framebuffer.textureColor0 ?? defaultTexture)\n    // context.add(clear, scene)\n    context.add(\n        framebuffer,\n        new TgdPainterClear(context, { color: [0, 1, 0, 1] }),\n        new TgdPainterLogic(() => {\n            // framebuffer.blitStencilBuffer()\n        }),\n        new TgdPainterState(context, {\n            stencil: webglPresetStencil.paintIfEqual(0),\n            children: [filter],\n        }),\n        new TgdPainterDebugStencil(context)\n    )\n    context.paint()"},g='import {\n    tgdCalcDegToRad,\n    TgdCameraPerspective,\n    TgdContext,\n    TgdControllerCameraOrbit,\n    TgdFilterVerbatim,\n    TgdGeometryPlane,\n    TgdMaterialSolid,\n    TgdPainterClear,\n    TgdPainterDebugStencil,\n    TgdPainterFilter,\n    TgdPainterFramebuffer,\n    TgdPainterLogic,\n    TgdPainterMesh,\n    TgdPainterMeshGltf,\n    TgdPainterState,\n    TgdTexture2D,\n    TgdVec4,\n    webglPresetCull,\n    webglPresetDepth,\n    webglPresetStencil,\n} from "@tolokoban/tgd"\nimport View, { Assets } from "@/components/demo/Tgd"\n\n// import WorldURL from "./world.glb"\nimport WorldURL from "@/assets/mesh/chinese-chandelier.glb"\nimport GridURL from "@/assets/mesh/grid-10x10.glb"\n\nfunction init(context: TgdContext, assets: Assets) {\n    const defaultTexture = new TgdTexture2D(context)\n    context.camera = new TgdCameraPerspective({\n        transfo: { distance: 2 },\n        far: 100,\n        near: 0.01,\n        fovy: tgdCalcDegToRad(35),\n        zoom: 1,\n    })\n    new TgdControllerCameraOrbit(context, {\n        speedPanning: 0,\n        inertiaOrbit: 1000,\n        geo: {\n            lat: tgdCalcDegToRad(50),\n            minLat: tgdCalcDegToRad(20),\n            maxLat: tgdCalcDegToRad(80),\n        },\n    })\n    const clear = new TgdPainterClear(context, {\n        color: new TgdVec4(0.4, 0.7, 0.9),\n        depth: 1,\n        stencil: 0,\n    })\n    const mesh = new TgdPainterMeshGltf(context, {\n        asset: assets.glb.world,\n    })\n    const sea = new TgdPainterMesh(context, {\n        geometry: new TgdGeometryPlane({ sizeX: 1, sizeY: 1 }),\n        material: new TgdMaterialSolid({ color: [0, 0, 0.8, 1] }),\n    })\n    const scene = new TgdPainterState(context, {\n        depth: webglPresetDepth.less,\n        children: [\n            new TgdPainterState(context, {\n                cull: webglPresetCull.back,\n                children: [mesh],\n            }),\n            new TgdPainterState(context, {\n                color: false,\n                stencil: webglPresetStencil.write(1),\n                children: [sea],\n            }),\n        ],\n    })\n\n    const framebuffer = new TgdPainterFramebuffer(context, {\n        textureColor0: new TgdTexture2D(context),\n        children: [clear, scene],\n    })\n    const filter = new TgdPainterFilter(context, {\n        flipY: true,\n        filters: [new TgdFilterVerbatim()],\n        texture: framebuffer.textureColor0 ?? defaultTexture,\n    })\n    framebuffer.onExit = () =>\n        (filter.texture = framebuffer.textureColor0 ?? defaultTexture)\n    // context.add(clear, scene)\n    context.add(\n        framebuffer,\n        new TgdPainterClear(context, { color: [0, 1, 0, 1] }),\n        new TgdPainterLogic(() => {\n            // framebuffer.blitStencilBuffer()\n        }),\n        new TgdPainterState(context, {\n            stencil: webglPresetStencil.paintIfEqual(0),\n            children: [filter],\n        }),\n        new TgdPainterDebugStencil(context)\n    )\n    context.paint()\n}\n\nexport default function Demo() {\n    return (\n        <View\n            options={{ antialias: true, stencil: true, depth: true }}\n            onReady={init}\n            assets={{\n                glb: {\n                    world: WorldURL,\n                    see: GridURL,\n                },\n            }}\n        />\n    )\n}\n';function d(){const[A,e]=M.useState(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"half-left",children:(0,t.jsx)(w,{})}),(0,t.jsxs)("div",{className:"half-right",children:[(0,t.jsx)("div",{children:(0,t.jsx)(r.yQN,{variant:"elevated",onClick:()=>e(!A),children:A?"Show code details":"Show full code"})}),(0,t.jsx)(s.A,{language:"tsx",value:A?g:m})]})]})}function T(A){const e={a:"a",h1:"h1",p:"p",...(0,a.R)(),...A.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.h1,{children:[(0,t.jsx)(e.a,{href:"docs/classes/TgdPainterFramebuffer.html",children:"TgdPainterFramebuffer"})," - Example 3"]}),"\n",(0,t.jsx)(e.p,{children:"Let's use the framebuffer to simulate water. We want the objects deeply flooded\nto be almost invisible. That's why we need to store the height of every rendered\npixels."}),"\n",(0,t.jsx)(d,{})]})}function D(A={}){const{wrapper:e}={...(0,a.R)(),...A.components};return e?(0,t.jsx)(e,{...A,children:(0,t.jsx)(T,{...A})}):T(A)}},7289:(A,e,n)=>{n.d(e,{A:()=>i});var t=n(4848),a=n(6540),M=n(9199),r=n(7402),s=n(3686);const c={Tgd:"hgIjhDQIuBCJEQ4ZgLXp",relative:"efOyHCihw9wfMB6AaAqw",overlay:"ywC8N0Uxbvm2Ug2DwPkE",loading:"PBWSRsbiwEqGpeL0hEfm",screen:"BErChOLWGtciKhh3IFud",canvas:"fT7FcYouYlPbElIAEXRP",gizmo:"uAPfWt_Dhe7RaRrnmIu0"};function i({className:A,options:e,onReady:n,gizmo:i=!1,width:o="640px",height:l="480px",noBorder:z=!1,assets:w,children:m}){const[g,d]=a.useState(!0),[T,D]=a.useState(!1),u=a.useRef(null),Z=a.useRef(null),P=a.useRef(null),f=a.useRef(null),[B,I]=a.useState(!0);let x="auto";o.endsWith("px")&&l.endsWith("px")&&(o.substring(o.length-2),l.substring(l.length-2));const C=A=>{if(!A)return;if(Z.current)return;Z.current=A;const t=new M.tfp(A,e);u.current=t,I(!0),async function({glb:A,data:e,text:n,image:t}={}){console.log("🚀 [Tgd] glb, data, text, image = ",A,e,n,t);const a={glb:{},data:{},text:{},image:{}},r=[];return t&&Object.keys(t).forEach((A=>{r.push((async()=>{const e=t[A];console.log("Loading image:",e);const n=await(0,M.V_9)(e);n&&(a.image[A]=n)}))})),A&&Object.keys(A).forEach((e=>{r.push((async()=>{const n=A[e];console.log("Loading GLB:",n);const t=await(0,M.TCe)(n);t&&(a.glb[e]=t)}))})),e&&Object.keys(e).forEach((A=>{r.push((async()=>{const n=e[A],t=await(0,M.vSU)(n);t&&(a.data[A]=t)}))})),n&&Object.keys(n).forEach((A=>{r.push((async()=>{const e=n[A],t=await(0,M.jWq)(e);t&&(a.text[A]=t)}))})),await Promise.all(r.map((A=>A()))),a}(w).then((A=>{console.log("Ready!"),n(t,A),t.paint(),I(!1)})).catch((A=>{console.error("Unable to initialize the scene!",A),I(!1)}));const a=P.current;a&&a.attachContext(t)},E=A=>{const e=new M.GbF({canvas:A});P.current=e,e.eventTipClick.addListener((({to:A})=>{const e=u.current;console.log("🚀 [tgd] to, context =",A,e),e&&e.animSchedule({duration:.2,easingFunction:M.Wcc,action:(0,M.vRM)(e.camera,{orientation:A})})}));const n=u.current;n&&e.attachContext(n)};return a.useEffect((()=>{const A=Z.current,e=u.current;if(!A||!e)return;const n=new ResizeObserver((()=>e.paint()));return n.observe(A),A.requestFullscreen||(A.requestFullscreen=A.webkitRequestFullscreen),D(Boolean(A.requestFullscreen)),()=>n.unobserve(A)}),[u.current,Z.current]),z?(0,t.jsxs)("div",{ref:f,className:c.screen,style:{width:g?o:l,height:g?l:o},children:[(0,t.jsx)("canvas",{className:c.canvas,ref:C}),i&&(0,t.jsx)("canvas",{className:c.gizmo,ref:E})]}):(0,t.jsxs)("div",{className:r.Sxu.classNames.join(A,c.Tgd),children:[(0,t.jsxs)(r.sWC,{display:"flex",justifyContent:"space-between",children:[(0,t.jsx)(r.yQN,{variant:"elevated",onClick:()=>d(!g),enabled:!B,children:g?"Switch to Portrait":"Switch to Landscape"}),T&&(0,t.jsx)(r.yQN,{variant:"elevated",onClick:()=>{const A=f.current;A&&A.requestFullscreen()},enabled:!B,children:"Fullscreen"})]}),(0,t.jsxs)("div",{className:c.relative,children:[(0,t.jsxs)("div",{ref:f,className:c.screen,style:{width:g?o:l,height:g?l:o},children:[(0,t.jsx)("canvas",{className:c.canvas,ref:C}),i&&(0,t.jsx)("canvas",{className:c.gizmo,ref:E})]}),(0,t.jsx)("div",{className:r.Sxu.classNames.join(c.overlay,B&&c.loading),children:(0,t.jsx)(s.A,{})}),m]})]})}},8453:(A,e,n)=>{n.d(e,{R:()=>M});var t=n(6540);const a=t.createContext({});function M(A){const e=t.useContext(a);return t.useMemo((function(){return"function"==typeof A?A(e):{...e,...A}}),[e,A])}}}]);