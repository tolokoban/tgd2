"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[525],{5525:(A,e,n)=>{n.r(e),n.d(e,{default:()=>b});var t=n(4848),r=n(8453),a=n(6540),i=n(8766),o=n(2261),s=n(9827),d=n(4088);class c extends s.rB{constructor(){super(),this.vertexShaderCode=["varUV = TEXCOORD_0;"],this.texture=null,this.fragmentShaderCode=["vec4 color1 = texture(texDiffuse, varUV * 1.0);","float k = 0.7071067811865476;","float ang = uniTime * .777;","vec4 color2 = vec4(",["0.5 + k * sin(ang - 2.0943951023931953),","0.5 + k * sin(ang),","0.5 + k * sin(ang + 2.0943951023931953),","1.0"],");","vec2 p = 2.0 * (varUV - vec2(.5));","vec2 polar = vec2(",["length(p),","atan(p.y, p.x)"],");","float alpha = 0.1 + 0.3 * (cos(uniTime * 1.451) * sin(uniTime) + 1.0);","polar.y -= uniTime * 1.421 * (1.0 + pow(polar.x, .5));","polar.x += 0.25 * sin(0.75 * uniTime + polar.y * 3.0) * cos(uniTime * 1.751);","float beta = 1.0 - smoothstep(0.0, 0.1 + 0.1 * abs(sin(uniTime * 1.1474) * cos(uniTime) * 1.452), abs(fract(polar.x * 0.90) - 0.5));","return mix(color1, color2, max(alpha, beta));"],this.varyings.varUV="vec2",this.uniforms.texDiffuse="sampler2D",this.uniforms.uniTime="float"}setUniforms(A,e){const{texture:n}=this;n&&n.activate(A,"texDiffuse"),A.uniform1f("uniTime",.001*e)}}const l="data:model/gltf-binary;base64,Z2xURgIAAADABgAAXAMAAEpTT057ImFzc2V0Ijp7ImdlbmVyYXRvciI6Iktocm9ub3MgZ2xURiBCbGVuZGVyIEkvTyB2NC4zLjQ3IiwidmVyc2lvbiI6IjIuMCJ9LCJzY2VuZSI6MCwic2NlbmVzIjpbeyJuYW1lIjoiU2NlbmUiLCJub2RlcyI6WzBdfV0sIm5vZGVzIjpbeyJtZXNoIjowLCJuYW1lIjoiQ3ViZSJ9XSwibWVzaGVzIjpbeyJuYW1lIjoiQ3ViZSIsInByaW1pdGl2ZXMiOlt7ImF0dHJpYnV0ZXMiOnsiUE9TSVRJT04iOjAsIk5PUk1BTCI6MSwiVEVYQ09PUkRfMCI6Mn0sImluZGljZXMiOjN9XX1dLCJhY2Nlc3NvcnMiOlt7ImJ1ZmZlclZpZXciOjAsImNvbXBvbmVudFR5cGUiOjUxMjYsImNvdW50IjoyNCwibWF4IjpbMSwxLDFdLCJtaW4iOlstMSwtMSwtMV0sInR5cGUiOiJWRUMzIn0seyJidWZmZXJWaWV3IjoxLCJjb21wb25lbnRUeXBlIjo1MTI2LCJjb3VudCI6MjQsInR5cGUiOiJWRUMzIn0seyJidWZmZXJWaWV3IjoyLCJjb21wb25lbnRUeXBlIjo1MTI2LCJjb3VudCI6MjQsInR5cGUiOiJWRUMyIn0seyJidWZmZXJWaWV3IjozLCJjb21wb25lbnRUeXBlIjo1MTIzLCJjb3VudCI6MzYsInR5cGUiOiJTQ0FMQVIifV0sImJ1ZmZlclZpZXdzIjpbeyJidWZmZXIiOjAsImJ5dGVMZW5ndGgiOjI4OCwiYnl0ZU9mZnNldCI6MCwidGFyZ2V0IjozNDk2Mn0seyJidWZmZXIiOjAsImJ5dGVMZW5ndGgiOjI4OCwiYnl0ZU9mZnNldCI6Mjg4LCJ0YXJnZXQiOjM0OTYyfSx7ImJ1ZmZlciI6MCwiYnl0ZUxlbmd0aCI6MTkyLCJieXRlT2Zmc2V0Ijo1NzYsInRhcmdldCI6MzQ5NjJ9LHsiYnVmZmVyIjowLCJieXRlTGVuZ3RoIjo3MiwiYnl0ZU9mZnNldCI6NzY4LCJ0YXJnZXQiOjM0OTYzfV0sImJ1ZmZlcnMiOlt7ImJ5dGVMZW5ndGgiOjg0MH1dfUgDAABCSU4AAACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AACAPwAAgD8AAIC/AACAPwAAgD8AAIC/AACAPwAAgD8AAIC/AACAPwAAgL8AAIA/AACAPwAAgL8AAIA/AACAPwAAgL8AAIA/AACAPwAAgL8AAIC/AACAPwAAgL8AAIC/AACAPwAAgL8AAIC/AACAvwAAgD8AAIA/AACAvwAAgD8AAIA/AACAvwAAgD8AAIA/AACAvwAAgD8AAIC/AACAvwAAgD8AAIC/AACAvwAAgD8AAIC/AACAvwAAgL8AAIA/AACAvwAAgL8AAIA/AACAvwAAgL8AAIA/AACAvwAAgL8AAIC/AACAvwAAgL8AAIC/AACAvwAAgL8AAIC/AAAAAAAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAAAAAAAAAAAAAAAAAIC/AAAAAAAAgD8AAAAAAACAPwAAAAAAAAAAAAAAAAAAAAAAAIA/AAAAAAAAgL8AAAAAAACAPwAAAAAAAAAAAAAAAAAAAAAAAIC/AAAAAAAAgL8AAAAAAACAPwAAAAAAAAAAAAAAAAAAAAAAAIA/AAAAAAAAgD8AAAAAAACAvwAAAAAAAAAAAAAAAAAAAAAAAIC/AAAAAAAAgD8AAAAAAACAvwAAAAAAAAAAAAAAAAAAAAAAAIA/AAAAAAAAgL8AAAAAAACAvwAAAAAAAAAAAAAAAAAAAAAAAIC/AAAAAAAAgL8AAAAAAACAvwAAAAAAAAAAuth/P7nYfz+22H8/uth/P7XYfz+52H8/uNh/P7nYfz+22H8/ACQdOgASHTq42H8/ACAdOrjYfz+42H8/uth/P7jYfz8AKB06uth/PwAcHToAHB06udh/PwAYHToAHB06uth/PwAoHToAFh06uth/P7bYfz+52H8/ACAdOrbYfz8AIh06ACQdOrrYfz8AKB06ACYdOgAcHTq62H8/ACgdOgAgHTq52H8/ACgdOgAQHToAIB06ABwdOgAgHToAKB06AAAMABIAAAASAAYACgAHABMACgATABYAFwAUAA4AFwAOABEADwADAAkADwAJABUABQACAAgABQAIAAsAEAANAAEAEAABAAQA";var m=n(4859);function f(A,e){A.camera=new s.xN({distance:0,far:100,near:.01,fovy:.25*Math.PI,zoom:.333}),new s.pw(A,{speedPanning:0,inertiaOrbit:1e3});const n=new s.K7(A),t=new s.K7(A),r=new c;r.texture=A.textures2D.create({image:e.image.background});const a=new s.Ip(A,{depth:s.Eg.less,children:[new s.o5(A,{color:new s.o,depth:1}),new s.dR(A,{asset:e.glb.mesh,materialFactory:()=>r})]});n.add(a);const i=new s.D$(A,{filters:[new s.Ch({hueShiftInDegrees:90})],texture:n.texture});t.add(i);const o=new s.D$(A,{texture:n.texture,filters:[new s.HB({zoom:1.1})],flipY:!0});n.onExit=()=>{i.texture=n.texture},t.onExit=()=>{r.texture=t.texture,o.texture=t.texture},A.add(n,t,o,new s.ZJ(((e,n)=>{const{camera:t}=A;t.orbitAroundY(1047e-7*n)}))),A.paint()}function u(){return(0,t.jsx)(d.A,{onReady:f,assets:{glb:{mesh:l},image:{background:m}}})}const g={"Detail #1":"    context.camera = new TgdCameraPerspective({\n        distance: 0,\n        far: 100,\n        near: 0.01,\n        fovy: Math.PI * 0.25,\n        zoom: 0.333,\n    })\n    new TgdControllerCameraOrbit(context, {\n        speedPanning: 0,\n        inertiaOrbit: 1000,\n    })\n    const framebufferRender = new TgdPainterFramebuffer(context)\n    const framebufferCopy = new TgdPainterFramebuffer(context)\n    const material = new Material()\n    material.texture = context.textures2D.create({\n        image: assets.image.background,\n    })\n    const painter = new TgdPainterState(context, {\n        depth: webglPresetDepth.less,\n        // cull: webglPresetCull.front,\n        children: [\n            new TgdPainterClear(context, {\n                color: new TgdVec4(),\n                depth: 1,\n            }),\n            new TgdPainterMeshGltf(context, {\n                asset: assets.glb.mesh,\n                materialFactory: () => material,\n            }),\n        ],\n    })\n    framebufferRender.add(painter)\n    const copy = new TgdPainterFilter(context, {\n        filters: [\n            new TgdFilterHueRotation({\n                hueShiftInDegrees: 90,\n            }),\n        ],\n        texture: framebufferRender.texture,\n    })\n    framebufferCopy.add(copy)\n    const screen = new TgdPainterFilter(context, {\n        texture: framebufferRender.texture,\n        filters: [new TgdFilterZoom({ zoom: 1.1 })],\n        flipY: true,\n    })\n    framebufferRender.onExit = () => {\n        copy.texture = framebufferRender.texture\n    }\n    framebufferCopy.onExit = () => {\n        material.texture = framebufferCopy.texture\n        screen.texture = framebufferCopy.texture\n    }\n    context.add(\n        framebufferRender,\n        framebufferCopy,\n        screen,\n        new TgdPainterLogic((time, delay) => {\n            const { camera } = context\n            camera.orbitAroundY(delay * 0.0001047)\n            // camera.orbitAroundX(delay * 0.00007154)\n            // camera.orbitAroundZ(delay * 0.0003051)\n            // camera.zoom = 0.333 + 0.3 * Math.abs(Math.sin(time * 0.001457))\n        })\n    )\n    context.paint()"},C='import {\n    TgdCameraPerspective,\n    TgdContext,\n    TgdControllerCameraOrbit,\n    TgdFilterHueRotation,\n    TgdFilterZoom,\n    TgdPainterClear,\n    TgdPainterFilter,\n    TgdPainterFramebuffer,\n    TgdPainterLogic,\n    TgdPainterMeshGltf,\n    TgdPainterState,\n    TgdVec4,\n    webglPresetDepth,\n} from "@tolokoban/tgd"\nimport View, { Assets } from "@/components/demo/Tgd"\nimport { Material } from "./material"\n\nimport CubeURL from "@/assets/mesh/cube.glb"\nimport BackgroundURL from "@/assets/image/dino.webp"\n\nfunction init(context: TgdContext, assets: Assets) {\n    context.camera = new TgdCameraPerspective({\n        distance: 0,\n        far: 100,\n        near: 0.01,\n        fovy: Math.PI * 0.25,\n        zoom: 0.333,\n    })\n    new TgdControllerCameraOrbit(context, {\n        speedPanning: 0,\n        inertiaOrbit: 1000,\n    })\n    const framebufferRender = new TgdPainterFramebuffer(context)\n    const framebufferCopy = new TgdPainterFramebuffer(context)\n    const material = new Material()\n    material.texture = context.textures2D.create({\n        image: assets.image.background,\n    })\n    const painter = new TgdPainterState(context, {\n        depth: webglPresetDepth.less,\n        // cull: webglPresetCull.front,\n        children: [\n            new TgdPainterClear(context, {\n                color: new TgdVec4(),\n                depth: 1,\n            }),\n            new TgdPainterMeshGltf(context, {\n                asset: assets.glb.mesh,\n                materialFactory: () => material,\n            }),\n        ],\n    })\n    framebufferRender.add(painter)\n    const copy = new TgdPainterFilter(context, {\n        filters: [\n            new TgdFilterHueRotation({\n                hueShiftInDegrees: 90,\n            }),\n        ],\n        texture: framebufferRender.texture,\n    })\n    framebufferCopy.add(copy)\n    const screen = new TgdPainterFilter(context, {\n        texture: framebufferRender.texture,\n        filters: [new TgdFilterZoom({ zoom: 1.1 })],\n        flipY: true,\n    })\n    framebufferRender.onExit = () => {\n        copy.texture = framebufferRender.texture\n    }\n    framebufferCopy.onExit = () => {\n        material.texture = framebufferCopy.texture\n        screen.texture = framebufferCopy.texture\n    }\n    context.add(\n        framebufferRender,\n        framebufferCopy,\n        screen,\n        new TgdPainterLogic((time, delay) => {\n            const { camera } = context\n            camera.orbitAroundY(delay * 0.0001047)\n            // camera.orbitAroundX(delay * 0.00007154)\n            // camera.orbitAroundZ(delay * 0.0003051)\n            // camera.zoom = 0.333 + 0.3 * Math.abs(Math.sin(time * 0.001457))\n        })\n    )\n    context.paint()\n}\n\nexport default function Demo() {\n    return (\n        <View\n            onReady={init}\n            assets={{\n                glb: {\n                    mesh: CubeURL,\n                },\n                image: {\n                    background: BackgroundURL,\n                },\n            }}\n        />\n    )\n}\n';function I(){const[A,e]=a.useState(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"half-left",children:(0,t.jsx)(u,{})}),(0,t.jsxs)("div",{className:"half-right",children:[(0,t.jsx)("div",{children:(0,t.jsx)(i.yQN,{variant:"elevated",onClick:()=>e(!A),children:A?"Show code details":"Show full code"})}),(0,t.jsx)(o.A,{language:"tsx",value:A?C:g})]})]})}function w(A){const e={a:"a",h1:"h1",...(0,r.R)(),...A.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.h1,{children:[(0,t.jsx)(e.a,{href:"docs/classes/TgdPainterFramebuffer.html",children:"TgdPainterFramebuffer"})," - Example 2"]}),"\n",(0,t.jsx)(I,{})]})}function b(A={}){const{wrapper:e}={...(0,r.R)(),...A.components};return e?(0,t.jsx)(e,{...A,children:(0,t.jsx)(w,{...A})}):w(A)}}}]);