"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[2965],{2197:(e,n,t)=>{function a(e){return!!e&&!Array.isArray(e)&&"object"==typeof e}function s(e){return"number"==typeof e}function r(e,n,t=null){try{return i(e,n),!0}catch(n){return t&&(console.error("[Invalid type]",t),console.error(e),console.debug(n)),!1}}function i(e,n,t="data"){if("function"==typeof n)return i(e,n(),t);if("unknown"===n)return;if("null"===n){if(null!==e)throw console.log("ðŸš€ [index] data = ",e,typeof e),Error(`Expected ${t} to be a null and not a ${l(e)}!`);return}if("string"==typeof n){if(typeof e!==n)throw Error(`Expected ${t} to be a ${n} and not a ${l(e)}!`);return}if(Array.isArray(n)){const[r]=n;switch(r){case"array":return void function(e,n,t){if(!Array.isArray(e))throw Error(`Expected ${n} to be an array and not a ${l(e)}!`);const[,a,r]=t;if(r){const t=e.length;if(s(r)){if(t!==r)throw Error(`Expected ${n}'s length to be ${r} and not ${t}!`)}else{const{min:e,max:a}=r;if(s(e)&&t<e)throw Error(`Expected ${n}'s MIN length to be ${e} and not ${t}!`);if(s(a)&&t>a)throw Error(`Expected ${n}'s MAX length to be ${a} and not ${t}!`)}}for(let t=0;t<e.length;t+=1)i(e[t],a,`${n}[${t}]`)}(e,t,n);case"map":return void function(e,n,t){if(!a(e))throw Error(`Expected ${n} to be an object and not a ${l(e)}!`);const[,s]=t;for(const t of Object.keys(e))"string"==typeof t&&i(e[t],s,`${n}[${t}]`)}(e,t,n);case"?":return void function(e,n,t){if(void 0===e)return;const[,a]=t;i(e,a,n)}(e,t,n);case"|":return void function(e,n,t){const[,...a]=t;if(0===a.length)throw Error(`No type has been defined for this alternative: ${JSON.stringify(t)}!`);const s=[];for(const t of a)try{return void i(e,t,n)}catch(e){e instanceof Error&&s.push(e)}throw new Error(`All alternatives failed!${s.map((e=>`\n${e.message}`))}`)}(e,t,n);case"tuple":return void o(e,t,n);case"tuple...":return void function(e,n,[,...t]){const a=t.length-1;o(e,n,["tuple",...t.slice(0,a)]);const s=t[a];for(let t=a;t<e.length;t++)i(e[t],s,`${n}[${t}]`)}(e,t,n);case"partial":return void function(e,n,[,t]){!function(e,n="data"){if(!a(e))throw Error(`${n} was expected to be an object but we got ${typeof e}!`)}(e,n);for(const a of Object.keys(t)){if("string"!=typeof a)continue;const s=e[a];void 0!==s&&i(s,t[a],`${n}.${a}`)}}(e,t,n);case"literal":return void function(e,n,t){const[,...a]=t;for(const n of a)if(e===n)return;throw Error(`Expected ${n} to be a literal (${a.map((e=>`"${e}"`)).join(" | ")}) and not a ${l(e)}!`)}(e,t,n);case"custom":return void function(e,n,[,t]){if(!t(e))throw Error(`Expected ${t.name}(${n}) to return true!`)}(e,t,n);default:throw Error(`Don't know how to create a type guard for this kind of type: ${JSON.stringify(n)}`)}}if("object"!=typeof e)throw Error(`Expected ${t} to be an object and not a ${l(e)}!`);const r=e;for(const e of Object.keys(n))"string"==typeof e&&i(r[e],n[e],`${t}.${e}`)}function o(e,n,[,...t]){if(function(e,n="data"){if(!Array.isArray(e))throw Error(`${n} was expected to be an Array but we got ${typeof e}!`)}(e),t.length>e.length)throw Error(`Expected ${n}'s length to be at least ${t.length} and not ${e.length}!`);for(let a=0;a<t.length;a++){const s=t[a];i(e[a],s,`${n}[${a}]`)}}function c(e,n){return function(e,n,t){return r(e,n)?e:r(t,n)?t:t(e)}(e,"number",n)}function l(e){var n;return null===e?"null":"function"==typeof e?`function ${null!==(n=e.name)&&void 0!==n?n:""}()`:typeof e}t.d(n,{Et:()=>s,GB:()=>c,Xj:()=>r,j:()=>i})},2932:(e,n,t)=>{t.r(n),t.d(n,{default:()=>pe});var a=t(4848),s=t(6540),r=t(7402);const i={expander:"V3aob0pLE9HcHxN5iVyj",handle:"PbWyyuXizmAAIbcs5urg"},o=r.Sxu.classNames;function c(e){const[n,t]=s.useState(!1),c={...(0,r.$qi)(e),...e.style},l=e.icon;return(0,a.jsxs)("details",{className:o.join(e.className,i.expander),style:c,onToggle:a=>{a.preventDefault(),a.stopPropagation(),t(!n),e.onClick?.()},onClick:e.children?void 0:n=>{n.preventDefault(),n.stopPropagation(),e.onClick?.()},name:e.name,children:[(0,a.jsxs)("summary",{children:[(0,a.jsx)("div",{className:i.handle,children:e.children?n?(0,a.jsx)(r.vpi,{size:"1em"}):(0,a.jsx)(r.DF0,{size:"1em"}):(0,a.jsx)(r.Sg,{size:"1em"})}),l&&(0,a.jsx)(l,{color:"primary-7"}),(0,a.jsx)("span",{children:e.title})]}),(0,a.jsx)("div",{children:e.children})]})}const l={gltfTree:"XPMLtzXBRVSrxv_Xe50A"};var d=t(2197);function u(e){return(0,d.Xj)(e,{camera:"number"})}const h={node:"NDcVYWtiNdLrATykGHx3"},m=r.Sxu.classNames;function f(e){const n={...(0,r.$qi)(e)},t=e.data.gltf.nodes?.[e.index];if(!t)return null;const s=t.name??`#${e.index}`,i=function(e){return u(e)?r.PEB:(n=e,(0,d.Xj)(n,{mesh:"number"})?r.Td5:function(e){return(0,d.Xj)(e,{extensions:{KHR_lights_punctual:{light:"number"}}})}(e)?r.H3I:Array.isArray(e.children)?r.MRx:r.dlJ);var n}(t);return(0,a.jsx)(c,{className:m.join(e.className,h.node),name:e.name,style:n,title:s,onClick:()=>{e.onAction?.({type:"node",index:e.index})},icon:i,children:Array.isArray(t.children)&&t.children.map((n=>(0,a.jsx)(f,{data:e.data,index:n,onAction:e.onAction},`#${n}`)))})}function x(e){const{nodes:n}=e.data.gltf;return n?(0,a.jsx)(c,{title:"Nodes",icon:r.MRx,children:n.map(((n,t)=>(0,a.jsx)(f,{data:e.data,index:t,onAction:e.onAction},`#${t}`)))}):(0,a.jsx)("p",{children:"No nodes."})}r.Sxu.classNames;const j={images:"o4_1rbAB9XmGcjjHG22H"},p=r.Sxu.classNames;function g({className:e,data:n,onAction:t}){return(0,a.jsx)(c,{className:p.join(e,j.images),icon:r.dwH,title:"Images",children:(n.gltf.images??[]).map(((e,n)=>(0,a.jsx)(c,{title:e.name??`#${n}`,onClick:()=>t?.({type:"image",index:n}),children:(0,a.jsxs)("ul",{children:[e.name&&(0,a.jsxs)("li",{children:["Name: ",(0,a.jsx)("b",{children:e.name})]}),e.mimeType&&(0,a.jsxs)("li",{children:["Mime type: ",(0,a.jsx)("b",{children:e.mimeType})]}),e.bufferView&&(0,a.jsxs)("li",{children:["Buffer view: ",(0,a.jsx)("b",{children:e.bufferView})]}),e.uri&&(0,a.jsxs)("li",{children:["URI: ",(0,a.jsx)("b",{children:e.uri})]})]})},n)))})}const b={lights:"G3CJ6oAzpvDypk53NREK"},y=r.Sxu.classNames;function N({className:e,data:n,onAction:t}){return(0,a.jsx)(c,{className:y.join(e,b.images),title:"Lights",icon:r.H3I})}function v({data:e,scene:n,title:t,index:s,onAction:i}){return(0,a.jsx)(c,{title:t,icon:r.GtP,onClick:()=>{i?.({index:s,type:"scene"})},children:(n.nodes??[]).map(((n,t)=>(0,a.jsx)(f,{data:e,index:t,onAction:i},`node#${t}`)))})}function w(e){const{scenes:n}=e.data.gltf;return n?(0,a.jsx)(c,{title:"Scenes",icon:r.GtP,children:n.map(((n,t)=>(0,a.jsx)(v,{data:e.data,scene:n,title:n.name??`Scene #${t}`,index:t,onAction:e.onAction},`Scene#${t}`)))}):(0,a.jsx)("p",{children:"No scenes."})}r.Sxu.classNames,r.Sxu.classNames;const S=r.Sxu.classNames;function $(e){const n={...(0,r.$qi)(e)};return(0,a.jsxs)("div",{className:S.join(e.className,l.gltfTree),style:n,children:[(0,a.jsxs)(c,{title:"GLTF",name:"root",children:[(0,a.jsx)(r.yQN,{variant:"text",color:"secondary-5",fullwidth:!0,onClick:(t={type:"verbatim"},()=>e.onAction(t)),children:"Show verbatim content"}),(0,a.jsx)(w,{data:e.data,onAction:e.onAction}),(0,a.jsx)(x,{data:e.data,onAction:e.onAction}),(0,a.jsx)(g,{data:e.data,onAction:e.onAction}),(0,a.jsx)(N,{data:e.data,onAction:e.onAction})]}),(0,a.jsx)(c,{title:"Chunks",name:"root",children:(0,a.jsxs)(r.sWC,{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",fullwidth:!0,gap:"S",children:[(0,a.jsx)("b",{children:"Index"}),(0,a.jsx)("b",{children:"Type"}),(0,a.jsx)("b",{children:"Size (bytes)"}),e.data.getChunkDetails().map((({type:e,size:n},t)=>{return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:["#",t]},`Index#${t}`),(0,a.jsx)("div",{children:e},`Type#${t}`),(0,a.jsx)("div",{children:(s=n,(new Intl.NumberFormat).format(s))},`Size#${t}`)]});var s}))]})}),(0,a.jsx)("hr",{}),(0,a.jsx)("a",{href:"https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html",children:"GLTF 2.0 Specification"})]});var t}var A=t(1244);const k=t.p+"bin/danatia.b03f55aeadf7e337f613.glb",E={action:"TivnAbABYZdpWW9GZs6n"},C={verbatin:"EOCnuXPaVAQQjOaVzDWk"},M=r.Sxu.classNames;function T(e){return(0,a.jsxs)(r.sWC,{className:M.join(e.className,C.verbatin),overflow:"auto",fullsize:!0,color:"neutral-1",padding:"S",children:[(0,a.jsx)(r.yQN,{onClick:()=>console.log(e.data.gltf),children:"Write to console"}),(0,a.jsx)("pre",{children:JSON.stringify(e.data.gltf,null,"  ")})]})}var O=t(9074);const I={actionNodeTransfo:"YXMiTxYNCxTJZifDB0En"},B=r.Sxu.classNames;function z(e){const n={...(0,r.$qi)(e)},t=["const transfo = new TgdTransfo({"];var s;return R(e.node.translation)&&t.push(`  position: [${e.node.translation.join(", ")}],`),s=e.node.rotation,(0,d.Xj)(s,["array","number",{min:4,max:4}])&&t.push(`  orientation: [${e.node.rotation.join(", ")}],`),R(e.node.scale)&&t.push(`  position: [${e.node.scale.join(", ")}],`),t.push("})"),(0,a.jsx)("div",{className:B.join(e.className,I.actionNodeTransfo),style:n,children:(0,a.jsx)(O.A,{language:"ts",value:t.join("\n")})})}function R(e){return(0,d.Xj)(e,["array","number",{min:3,max:3}])}const W={Error:"H0UnrqUJgmcVuhNY9Flo"},X=r.Sxu.classNames;function P({className:e,children:n}){return(0,a.jsx)("div",{className:X.join(e,W.Error),children:n})}const F={actionNodeCamera:"H9dDNSbXjsX6jN3Bf3xh"},G=r.Sxu.classNames;function q(e){const n={...(0,r.$qi)(e)},t=e.data.gltf.cameras?.[e.node.camera??-1];if(!t)return(0,a.jsx)(P,{children:"No camera found!"});const s=function(e,n){const t=[];return(0,A.JAF)(n)&&(t.push("const camera = new TgdCameraPerspective({",`  fovy: ${n.perspective.yfov},  // around ${Math.round((0,A.ZvP)(n.perspective.yfov))}Â°`,`  near: ${(0,d.GB)(n.perspective.znear,.001)}`,`  far: ${n.perspective.zfar??"Infinity"}`,"  transfo: {","    distrance: 0,"),e.translation&&t.push(`    position: [${e.translation.join(", ")}],`),e.rotation&&t.push(`    orientation: [${e.rotation.join(", ")}],`),e.scale&&t.push(`    scale: [${e.scale.join(", ")}],`),t.push("  }","})")),t.join("\n")}(e.node,t);return(0,a.jsx)("div",{className:G.join(e.className,F.actionNodeCamera),style:n,children:(0,a.jsx)(O.A,{language:"ts",value:s})})}const D={actionNode:"FHDDVaFyhGXfoGBta3yQ"},L={actionNodeRender:"WlQP8S7OoKQ5p9KJGWab"};var J=t(7289);function V({data:e,node:n}){const t=function(e,n){return s.useCallback((t=>{const a=H(e,n);t.camera.transfo.position=a.center,t.camera.transfo.distance=2*a.radius,t.camera.far=10*a.radius,new A.pwt(t,{inertiaOrbit:1e3,speedZoom:.25*a.radius});const s=new A.o57(t,{color:[.2,.2,.2,1],depth:1}),{painter:r}=(0,A.TB8)({data:e,node:n,context:t});r.debug("nodePainter");const i=new A.Ipk(t,{depth:A.Eg5.lessOrEqual,children:[r]});t.add(s,i),t.paint()}),[e,n])}(e,n);return(0,a.jsx)("div",{className:L.actionNodeRender,children:(0,a.jsx)(J.A,{onReady:t,width:"100%",height:"100%",gizmo:!0,noBorder:!0},JSON.stringify(n))})}function H(e,n){const t=[];(0,d.Et)(n.mesh)&&t.push(Z(function(e,n){const t=e.getMesh(n);if(!t)return[{center:new A.hNi,radius:1}];const a=[];for(const n of t.primitives){const t=e.getAccessorByAttributeName(n,"POSITION");if(U(t.min)&&U(t.max)){const[e,n,s]=t.min,[r,i,o]=t.max;a.push({center:A.hNi.newFromMix(t.min,t.max),radius:Math.max(Math.abs(r-e),Math.abs(i-n),Math.abs(o-s))})}}return a}(e,n.mesh)));for(const a of n.children??[]){const n=e.getNode(a);t.push(H(e,n))}return function(e,n){const[t,a,s]=e.center,r=new A.oao(t,a,s,1),i={};n.translation&&(i.position=n.translation),n.rotation&&(i.orientation=n.rotation),n.scale&&(i.scale=n.scale);const o=new A.tSS(i);r.applyMatrix(o.matrix);const[c,l,d]=o.scale,u=Math.max(c,l,d);return{center:new A.hNi(r.x,r.y,r.z),radius:e.radius*u}}(Z(t),n)}function U(e){return(0,d.Xj)(e,["array","number",{min:3,max:3}])}function Z(e){if(0===e.length)return{center:new A.hNi,radius:1};let n=0,t=0,a=0;for(const{center:s}of e){const[e,r,i]=s;n+=e,t+=r,a+=i}const s=e.length;n/=s,t/=s,a/=s;const r=new A.hNi(n,t,a);let i=0;for(const{center:n,radius:t}of e)i=Math.max(i,t+A.hNi.distance(r,new A.hNi(n)));return{center:r,radius:i}}r.Sxu.classNames;const _={actionNodeMesh:"p9Kbtkuegy0iOh66GNDX"},K=r.Sxu.classNames;function Q({className:e,data:n,meshIndex:t}){const s=n.getMesh(t);return s?(0,a.jsx)("div",{className:K.join(e,_.actionNodeMesh),children:(0,a.jsx)("ul",{children:s.primitives.map(((e,t)=>(0,a.jsxs)("li",{children:[(0,a.jsxs)("b",{children:["Primitive ",t]}),(0,a.jsx)(c,{title:"Attributes",children:Object.keys(e.attributes).map((t=>(0,a.jsx)(c,{title:t,children:(0,a.jsx)("pre",{children:JSON.stringify(n.getAccessor(e.attributes[t]),null,"  ")})},t)))}),(e.material??-1)>-1&&(0,a.jsx)(c,{title:(0,a.jsxs)("div",{children:["Material"," ",(0,a.jsx)("b",{children:n.getMaterial(e.material??-1)?.name??"Material"})]}),children:(0,d.Et)(e.material)&&(0,a.jsx)("pre",{children:JSON.stringify(n.getMaterial(e.material),null,"  ")})}),(0,a.jsx)(c,{title:"Verbatim",children:(0,a.jsx)("pre",{children:JSON.stringify(e,null,"  ")})})]},t)))})}):(0,a.jsxs)(P,{children:["No mesh found with index #",t,"!"]})}const Y=r.Sxu.classNames;function ee(e){const n={...(0,r.$qi)(e)},t=e.data.gltf.nodes?.[e.index];return t?(0,a.jsxs)(r.UkC,{orientation:"column",template:"-1",className:Y.join(e.className,D.actionNode),fullsize:!0,children:[(0,a.jsx)(r.sWC,{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"M",color:"primary-5",padding:"S",children:(0,a.jsxs)("div",{children:["Node #",e.index,":"," ",(0,a.jsx)("b",{children:t.name??(0,a.jsx)("em",{children:"anonymous"})})]})}),(0,a.jsx)(r.sWC,{style:n,children:(0,a.jsxs)(r.WET,{fullsize:!0,children:[(0,a.jsx)(r.Zdo,{label:"3D View",children:!u(t)&&(0,a.jsx)(V,{data:e.data,node:t})},"render"),(0,a.jsx)(r.Zdo,{label:"Camera",children:u(t)&&(0,a.jsx)(q,{data:e.data,node:t})},"camera"),(0,a.jsx)(r.Zdo,{label:"Transformation",children:(0,a.jsx)(z,{node:t})},"transfo"),(0,a.jsx)(r.Zdo,{label:"Mesh",children:(0,d.Et)(t.mesh)&&(0,a.jsx)(Q,{data:e.data,meshIndex:t.mesh})},"mesh"),(0,a.jsx)(r.Zdo,{label:"Verbatim",children:(0,a.jsx)("pre",{children:JSON.stringify(t,null,"  ")})},"verbatim")]})})]}):null}const ne=t.p+"img/checkboard-light.a7a1229bc8b42ce5b9d3.jpg",te=t.p+"img/checkboard-dark.9d3dacc5286db0915472.jpg",ae={actionImage:"C9I4sL1N2ssiuRkPggbA",dimensions:"v6mssTjMLNc8Ogj4uBSq",link:"lHntNRydftoMSCTh5gwv"},se=r.Sxu.classNames;function re({data:e,index:n}){const[t,i]=s.useState("light"),[o,c]=s.useState(null),[l,d]=s.useState(null),[u,h]=s.useState(null),m=s.useCallback(((t,a)=>{h(null);const s=new A.o57(t,{color:[0,0,0,0]});t.add(s),t.paint(),e.loadImage(n).then((e=>{if(!e)return void h("Unable to load the image!");c(e),d([e.width,e.height]);const n=new A.HTX(t).loadBitmap(e),a=new A.b6h(t,{mode:"contain",texture:n});t.add(a),t.paint()})).catch((()=>h("Unable to load the image!")))}),[e,n]);return(0,a.jsxs)("div",{className:se.join(ae.actionImage),style:{backgroundImage:`url(${"dark"===t?te:ne})`},children:[u?(0,a.jsx)(P,{children:u}):(0,a.jsx)(J.A,{options:{alpha:!0},onReady:m,noBorder:!0,width:"100%",height:"100%"},JSON.stringify(e.gltf.images?.[n])),(0,a.jsxs)("header",{children:[(0,a.jsx)("div",{className:ae.dimensions,children:l&&l.join(" Ã— ")}),(0,a.jsxs)(r.si8,{value:t,onChange:i,children:[(0,a.jsx)("div",{children:"Light"},"light"),(0,a.jsx)("div",{children:"Dark"},"dark")]}),(0,a.jsx)("div",{className:ae.link,children:o&&(0,a.jsx)("a",{href:o.src,target:"_blank",children:"Open in new tab"})})]})]})}const ie={actionScene:"IUOTuyuq_tmmW8h_lBpp"},oe=r.Sxu.classNames;function ce({data:e,index:n}){const t=e.gltf.scenes?.[n],r=function(e,n){return s.useCallback((t=>{if(!n)return void console.error("No Scene!");console.log("ðŸš€ [ActionScene] context =",t);const a=new A.buV({children:(n.nodes??[]).filter((n=>{const t=e.getNode(n);return(0,d.Et)(t.mesh)||Array.isArray(t.children)&&t.children.length>0})).map((n=>(0,A.TB8)({data:e,node:n,context:t}).painter)),name:n.name??"Scene"});a.debug();const s=ue((n.nodes??[]).map((n=>le(e,e.getNode(n)))));t.camera.transfo.position=s.center,t.camera.transfo.distance=2*s.radius,t.camera.far=10*s.radius,new A.pwt(t,{inertiaOrbit:1e3,speedZoom:.25*s.radius});const r=new A.o57(t,{color:[.2,.2,.2,1],depth:1}),i=new A.Ipk(t,{depth:A.Eg5.lessOrEqual,children:[a]});t.add(r,i),t.paint()}),[e,n])}(e,t);return t?(0,a.jsx)("div",{className:oe.join(ie.actionScene),children:(0,a.jsx)(J.A,{onReady:r,width:"100%",height:"100%",gizmo:!0,noBorder:!0},JSON.stringify(t))}):(0,a.jsx)("p",{children:"No scene..."})}function le(e,n){const t=[];(0,d.Et)(n.mesh)&&t.push(ue(function(e,n){const t=e.getMesh(n);if(!t)return[{center:new A.hNi,radius:1}];const a=[];for(const n of t.primitives){const t=e.getAccessorByAttributeName(n,"POSITION");if(de(t.min)&&de(t.max)){const[e,n,s]=t.min,[r,i,o]=t.max;a.push({center:A.hNi.newFromMix(t.min,t.max),radius:Math.max(Math.abs(r-e),Math.abs(i-n),Math.abs(o-s))})}}return a}(e,n.mesh)));for(const a of n.children??[]){const n=e.getNode(a);t.push(le(e,n))}return function(e,n){const[t,a,s]=e.center,r=new A.oao(t,a,s,1),i={};n.translation&&(i.position=n.translation),n.rotation&&(i.orientation=n.rotation),n.scale&&(i.scale=n.scale);const o=new A.tSS(i);r.applyMatrix(o.matrix);const[c,l,d]=o.scale,u=Math.max(c,l,d);return{center:new A.hNi(r.x,r.y,r.z),radius:e.radius*u}}(ue(t),n)}function de(e){return(0,d.Xj)(e,["array","number",{min:3,max:3}])}function ue(e){if(0===e.length)return{center:new A.hNi,radius:1};let n=0,t=0,a=0;for(const{center:s}of e){const[e,r,i]=s;n+=e,t+=r,a+=i}const s=e.length;n/=s,t/=s,a/=s;const r=new A.hNi(n,t,a);let i=0;for(const{center:n,radius:t}of e)i=Math.max(i,t+A.hNi.distance(r,new A.hNi(n)));return{center:r,radius:i}}const he=r.Sxu.classNames;function me(e){const n={...(0,r.$qi)(e)};switch(e.action.type){case"scene":return(0,a.jsx)(ce,{data:e.data,index:e.action.index});case"verbatim":return(0,a.jsx)(T,{data:e.data});case"node":return(0,a.jsx)(ee,{data:e.data,index:e.action.index});case"image":return(0,a.jsx)(re,{data:e.data,index:e.action.index});default:return(0,a.jsxs)("div",{className:he.join(e.className,E.action),style:n,children:["Don't know what to do with this action:"," ",(0,a.jsx)("pre",{children:JSON.stringify(e.action,null,"  ")}),"."]})}}const fe={viewgltf:"jgtK2RMH89K4DKGqzXgk"},xe=r.Sxu.classNames;function je(e){const[n,t]=s.useState({type:"verbatim"}),[i,o]=function(){const[e,n]=s.useState(null),t=s.useCallback((e=>{(0,A.vSU)(e).then((e=>{if(!e)return;const t=new A.nU$(e);n(t)})).catch(console.error)}),[n]);return s.useEffect((()=>{t(k)}),[]),[e,t]}();return s.useState(null),(0,a.jsxs)(r.UkC,{className:xe.join(e.className,fe.viewgltf),template:"*1",orientation:"row",fullsize:!0,gap:"8px",children:[(0,a.jsxs)(r.UkC,{template:"*1",orientation:"column",children:[(0,a.jsxs)(r.sWC,{color:"primary-5",display:"flex",justifyContent:"space-between",alignItems:"center",padding:["S","M"],minWidth:"300px",gap:"M",children:[(0,a.jsx)("div",{children:"GLB Viewer"}),i&&(0,a.jsxs)("em",{children:[Math.floor(i.fileSize/1024)," Kb"]}),(0,a.jsx)(r.e3B,{accept:"glb",onLoad:function(e){const[n]=e;n&&o(n)},children:(0,a.jsx)(r.Thu,{})})]}),(0,a.jsxs)(r.sWC,{overflow:"auto",minHeight:"auto",color:"neutral-5",padding:"S",children:[!i&&(0,a.jsx)("div",{children:"Loading..."}),i&&(0,a.jsx)($,{data:i,onAction:t})]})]}),i&&(0,a.jsx)(r.sWC,{position:"relative",overflow:"auto",fullsize:!0,children:(0,a.jsx)(me,{action:n,data:i})})]})}function pe(){return(0,a.jsx)(je,{})}},7289:(e,n,t)=>{t.d(n,{A:()=>l});var a=t(4848),s=t(6540),r=t(1244),i=t(7402),o=t(3686);const c={Tgd:"hgIjhDQIuBCJEQ4ZgLXp",relative:"efOyHCihw9wfMB6AaAqw",overlay:"ywC8N0Uxbvm2Ug2DwPkE",loading:"PBWSRsbiwEqGpeL0hEfm",screen:"BErChOLWGtciKhh3IFud",canvas:"fT7FcYouYlPbElIAEXRP",gizmo:"uAPfWt_Dhe7RaRrnmIu0",actions:"Ia9jfUO3OevcIh2fV6R6",enabled:"dZYZScZBbWV2Pm3ftXcG"};function l({className:e,options:n,onReady:t,gizmo:l=!1,width:d="640px",height:u="480px",noBorder:h=!1,assets:m,children:f}){const[x,j]=s.useState(!0),[p,g]=s.useState(!1),b=s.useRef(null),y=s.useRef(null),N=s.useRef(null),v=s.useRef(null),[w,S]=s.useState(!0);let $="auto";d.endsWith("px")&&u.endsWith("px")&&(d.substring(d.length-2),u.substring(u.length-2));const A=e=>{if(!e)return;if(y.current)return;y.current=e;const a=new r.tfp(e,n);b.current=a,S(!0),async function({glb:e,data:n,text:t,image:a}={}){console.log("ðŸš€ [Tgd] glb, data, text, image = ",e,n,t,a);const s={glb:{},data:{},text:{},image:{}},i=[];return a&&Object.keys(a).forEach((e=>{i.push((async()=>{const n=a[e];console.log("Loading image:",n);const t=await(0,r.V_9)(n);t&&(s.image[e]=t)}))})),e&&Object.keys(e).forEach((n=>{i.push((async()=>{const t=e[n];console.log("Loading GLB:",t);const a=await(0,r.TCe)(t);a&&(s.glb[n]=a)}))})),n&&Object.keys(n).forEach((e=>{i.push((async()=>{const t=n[e],a=await(0,r.vSU)(t);a&&(s.data[e]=a)}))})),t&&Object.keys(t).forEach((e=>{i.push((async()=>{const n=t[e],a=await(0,r.jWq)(n);a&&(s.text[e]=a)}))})),await Promise.all(i.map((e=>e()))),s}(m).then((e=>{console.log("Ready!"),t(a,e),a.paint(),S(!1)})).catch((e=>{console.error("Unable to initialize the scene!",e),S(!1)}));const s=N.current;s&&s.attachContext(a)},k=e=>{const n=new r.GbF({canvas:e});N.current=n,n.eventTipClick.addListener((({to:e})=>{const n=b.current;n&&n.animSchedule({duration:.2,easingFunction:r.Wcc,action:(0,r.vRM)(n.camera,{orientation:e})})}));const t=b.current;t&&n.attachContext(t)};return s.useEffect((()=>{const e=y.current,n=b.current;if(!e||!n)return;const t=new ResizeObserver((()=>n.paint()));return t.observe(e),e.requestFullscreen||(e.requestFullscreen=e.webkitRequestFullscreen),g(Boolean(e.requestFullscreen)),()=>t.unobserve(e)}),[b.current,y.current]),h?(0,a.jsxs)("div",{ref:v,className:c.screen,style:{width:x?d:u,height:x?u:d},children:[(0,a.jsx)("canvas",{className:c.canvas,ref:A}),l&&(0,a.jsx)("canvas",{className:c.gizmo,ref:k})]}):(0,a.jsxs)("div",{className:i.Sxu.classNames.join(e,c.Tgd),children:[(0,a.jsxs)("div",{className:i.Sxu.classNames.join(c.actions,!w&&c.enabled),children:[(0,a.jsx)("div",{children:(0,a.jsx)(i.I64,{onClick:()=>j(!x)})}),(0,a.jsx)("div",{children:(0,a.jsx)(i.kRc,{onClick:()=>{const e=b.current;e&&e.takeSnapshot().then((e=>{const n=document.createElement("a");document.body.appendChild(n),n.style.display="none",n.href=e.src,n.download="snapshot.png",n.click(),window.setTimeout((()=>document.body.removeChild(n)),3e4)}))}})}),p&&(0,a.jsx)("div",{children:(0,a.jsx)(i.L9n,{onClick:()=>{const e=v.current;e&&e.requestFullscreen()}})})]}),(0,a.jsxs)("div",{className:c.relative,children:[(0,a.jsxs)("div",{ref:v,className:c.screen,style:{width:x?d:u,height:x?u:d},children:[(0,a.jsx)("canvas",{className:c.canvas,ref:A}),l&&(0,a.jsx)("canvas",{className:c.gizmo,ref:k})]}),(0,a.jsx)("div",{className:i.Sxu.classNames.join(c.overlay,w&&c.loading),children:(0,a.jsx)(o.A,{})}),f]})]})}}}]);