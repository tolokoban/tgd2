"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[7],{8462:(n,e,t)=>{t.r(e),t.d(e,{default:()=>m});var a=t(4848),s=t(8453),r=t(6540),i=t(8766),l=t(2261),c=t(4213),d=t(4088),o=t(4859);const g=t.p+"bin/ring.9d185b8088f5442e28c1.glb";var h=t(1278);function u(n,e){const t=new c.xN({distance:3,far:100,near:.01,fovy:Math.PI/4,zoom:1});n.camera=t,new c.pw(n,{speedPanning:0,inertiaOrbit:1e3}),n.add(new c.o5(n,{depth:1,stencil:0}),new c.b6(n,n.textures2D.create({image:o})),new c.Ip(n,{color:!1,depth:c.Eg.off,cull:c.Tf.back,stencil:c.d7.write(1),children:[new c.dR(n,{asset:e.glb.ring,materialFactory:()=>new c.M3})]}),new c.Ip(n,{depth:c.Eg.less,cull:c.Tf.back,stencil:c.d7.paintIfEqual(0),children:[new c.dR(n,{asset:e.glb.suzanne})]})),n.paint()}function p(){return(0,a.jsx)(d.A,{onReady:u,options:{depth:!0,stencil:!0,antialias:!0},assets:{glb:{suzanne:h,ring:g}}})}const w={"Detail #1":"    const camera = new TgdCameraPerspective({\n        distance: 3,\n        far: 100,\n        near: 0.01,\n        fovy: Math.PI / 4,\n        zoom: 1,\n    })\n    ctx.camera = camera\n    new TgdControllerCameraOrbit(ctx, {\n        speedPanning: 0,\n        inertiaOrbit: 1000,\n    })\n    ctx.add(\n        new TgdPainterClear(ctx, {\n            depth: 1,\n            stencil: 0,\n        }),\n        new TgdPainterBackground(\n            ctx,\n            ctx.textures2D.create({\n                image: BackgroundURL,\n            })\n        ),\n        new TgdPainterState(ctx, {\n            color: false,\n            depth: webglPresetDepth.off,\n            cull: webglPresetCull.back,\n            stencil: webglPresetStencil.write(1),\n            children: [\n                new TgdPainterMeshGltf(ctx, {\n                    asset: assets.glb.ring,\n                    materialFactory: () => new TgdMaterialSolid(),\n                }),\n            ],\n        }),\n        new TgdPainterState(ctx, {\n            depth: webglPresetDepth.less,\n            cull: webglPresetCull.back,\n            stencil: webglPresetStencil.paintIfEqual(0),\n            children: [\n                new TgdPainterMeshGltf(ctx, {\n                    asset: assets.glb.suzanne,\n                }),\n            ],\n        })\n    )\n    ctx.paint()"},b='import {\n    TgdCameraPerspective,\n    TgdContext,\n    TgdControllerCameraOrbit,\n    TgdMaterialSolid,\n    TgdPainterBackground,\n    TgdPainterClear,\n    TgdPainterDebugStencil,\n    TgdPainterMeshGltf,\n    TgdPainterState,\n    webglPresetCull,\n    webglPresetDepth,\n    webglPresetStencil,\n} from "@tolokoban/tgd"\nimport View, { Assets } from "@/components/demo/Tgd"\n\nimport BackgroundURL from "@/assets/image/dino.webp"\nimport RingURL from "@/assets/mesh/ring.glb"\nimport SuzanneURL from "@/assets/mesh/suzanne.glb"\n\nfunction init(ctx: TgdContext, assets: Assets) {\n    const camera = new TgdCameraPerspective({\n        distance: 3,\n        far: 100,\n        near: 0.01,\n        fovy: Math.PI / 4,\n        zoom: 1,\n    })\n    ctx.camera = camera\n    new TgdControllerCameraOrbit(ctx, {\n        speedPanning: 0,\n        inertiaOrbit: 1000,\n    })\n    ctx.add(\n        new TgdPainterClear(ctx, {\n            depth: 1,\n            stencil: 0,\n        }),\n        new TgdPainterBackground(\n            ctx,\n            ctx.textures2D.create({\n                image: BackgroundURL,\n            })\n        ),\n        new TgdPainterState(ctx, {\n            color: false,\n            depth: webglPresetDepth.off,\n            cull: webglPresetCull.back,\n            stencil: webglPresetStencil.write(1),\n            children: [\n                new TgdPainterMeshGltf(ctx, {\n                    asset: assets.glb.ring,\n                    materialFactory: () => new TgdMaterialSolid(),\n                }),\n            ],\n        }),\n        new TgdPainterState(ctx, {\n            depth: webglPresetDepth.less,\n            cull: webglPresetCull.back,\n            stencil: webglPresetStencil.paintIfEqual(0),\n            children: [\n                new TgdPainterMeshGltf(ctx, {\n                    asset: assets.glb.suzanne,\n                }),\n            ],\n        })\n    )\n    ctx.paint()\n}\n\nexport default function Demo() {\n    return (\n        <View\n            onReady={init}\n            options={{\n                depth: true,\n                stencil: true,\n                antialias: true,\n            }}\n            assets={{\n                glb: {\n                    suzanne: SuzanneURL,\n                    ring: RingURL,\n                },\n            }}\n        />\n    )\n}\n';function x(){const[n,e]=r.useState(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"half-left",children:(0,a.jsx)(p,{})}),(0,a.jsxs)("div",{className:"half-right",children:[(0,a.jsx)("div",{children:(0,a.jsx)(i.yQN,{variant:"elevated",onClick:()=>e(!n),children:n?"Show code details":"Show full code"})}),(0,a.jsx)(l.A,{language:"tsx",value:n?b:w})]})]})}function f(n){const e={a:"a",h1:"h1",hr:"hr",li:"li",ol:"ol",p:"p",...(0,s.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h1,{children:"Stencil"}),"\n",(0,a.jsx)(e.p,{children:"Here is a demo of a simple masking technique done with stencils."}),"\n",(0,a.jsx)(e.p,{children:"This render has three passes:"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsx)(e.li,{children:"Paint the background"}),"\n",(0,a.jsx)(e.li,{children:"Paint an invisible ring that will set the stencil."}),"\n",(0,a.jsx)(e.li,{children:"Use the stencil to know where to paint the monkey."}),"\n"]}),"\n",(0,a.jsx)(x,{}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:"#/articles/state",children:"Back"})})]})}function m(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(f,{...n})}):f(n)}},1278:(n,e,t)=>{n.exports=t.p+"bin/suzanne.d3b099acbd7623177bf6.glb"}}]);