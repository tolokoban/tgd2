"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[399],{1167:(e,n,t)=>{t.r(n),t.d(n,{default:()=>h});var s=t(4848),o=t(8453),r=t(4213),a=t(4088),c=(e,n,t)=>new Promise(((s,o)=>{var r=e=>{try{c(t.next(e))}catch(e){o(e)}},a=e=>{try{c(t.throw(e))}catch(e){o(e)}},c=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,a);c((t=t.apply(e,n)).next())}));function i(){return(0,s.jsx)(a.A,{onReady:l})}function l(e){document.addEventListener("keydown",(n=>{switch(console.log("ðŸš€ [index] evt.key = ",n.key),n.key){case"0":e.camera.face("+X+Y+Z");break;case".":e.camera.zoom=1}e.paint()}));const n=new r.xN({distance:3,far:100,near:.1,fovy:Math.PI/4,zoom:1});e.camera=n,n.face("+X+Y+Z"),new r.pw(e,{inertiaOrbit:900}),e.paint(),(()=>{c(this,null,(function*(){const n=yield(0,r.TC)("mesh/suzanne.glb");if(!n)return;console.log("Suzanne has been loaded!");const t=new r.Ip(e,{depth:r.Eg.less,children:[new r.o5(e,{color:[0,.3,0,1],depth:1}),new r.dR(e,{asset:n})]}),s=new r.TgdPainterFramebufferOld(e,{depthBuffer:!0,viewportMatchingScale:1});s.add(t);const o=new r.Ch;e.add(s,new r.D$(e,{filters:[o],texture:s.texture,flipY:!0}),new r.ZJ((e=>o.hueShiftInDegrees=.1*e))),e.paint(),console.log("========================================"),console.log(e.debugHierarchy())}))})()}function u(e){const n={h1:"h1",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{children:"Test"}),"\n",(0,s.jsx)(i,{})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},3469:(e,n,t)=>{t.d(n,{A:()=>c});var s=t(1601),o=t.n(s),r=t(6314),a=t.n(r)()(o());a.push([e.id,".hgIjhDQIuBCJEQ4ZgLXp {\n    display: inline-block;\n    margin: 1em;\n}\n\n.hgIjhDQIuBCJEQ4ZgLXp canvas {\n    box-shadow: 0 0.25em 0.5em #fff1;\n    max-width: 100vw;\n    max-height: 100vh;\n}\n\n.efOyHCihw9wfMB6AaAqw {\n    position: relative;\n}\n\n.ywC8N0Uxbvm2Ug2DwPkE {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    background-color: var(--theme-color-primary-1);\n    opacity: 0;\n    transition: opacity 0.3s;\n}\n\n.ywC8N0Uxbvm2Ug2DwPkE.PBWSRsbiwEqGpeL0hEfm {\n    opacity: 1;\n}\n",""]),a.locals={Tgd:"hgIjhDQIuBCJEQ4ZgLXp",relative:"efOyHCihw9wfMB6AaAqw",overlay:"ywC8N0Uxbvm2Ug2DwPkE",loading:"PBWSRsbiwEqGpeL0hEfm"};const c=a},4088:(e,n,t)=>{t.d(n,{A:()=>E});var s=t(4848),o=t(6540),r=t(4213),a=t(8766),c=t(5072),i=t.n(c),l=t(7825),u=t.n(l),h=t(7659),d=t.n(h),f=t(5056),p=t.n(f),g=t(540),m=t.n(g),w=t(1113),y=t.n(w),v=t(3469),x={};x.styleTagTransform=y(),x.setAttributes=p(),x.insert=d().bind(null,"head"),x.domAPI=u(),x.insertStyleElement=m(),i()(v.A,x);const b=v.A&&v.A.locals?v.A.locals:void 0;var j=t(1328),k=(e,n,t)=>new Promise(((s,o)=>{var r=e=>{try{c(t.next(e))}catch(e){o(e)}},a=e=>{try{c(t.throw(e))}catch(e){o(e)}},c=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,a);c((t=t.apply(e,n)).next())}));function E({className:e,options:n,onReady:t,width:c="640px",height:i="480px",noBorder:l=!1,assets:u,children:h}){const[d,f]=o.useState(!1),p=o.useRef(null),g=o.useRef(null),[m,w]=o.useState(!0);let y="auto";c.endsWith("px")&&i.endsWith("px")&&(y=`${c.substring(c.length-2)} / ${i.substring(i.length-2)}`);const v=e=>{if(!e)return;if(g.current)return;g.current=e;const s=new r.tf(e,n);p.current=s,w(!0),function(){return k(this,arguments,(function*({glb:e,data:n,image:t}={}){console.log("ðŸš€ [Tgd] glb, data, image = ",e,n,t);const s={glb:{},data:{},image:{}},o=[];return t&&Object.keys(t).forEach((e=>{o.push((()=>k(this,null,(function*(){const n=t[e];console.log("Loading image:",n);const o=yield(0,r.V_)(n);o&&(s.image[e]=o)}))))})),e&&Object.keys(e).forEach((n=>{o.push((()=>k(this,null,(function*(){const t=e[n];console.log("Loading GLB:",t);const o=yield(0,r.TC)(t);o&&(s.glb[n]=o)}))))})),n&&Object.keys(n).forEach((e=>{o.push((()=>k(this,null,(function*(){const t=n[e],o=yield(0,r.vS)(t);o&&(s.data[e]=o)}))))})),yield Promise.all(o.map((e=>e()))),s}))}(u).then((e=>{console.log("Ready!"),t(s,e),s.paint(),w(!1)})).catch((()=>w(!1)))};return o.useEffect((()=>{const e=g.current,n=p.current;if(!e||!n)return;const t=new ResizeObserver((()=>n.paint()));return t.observe(e),e.requestFullscreen||(e.requestFullscreen=e.webkitRequestFullscreen),f(Boolean(e.requestFullscreen)),()=>t.unobserve(e)}),[p.current,g.current]),l?(0,s.jsx)("canvas",{className:e,style:{width:c,height:i,aspectRatio:y,maxWidth:"95%",maxHeight:"95%"},ref:v}):(0,s.jsxs)("div",{className:a.Sxu.classNames.join(e,b.Tgd),children:[(0,s.jsx)(a.sWC,{display:"flex",justifyContent:"flex-end",children:d&&(0,s.jsx)(a.yQN,{variant:"elevated",onClick:()=>{const e=g.current;e&&e.requestFullscreen()},enabled:!m,children:"Fullscreen"})}),(0,s.jsxs)("div",{className:b.relative,children:[(0,s.jsx)("canvas",{style:{width:c,height:i},ref:v}),(0,s.jsx)("div",{className:a.Sxu.classNames.join(b.overlay,m&&b.loading),children:(0,s.jsx)(j.A,{})}),h]})]})}},8453:(e,n,t)=>{t.d(n,{R:()=>r});var s=t(6540);const o=s.createContext({});function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}},7417:(e,n,t)=>{function s(e,n,t,s){return new(t||(t=Promise))((function(o,r){function a(e){try{i(s.next(e))}catch(e){r(e)}}function c(e){try{i(s.throw(e))}catch(e){r(e)}}function i(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,c)}i((s=s.apply(e,n||[])).next())}))}t.d(n,{sH:()=>s}),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError}}]);