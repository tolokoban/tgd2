"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[3421],{4912:(n,t,e)=>{e.r(t),e.d(t,{default:()=>x});var a=e(4848),i=e(8453),s=e(6540),o=e(7781),c=e(9074),r=e(2138),u=e(7289);function d(n){n.camera.transfo.distance=10;const t=new r.TgdPainterMesh(n,{transfo:{position:[-1,-1,0]}});n.add(new r.TgdPainterClear(n,{color:[.4,.2,0,1]}),new r.TgdPainterState(n,{depth:r.webglPresetDepth.lessOrEqual,children:[t,new r.TgdPainterMesh(n,{material:new r.TgdMaterialFlat({color:[.5,.5,.5,1]}),transfo:{position:[0,0,-.1]}})]}));const e={duration:1,easingFunction:r.tgdEasingFunctionInOutCubic,action(n){t.transfo.setPosition(-1,2*n-1,0)}},a={duration:1,easingFunction:r.tgdEasingFunctionInOutCubic,action(n){t.transfo.setPosition(2*n-1,1,0)}},i={duration:1,easingFunction:r.tgdEasingFunctionInOutCubic,action(n){t.transfo.setPosition(1,1-2*n,0)}},s={duration:1,easingFunction:r.tgdEasingFunctionInOutCubic,action(n){t.transfo.setPosition(1-2*n,-1,0)}};n.animSchedule((0,r.tgdAnimChain)([e,a,i,s],{repeat:1/0})),n.animSchedule((0,r.tgdAnimChain)([{duration:.5,action(n){t.transfo.setScale(1-.5*n)}},{duration:.5,action(n){t.transfo.setScale(1-.5*(1-n))}}],{repeat:1/0})),n.paint()}function l(){return(0,a.jsx)(u.A,{onReady:d})}const g={"Detail #1":"    ctx.camera.transfo.distance = 10\n    const cube = new TgdPainterMesh(ctx, { transfo: { position: [-1, -1, 0] } })\n    ctx.add(\n        new TgdPainterClear(ctx, { color: [0.4, 0.2, 0, 1] }),\n        new TgdPainterState(ctx, {\n            depth: webglPresetDepth.lessOrEqual,\n            children: [\n                cube,\n                new TgdPainterMesh(ctx, {\n                    material: new TgdMaterialFlat({\n                        color: [0.5, 0.5, 0.5, 1],\n                    }),\n                    transfo: { position: [0, 0, -0.1] },\n                }),\n            ],\n        })\n    )\n    const anim1: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(-1, t * 2 - 1, 0)\n        },\n    }\n    const anim2: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(t * 2 - 1, 1, 0)\n        },\n    }\n    const anim3: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(+1, 1 - t * 2, 0)\n        },\n    }\n    const anim4: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(1 - t * 2, -1, 0)\n        },\n    }\n    ctx.animSchedule(\n        tgdAnimChain([anim1, anim2, anim3, anim4], {\n            repeat: Infinity,\n        })\n    )\n    ctx.animSchedule(\n        tgdAnimChain(\n            [\n                {\n                    duration: 0.5,\n                    action(t) {\n                        cube.transfo.setScale(1 - t * 0.5)\n                    },\n                },\n                {\n                    duration: 0.5,\n                    action(t) {\n                        cube.transfo.setScale(1 - (1 - t) * 0.5)\n                    },\n                },\n            ],\n            { repeat: Infinity }\n        )\n    )\n    ctx.paint()"},h='import {\n    TgdAnimation,\n    tgdAnimChain,\n    TgdContext,\n    tgdEasingFunctionInOutCubic,\n    TgdMaterialFlat,\n    TgdPainterClear,\n    TgdPainterMesh,\n    TgdPainterState,\n    webglPresetDepth,\n} from "@tolokoban/tgd"\nimport View from "@/components/demo/Tgd"\n\nfunction init(ctx: TgdContext) {\n    ctx.camera.transfo.distance = 10\n    const cube = new TgdPainterMesh(ctx, { transfo: { position: [-1, -1, 0] } })\n    ctx.add(\n        new TgdPainterClear(ctx, { color: [0.4, 0.2, 0, 1] }),\n        new TgdPainterState(ctx, {\n            depth: webglPresetDepth.lessOrEqual,\n            children: [\n                cube,\n                new TgdPainterMesh(ctx, {\n                    material: new TgdMaterialFlat({\n                        color: [0.5, 0.5, 0.5, 1],\n                    }),\n                    transfo: { position: [0, 0, -0.1] },\n                }),\n            ],\n        })\n    )\n    const anim1: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(-1, t * 2 - 1, 0)\n        },\n    }\n    const anim2: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(t * 2 - 1, 1, 0)\n        },\n    }\n    const anim3: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(+1, 1 - t * 2, 0)\n        },\n    }\n    const anim4: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(1 - t * 2, -1, 0)\n        },\n    }\n    ctx.animSchedule(\n        tgdAnimChain([anim1, anim2, anim3, anim4], {\n            repeat: Infinity,\n        })\n    )\n    ctx.animSchedule(\n        tgdAnimChain(\n            [\n                {\n                    duration: 0.5,\n                    action(t) {\n                        cube.transfo.setScale(1 - t * 0.5)\n                    },\n                },\n                {\n                    duration: 0.5,\n                    action(t) {\n                        cube.transfo.setScale(1 - (1 - t) * 0.5)\n                    },\n                },\n            ],\n            { repeat: Infinity }\n        )\n    )\n    ctx.paint()\n}\n\nexport default function Demo() {\n    return <View onReady={init} />\n}\n';function m(){const[n,t]=s.useState(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"half-left",children:(0,a.jsx)(l,{})}),(0,a.jsxs)("div",{className:"half-right",children:[(0,a.jsx)("div",{children:(0,a.jsx)(o.yQN,{variant:"elevated",onClick:()=>t(!n),children:n?"Show code details":"Show full code"})}),(0,a.jsx)(c.A,{language:"tsx",value:n?h:g})]})]})}function f(n){const t={a:"a",p:"p",...(0,i.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["You can chain animations with this utility:\n",(0,a.jsx)(t.a,{href:"docs/classes/tgdAnimChain.html",children:"tgdAnimChain"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"In this example, we start two chains in parallel: one for the translations, one\nfor the scales."}),"\n",(0,a.jsx)(m,{})]})}function x(n={}){const{wrapper:t}={...(0,i.R)(),...n.components};return t?(0,a.jsx)(t,{...n,children:(0,a.jsx)(f,{...n})}):f(n)}},7289:(n,t,e)=>{e.d(t,{A:()=>u});var a=e(4848),i=e(6540),s=e(2138),o=e(7781),c=e(3686);const r={Tgd:"hgIjhDQIuBCJEQ4ZgLXp",relative:"efOyHCihw9wfMB6AaAqw",overlay:"ywC8N0Uxbvm2Ug2DwPkE",loading:"PBWSRsbiwEqGpeL0hEfm",screen:"BErChOLWGtciKhh3IFud",canvas:"fT7FcYouYlPbElIAEXRP",gizmo:"uAPfWt_Dhe7RaRrnmIu0",actions:"Ia9jfUO3OevcIh2fV6R6",enabled:"dZYZScZBbWV2Pm3ftXcG",error:"J6dIEMXVMCzdFWF9UHio"};function u({className:n,options:t,onReady:e,gizmo:u=!1,width:d="640px",height:l="480px",noBorder:g=!1,assets:h,children:m}){const[f,x]=i.useState(null),[b,p]=i.useState(!0),[C,w]=i.useState(!1),j=i.useRef(null),F=i.useRef(null),T=i.useRef(null),v=i.useRef(null),[P,E]=i.useState(!0);let y="auto";d.endsWith("px")&&l.endsWith("px")&&(d.substring(d.length-2),l.substring(l.length-2));const S=n=>{if(!n)return;if(F.current)return;F.current=n;const a=new s.TgdContext(n,t),i=a.gl.getParameter(a.gl.DEPTH_BITS);console.log("Depht buffer bits:",i),j.current=a,E(!0),async function({glb:n,data:t,text:e,image:a}={}){console.log("ðŸš€ [Tgd] glb, data, text, image = ",n,t,e,a);const i={glb:{},data:{},text:{},image:{}},o=[];return a&&Object.keys(a).forEach(n=>{o.push(async()=>{const t=a[n];console.log("Loading image:",t);const e=await(0,s.tgdLoadImage)(t);e&&(i.image[n]=e)})}),n&&Object.keys(n).forEach(t=>{o.push(async()=>{const e=n[t];console.log("Loading GLB:",e);const a=await(0,s.tgdLoadGlb)(e);a&&(i.glb[t]=a)})}),t&&Object.keys(t).forEach(n=>{o.push(async()=>{const e=t[n],a=await(0,s.tgdLoadArrayBuffer)(e);a&&(i.data[n]=a)})}),e&&Object.keys(e).forEach(n=>{o.push(async()=>{const t=e[n],a=await(0,s.tgdLoadText)(t);a&&(i.text[n]=a)})}),await Promise.all(o.map(n=>n())),i}(h).then(n=>{try{e(a,n),a.paint()}catch(n){x(n instanceof Error?n.message:JSON.stringify(n))}E(!1)}).catch(n=>{console.error("Unable to initialize the scene!",n),E(!1)});const o=T.current;o&&o.attachContext(a)},I=n=>{const t=new s.TgdCanvasGizmo({canvas:n});T.current=t,t.eventTipClick.addListener(({to:n})=>{const t=j.current;t&&t.animSchedule({duration:.2,easingFunction:s.tgdEasingFunctionInOutCubic,action:(0,s.tgdActionCreateCameraInterpolation)(t.camera,{orientation:n})})});const e=j.current;e&&t.attachContext(e)};return i.useEffect(()=>{const n=F.current,t=j.current;if(!n||!t)return;const e=new ResizeObserver(()=>t.paint());return e.observe(n),n.requestFullscreen||(n.requestFullscreen=n.webkitRequestFullscreen),w(Boolean(n.requestFullscreen)),()=>e.unobserve(n)},[j.current,F.current]),g?(0,a.jsxs)("div",{ref:v,className:r.screen,style:{width:b?d:l,height:b?l:d},children:[(0,a.jsx)("canvas",{className:r.canvas,ref:S}),u&&(0,a.jsx)("canvas",{className:r.gizmo,ref:I}),f&&(0,a.jsx)("div",{className:r.error,children:f})]}):(0,a.jsxs)("div",{className:o.Sxu.classNames.join(n,r.Tgd),children:[(0,a.jsxs)("div",{className:o.Sxu.classNames.join(r.actions,!P&&r.enabled),children:[(0,a.jsx)("div",{children:(0,a.jsx)(o.I64,{onClick:()=>p(!b)})}),(0,a.jsx)("div",{children:(0,a.jsx)(o.kRc,{onClick:()=>{const n=j.current;n&&n.takeSnapshot().then(n=>{const t=document.createElement("a");document.body.appendChild(t),t.style.display="none",t.href=n.src,t.download="snapshot.png",t.click(),window.setTimeout(()=>document.body.removeChild(t),3e4)})}})}),C&&(0,a.jsx)("div",{children:(0,a.jsx)(o.L9n,{onClick:()=>{const n=v.current;n&&n.requestFullscreen()}})})]}),(0,a.jsxs)("div",{className:r.relative,children:[(0,a.jsxs)("div",{ref:v,className:r.screen,style:{width:b?d:l,height:b?l:d},children:[(0,a.jsx)("canvas",{className:r.canvas,ref:S}),u&&(0,a.jsx)("canvas",{className:r.gizmo,ref:I}),f&&(0,a.jsx)("div",{className:r.error,children:f})]}),(0,a.jsx)("div",{className:o.Sxu.classNames.join(r.overlay,P&&r.loading),children:(0,a.jsx)(c.A,{})}),m]})]})}},8453:(n,t,e)=>{e.d(t,{R:()=>s});var a=e(6540);const i=a.createContext({});function s(n){const t=a.useContext(i);return a.useMemo(function(){return"function"==typeof n?n(t):{...t,...n}},[t,n])}}}]);