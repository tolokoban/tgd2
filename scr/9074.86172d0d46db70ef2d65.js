"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[9074],{9074:(n,e,t)=>{t.r(e),t.d(e,{default:()=>b});var s=t(4848),a=t(8453),o=t(6540),r=t(5968),c=t(2212),i=t(4461),l=t(6989),d=t(5345),h=t(4859);function u(n,e){n.camera.transfo.distance=5;const t=new i.o57(n,{color:[0,0,0,1]}),s=new i.g6h(n),a=new i.Ipk(n,{depth:i.Eg5.less,children:[t,s]});n.add(a,new i.ZJl(((n,e)=>{s.transfo.orbitAroundX(e*Math.sin(n)),s.transfo.orbitAroundZ(1.341*e)}))),n.play()}function g(){return(0,s.jsx)(l.A,{onReady:u,assets:{glb:{mesh:d},image:{background:h}}})}const m={"Detail #1":"    context.camera.transfo.distance = 5\n    const clear = new TgdPainterClear(context, {\n        color: [0, 0, 0, 1],\n    })\n    const mesh = new TgdPainterMesh(context)\n    const meshPainter = new TgdPainterState(context, {\n        depth: webglPresetDepth.less,\n        children: [clear, mesh],\n    })\n    context.add(\n        meshPainter,\n        new TgdPainterLogic((time, delay) => {\n            mesh.transfo.orbitAroundX(delay * Math.sin(time))\n            mesh.transfo.orbitAroundZ(delay * 1.341)\n        })\n    )\n    context.play()"},f='import {\n    TgdCameraPerspective,\n    TgdContext,\n    TgdGeometryBox,\n    TgdMaterialNormals,\n    TgdPainterClear,\n    TgdPainterLogic,\n    TgdPainterMesh,\n    TgdPainterState,\n    webglPresetDepth,\n} from "@tolokoban/tgd"\nimport View, { Assets } from "@/components/demo/Tgd"\n\nimport SuzanneURL from "@/assets/mesh/logo.glb"\nimport BackgroundURL from "@/assets/image/dino.webp"\n\nfunction init(context: TgdContext, assets: Assets) {\n    context.camera.transfo.distance = 5\n    const clear = new TgdPainterClear(context, {\n        color: [0, 0, 0, 1],\n    })\n    const mesh = new TgdPainterMesh(context)\n    const meshPainter = new TgdPainterState(context, {\n        depth: webglPresetDepth.less,\n        children: [clear, mesh],\n    })\n    context.add(\n        meshPainter,\n        new TgdPainterLogic((time, delay) => {\n            mesh.transfo.orbitAroundX(delay * Math.sin(time))\n            mesh.transfo.orbitAroundZ(delay * 1.341)\n        })\n    )\n    context.play()\n}\n\nexport default function Demo() {\n    return (\n        <View\n            onReady={init}\n            assets={{\n                glb: {\n                    mesh: SuzanneURL,\n                },\n                image: {\n                    background: BackgroundURL,\n                },\n            }}\n        />\n    )\n}\n';function p(){const[n,e]=o.useState(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"half-left",children:(0,s.jsx)(g,{})}),(0,s.jsxs)("div",{className:"half-right",children:[(0,s.jsx)("div",{children:(0,s.jsx)(r.yQN,{variant:"elevated",onClick:()=>e(!n),children:n?"Show code details":"Show full code"})}),(0,s.jsx)(c.A,{language:"tsx",value:n?f:m})]})]})}function x(n){const e={a:"a",h1:"h1",hr:"hr",p:"p",...(0,a.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.h1,{children:[(0,s.jsx)(e.a,{href:"docs/classes/TgdPainterFramebuffer.html",children:"TgdPainterFramebuffer"})," - Step by step demo"]}),"\n",(0,s.jsx)(e.p,{children:"Let's start by creating a rotating cube."}),"\n",(0,s.jsx)(p,{}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"#/articles/painter/framebuffer/example0/02",children:"Next step"})})]})}function b(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(x,{...n})}):x(n)}},3469:(n,e,t)=>{t.d(e,{A:()=>c});var s=t(1601),a=t.n(s),o=t(6314),r=t.n(o)()(a());r.push([n.id,".hgIjhDQIuBCJEQ4ZgLXp {\n    display: inline-block;\n    margin: 1em;\n}\n\n.hgIjhDQIuBCJEQ4ZgLXp canvas {\n    box-shadow: 0 0.25em 0.5em #fff1;\n    max-width: 100vw;\n    max-height: 100vh;\n}\n\n.efOyHCihw9wfMB6AaAqw {\n    position: relative;\n}\n\n.ywC8N0Uxbvm2Ug2DwPkE {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    background-color: var(--theme-color-primary-1);\n    opacity: 0;\n    transition: opacity 0.3s;\n}\n\n.ywC8N0Uxbvm2Ug2DwPkE.PBWSRsbiwEqGpeL0hEfm {\n    opacity: 1;\n}\n\n.BErChOLWGtciKhh3IFud {\n    position: relative;    \n}\n\n.BErChOLWGtciKhh3IFud > canvas.fT7FcYouYlPbElIAEXRP {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}\n\n.BErChOLWGtciKhh3IFud > canvas.uAPfWt_Dhe7RaRrnmIu0 {\n    position: absolute;\n    right: 0;\n    top: 0;\n    width: 128px;\n    height: 128px;\n    box-shadow: none;\n    border: none;\n}",""]),r.locals={Tgd:"hgIjhDQIuBCJEQ4ZgLXp",relative:"efOyHCihw9wfMB6AaAqw",overlay:"ywC8N0Uxbvm2Ug2DwPkE",loading:"PBWSRsbiwEqGpeL0hEfm",screen:"BErChOLWGtciKhh3IFud",canvas:"fT7FcYouYlPbElIAEXRP",gizmo:"uAPfWt_Dhe7RaRrnmIu0"};const c=r},6989:(n,e,t)=>{t.d(e,{A:()=>P});var s=t(4848),a=t(6540),o=t(4461),r=t(5968),c=t(5670),i=t(5072),l=t.n(i),d=t(7825),h=t.n(d),u=t(7659),g=t.n(u),m=t(5056),f=t.n(m),p=t(540),x=t.n(p),b=t(1113),w=t.n(b),v=t(3469),y={};y.styleTagTransform=w(),y.setAttributes=f(),y.insert=g().bind(null,"head"),y.domAPI=h(),y.insertStyleElement=x(),l()(v.A,y);const j=v.A&&v.A.locals?v.A.locals:void 0;function P({className:n,options:e,onReady:t,gizmo:i=!1,width:l="640px",height:d="480px",noBorder:h=!1,assets:u,children:g}){const[m,f]=a.useState(!0),[p,x]=a.useState(!1),b=a.useRef(null),w=a.useRef(null),v=a.useRef(null),y=a.useRef(null),[P,C]=a.useState(!0);let T="auto";l.endsWith("px")&&d.endsWith("px")&&(l.substring(l.length-2),d.substring(d.length-2));const A=n=>{if(!n)return;if(w.current)return;w.current=n;const s=new o.tfp(n,e);b.current=s,C(!0),async function({glb:n,data:e,text:t,image:s}={}){console.log("ðŸš€ [Tgd] glb, data, text, image = ",n,e,t,s);const a={glb:{},data:{},text:{},image:{}},r=[];return s&&Object.keys(s).forEach((n=>{r.push((async()=>{const e=s[n];console.log("Loading image:",e);const t=await(0,o.V_9)(e);t&&(a.image[n]=t)}))})),n&&Object.keys(n).forEach((e=>{r.push((async()=>{const t=n[e];console.log("Loading GLB:",t);const s=await(0,o.TCe)(t);s&&(a.glb[e]=s)}))})),e&&Object.keys(e).forEach((n=>{r.push((async()=>{const t=e[n],s=await(0,o.vSU)(t);s&&(a.data[n]=s)}))})),t&&Object.keys(t).forEach((n=>{r.push((async()=>{const e=t[n],s=await(0,o.jWq)(e);s&&(a.text[n]=s)}))})),await Promise.all(r.map((n=>n()))),a}(u).then((n=>{console.log("Ready!"),t(s,n),s.paint(),C(!1)})).catch((n=>{console.error("Unable to initialize the scene!",n),C(!1)}));const a=v.current;a&&a.attachContext(s)},k=n=>{const e=new o.GbF({canvas:n});v.current=e,e.eventTipClick.addListener((({to:n})=>{const e=b.current;console.log("ðŸš€ [tgd] to, context =",n,e),e&&e.animSchedule({duration:.2,easingFunction:o.Wcc,action:(0,o.vRM)(e.camera,{orientation:n})})}));const t=b.current;t&&e.attachContext(t)};return a.useEffect((()=>{const n=w.current,e=b.current;if(!n||!e)return;const t=new ResizeObserver((()=>e.paint()));return t.observe(n),n.requestFullscreen||(n.requestFullscreen=n.webkitRequestFullscreen),x(Boolean(n.requestFullscreen)),()=>t.unobserve(n)}),[b.current,w.current]),h?(0,s.jsxs)("div",{ref:y,className:j.screen,style:{width:m?l:d,height:m?d:l},children:[(0,s.jsx)("canvas",{className:j.canvas,ref:A}),i&&(0,s.jsx)("canvas",{className:j.gizmo,ref:k})]}):(0,s.jsxs)("div",{className:r.Sxu.classNames.join(n,j.Tgd),children:[(0,s.jsxs)(r.sWC,{display:"flex",justifyContent:"space-between",children:[(0,s.jsx)(r.yQN,{variant:"elevated",onClick:()=>f(!m),enabled:!P,children:m?"Switch to Portrait":"Switch to Landscape"}),p&&(0,s.jsx)(r.yQN,{variant:"elevated",onClick:()=>{const n=y.current;n&&n.requestFullscreen()},enabled:!P,children:"Fullscreen"})]}),(0,s.jsxs)("div",{className:j.relative,children:[(0,s.jsxs)("div",{ref:y,className:j.screen,style:{width:m?l:d,height:m?d:l},children:[(0,s.jsx)("canvas",{className:j.canvas,ref:A}),i&&(0,s.jsx)("canvas",{className:j.gizmo,ref:k})]}),(0,s.jsx)("div",{className:r.Sxu.classNames.join(j.overlay,P&&j.loading),children:(0,s.jsx)(c.A,{})}),g]})]})}},4859:(n,e,t)=>{n.exports=t.p+"img/dino.a892a1760dcaac9618a1.webp"},5345:(n,e,t)=>{n.exports=t.p+"bin/logo.f63fd222e8eb89f79227.glb"},8453:(n,e,t)=>{t.d(e,{R:()=>o});var s=t(6540);const a=s.createContext({});function o(n){const e=s.useContext(a);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}}}]);