"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([["5095"],{5386:function(s,e,n){n.r(e),n.d(e,{default:()=>c});var a=n(4848),l=n(8453);function t(s){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),a.forEach(function(e){var a;a=n[e],e in s?Object.defineProperty(s,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[e]=a})}return s}function r(s){var e=t({a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",span:"span"},(0,l.R)(),s.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h1,{children:"Parsing GLB files"}),"\n",(0,a.jsxs)(e.p,{children:["It is common to edit 3D objects in specialized softwares like\n",(0,a.jsx)(e.a,{href:"https://blender.org",children:"Blender"}),". And to get the most of it, the better is to\nexport your creating in a GLB file. This is the binary version of a\n",(0,a.jsx)(e.a,{href:"https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.htm",children:"GL Transfer Format"}),"."]}),"\n",(0,a.jsx)(e.h2,{children:"Basic usage"}),"\n",(0,a.jsx)(e.p,{children:"Here is how you can load such file in TGD:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-ts",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," asset = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"await"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"tgdLoadGlb"}),"(url)\n"]})}),"\n",(0,a.jsx)(e.p,{children:"Or you can use an ArrayBuffer like this:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-ts",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," resp = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"await"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"fetch"}),"(url)\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," data = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"await"})," resp.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"arrayBuffer"}),"()\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," asset = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdDataGlb"}),"(data)\n"]})}),"\n",(0,a.jsxs)(e.p,{children:["For a quick render of a node, you can use\n",(0,a.jsx)(e.a,{href:"/docs/classes/TgdPainterMeshGltf.html",children:"TgdPainterMeshGltf"}),"."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-ts",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," asset = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"await"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"tgdLoadGlb"}),"(url)\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," painter = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterMeshGltf"}),"(context, {\n    asset,\n})\n"]})}),"\n",(0,a.jsx)(e.p,{children:"This painter will display the primitive #0 of the mesh #0 of the GLB file."}),"\n",(0,a.jsx)(e.p,{children:"Now, if you have a more complex mesh with parents/children relationships and\nmaybe several primitives per mesh, then you can use this function:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-ts",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," data = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"await"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"tgdLoadGlb"}),"(url)\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," node = ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"tgdMakeMeshGlbPainter"}),"({ context, data })\n"]})}),"\n",(0,a.jsx)(e.h2,{children:"Advanced usage"}),"\n",(0,a.jsx)(e.h3,{children:"Creating a Dataset"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-ts",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," asset = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"await"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"tgdLoadGlb"}),"(url)\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," dataset = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdDataset"}),"({\n    ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"POSITION"}),": ",(0,a.jsx)(e.span,{className:"hljs-string",children:'"vec4"'}),",\n    ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"NORMAL"}),": ",(0,a.jsx)(e.span,{className:"hljs-string",children:'"vec3"'}),",\n    ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"TEXCOORD_0"}),": ",(0,a.jsx)(e.span,{className:"hljs-string",children:'"vec2"'}),",\n})\nasset.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"setAttrib"}),"(dataset, ",(0,a.jsx)(e.span,{className:"hljs-string",children:'"POSITION"'}),")\nasset.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"setAttrib"}),"(dataset, ",(0,a.jsx)(e.span,{className:"hljs-string",children:'"NORMAL"'}),")\nasset.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"setAttrib"}),"(dataset, ",(0,a.jsx)(e.span,{className:"hljs-string",children:'"TEXCOORD_0"'}),")\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," elements = asset.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"getMeshPrimitiveIndices"}),"()\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," vao = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdVertexArray"}),"(context.",(0,a.jsx)(e.span,{className:"hljs-property",children:"gl"}),", prg, [dataset], elements)\n"]})}),"\n",(0,a.jsx)(e.h3,{children:"Extracting a texture"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-ts",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," asset = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"await"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"tgbLoadGlb"}),"(url)\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," primitive = asset.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"getMeshPrimitive"}),"(meshIndex, primitiveIndex)\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," material = asset.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"getMaterial"}),"(primitive.",(0,a.jsx)(e.span,{className:"hljs-property",children:"material"}),")\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," pbr = material.",(0,a.jsx)(e.span,{className:"hljs-property",children:"pbrMetallicRoughness"}),"\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," texture = asset.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"createTexture2D"}),"(context, pbr.",(0,a.jsx)(e.span,{className:"hljs-property",children:"baseColorTexture"}),"?.",(0,a.jsx)(e.span,{className:"hljs-property",children:"index"}),")\n"]})}),"\n",(0,a.jsx)(e.p,{children:"Just check if you the variables are all defined (we don't do this in the example\nto not clutter the code)."})]})}function c(){var s,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=t({},(0,l.R)(),n.components).wrapper;return c?(0,a.jsx)(c,(s=t({},n),e=e={children:(0,a.jsx)(r,t({},n))},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):(function(s,e){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);n.push.apply(n,a)}return n})(Object(e)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(e,n))}),s)):r(n)}},8453:function(s,e,n){n.d(e,{R:()=>t});var a=n(6540);let l=a.createContext({});function t(s){let e=a.useContext(l);return a.useMemo(function(){return"function"==typeof s?s(e):{...e,...s}},[e,s])}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyLzUwOTUuZTM4ZTMzMWI2Y2MxZjUzNS5qcyIsInNvdXJjZXMiOlsiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL2dhbWUvdGdkMi9kb2Mvc3JjL2FwcC9hcnRpY2xlcy9nbHRmL3BhZ2UubWR4IiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL2dhbWUvdGdkMi9kb2Mvbm9kZV9tb2R1bGVzL0BtZHgtanMvcmVhY3QvbGliL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIiIsIi8qKlxuICogQGltcG9ydCB7TURYQ29tcG9uZW50c30gZnJvbSAnbWR4L3R5cGVzLmpzJ1xuICogQGltcG9ydCB7Q29tcG9uZW50LCBSZWFjdEVsZW1lbnQsIFJlYWN0Tm9kZX0gZnJvbSAncmVhY3QnXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgTWVyZ2VDb21wb25lbnRzXG4gKiAgIEN1c3RvbSBtZXJnZSBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7UmVhZG9ubHk8TURYQ29tcG9uZW50cz59IGN1cnJlbnRDb21wb25lbnRzXG4gKiAgIEN1cnJlbnQgY29tcG9uZW50cyBmcm9tIHRoZSBjb250ZXh0LlxuICogQHJldHVybnMge01EWENvbXBvbmVudHN9XG4gKiAgIEFkZGl0aW9uYWwgY29tcG9uZW50cy5cbiAqXG4gKiBAdHlwZWRlZiBQcm9wc1xuICogICBDb25maWd1cmF0aW9uIGZvciBgTURYUHJvdmlkZXJgLlxuICogQHByb3BlcnR5IHtSZWFjdE5vZGUgfCBudWxsIHwgdW5kZWZpbmVkfSBbY2hpbGRyZW5dXG4gKiAgIENoaWxkcmVuIChvcHRpb25hbCkuXG4gKiBAcHJvcGVydHkge1JlYWRvbmx5PE1EWENvbXBvbmVudHM+IHwgTWVyZ2VDb21wb25lbnRzIHwgbnVsbCB8IHVuZGVmaW5lZH0gW2NvbXBvbmVudHNdXG4gKiAgIEFkZGl0aW9uYWwgY29tcG9uZW50cyB0byB1c2Ugb3IgYSBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgdGhlbSAob3B0aW9uYWwpLlxuICogQHByb3BlcnR5IHtib29sZWFuIHwgbnVsbCB8IHVuZGVmaW5lZH0gW2Rpc2FibGVQYXJlbnRDb250ZXh0PWZhbHNlXVxuICogICBUdXJuIG9mZiBvdXRlciBjb21wb25lbnQgY29udGV4dCAoZGVmYXVsdDogYGZhbHNlYCkuXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuXG4vKiogQHR5cGUge1JlYWRvbmx5PE1EWENvbXBvbmVudHM+fSAqL1xuY29uc3QgZW1wdHlDb21wb25lbnRzID0ge31cblxuY29uc3QgTURYQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoZW1wdHlDb21wb25lbnRzKVxuXG4vKipcbiAqIEdldCBjdXJyZW50IGNvbXBvbmVudHMgZnJvbSB0aGUgTURYIENvbnRleHQuXG4gKlxuICogQHBhcmFtIHtSZWFkb25seTxNRFhDb21wb25lbnRzPiB8IE1lcmdlQ29tcG9uZW50cyB8IG51bGwgfCB1bmRlZmluZWR9IFtjb21wb25lbnRzXVxuICogICBBZGRpdGlvbmFsIGNvbXBvbmVudHMgdG8gdXNlIG9yIGEgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIHRoZW0gKG9wdGlvbmFsKS5cbiAqIEByZXR1cm5zIHtNRFhDb21wb25lbnRzfVxuICogICBDdXJyZW50IGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VNRFhDb21wb25lbnRzKGNvbXBvbmVudHMpIHtcbiAgY29uc3QgY29udGV4dENvbXBvbmVudHMgPSBSZWFjdC51c2VDb250ZXh0KE1EWENvbnRleHQpXG5cbiAgLy8gTWVtb2l6ZSB0byBhdm9pZCB1bm5lY2Vzc2FyeSB0b3AtbGV2ZWwgY29udGV4dCBjaGFuZ2VzXG4gIHJldHVybiBSZWFjdC51c2VNZW1vKFxuICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIEN1c3RvbSBtZXJnZSB2aWEgYSBmdW5jdGlvbiBwcm9wXG4gICAgICBpZiAodHlwZW9mIGNvbXBvbmVudHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudHMoY29udGV4dENvbXBvbmVudHMpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7Li4uY29udGV4dENvbXBvbmVudHMsIC4uLmNvbXBvbmVudHN9XG4gICAgfSxcbiAgICBbY29udGV4dENvbXBvbmVudHMsIGNvbXBvbmVudHNdXG4gIClcbn1cblxuLyoqXG4gKiBQcm92aWRlciBmb3IgTURYIGNvbnRleHQuXG4gKlxuICogQHBhcmFtIHtSZWFkb25seTxQcm9wcz59IHByb3BlcnRpZXNcbiAqICAgUHJvcGVydGllcy5cbiAqIEByZXR1cm5zIHtSZWFjdEVsZW1lbnR9XG4gKiAgIEVsZW1lbnQuXG4gKiBAc2F0aXNmaWVzIHtDb21wb25lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBNRFhQcm92aWRlcihwcm9wZXJ0aWVzKSB7XG4gIC8qKiBAdHlwZSB7UmVhZG9ubHk8TURYQ29tcG9uZW50cz59ICovXG4gIGxldCBhbGxDb21wb25lbnRzXG5cbiAgaWYgKHByb3BlcnRpZXMuZGlzYWJsZVBhcmVudENvbnRleHQpIHtcbiAgICBhbGxDb21wb25lbnRzID1cbiAgICAgIHR5cGVvZiBwcm9wZXJ0aWVzLmNvbXBvbmVudHMgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBwcm9wZXJ0aWVzLmNvbXBvbmVudHMoZW1wdHlDb21wb25lbnRzKVxuICAgICAgICA6IHByb3BlcnRpZXMuY29tcG9uZW50cyB8fCBlbXB0eUNvbXBvbmVudHNcbiAgfSBlbHNlIHtcbiAgICBhbGxDb21wb25lbnRzID0gdXNlTURYQ29tcG9uZW50cyhwcm9wZXJ0aWVzLmNvbXBvbmVudHMpXG4gIH1cblxuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICBNRFhDb250ZXh0LlByb3ZpZGVyLFxuICAgIHt2YWx1ZTogYWxsQ29tcG9uZW50c30sXG4gICAgcHJvcGVydGllcy5jaGlsZHJlblxuICApXG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6InN3QkFBRSxtQixrQ0FFRixpRixvQ0FDQyxTLEdBQTZCLHNJLHlFQUU3QixvQixHQUE2RSxJLGlDQUUzRSxhLGdDQUVILDRDLCtWQU1BLDBDLDJ4QkFRQSw2RCxzREFDQyxvQixHQUEwRCxJLDJsQkFTM0QsNEUsZ0NBRUEsa0osc2hCQVFHLGdCLGlDQUVDLG9CLDY3REFnQkEsc0Isb3dDQVVKLDZHLDBrQkMzQ0EsSUFBTSxFQUFhLGVBQW1CLENBRmQsQ0FBQyxHQVlsQixTQUFTLEVBQWlCLENBQVUsRUFDekMsSUFBTSxFQUFvQixZQUFnQixDQUFDLEdBRzNDLE9BQU8sU0FBYSxDQUNsQixpQkFFRSxBQUFJLEFBQXNCLFlBQXRCLE9BQU8sRUFDRixFQUFXLEdBR2IsQ0FBQyxHQUFHLENBQWlCLENBQUUsR0FBRyxDQUFVLENBQzdDLEVBQ0EsQ0FBQyxFQUFtQixFQUFXLENBRW5DLEMifQ==