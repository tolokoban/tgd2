"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[167],{1167:(e,n,t)=>{t.r(n),t.d(n,{default:()=>h});var s=t(4848),o=t(8453),a=t(3078),r=t(4088),i=(e,n,t)=>new Promise(((s,o)=>{var a=e=>{try{i(t.next(e))}catch(e){o(e)}},r=e=>{try{i(t.throw(e))}catch(e){o(e)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,r);i((t=t.apply(e,n)).next())}));function c(){return(0,s.jsx)(r.A,{onReady:l})}function l(e){document.addEventListener("keydown",(n=>{switch(console.log("ðŸš€ [index] evt.key = ",n.key),n.key){case"0":e.camera.face("+X+Y+Z");break;case".":e.camera.zoom=1}e.paint()}));const n=new a.xN({distance:3,far:100,near:.1,fovy:Math.PI/4,zoom:1});e.camera=n,n.face("+X+Y+Z"),new a.pw(e,{inertiaOrbit:900}),e.paint(),(()=>{i(this,null,(function*(){const n=yield(0,a.TC)("mesh/suzanne.glb");if(!n)return;console.log("Suzanne has been loaded!");const t=new a.Ip(e,{depth:a.Eg.less,children:[new a.o5(e,{color:[0,.3,0,1],depth:1}),new a.dR(e,{asset:n})]}),s=new a.dN(e,{depthBuffer:!0,viewportMatchingScale:1});s.add(t);const o=new a.Ch;e.add(s,new a.D$(e,{filters:[o],texture:s.texture,flipY:!0}),new a.ZJ((e=>o.hueShiftInDegrees=.1*e))),e.paint(),console.log("========================================"),console.log(e.debugHierarchy())}))})()}function u(e){const n={h1:"h1",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{children:"Test"}),"\n",(0,s.jsx)(c,{})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},3469:(e,n,t)=>{t.d(n,{A:()=>i});var s=t(1601),o=t.n(s),a=t(6314),r=t.n(a)()(o());r.push([e.id,".hgIjhDQIuBCJEQ4ZgLXp {\n    display: inline-block;\n    margin: 1em;\n}\n\n.hgIjhDQIuBCJEQ4ZgLXp canvas {\n    box-shadow: 0 0.25em 0.5em #fff1;\n    max-width: 100vw;\n    max-height: 100vh;\n}\n\n.efOyHCihw9wfMB6AaAqw {\n    position: relative;\n}\n\n.ywC8N0Uxbvm2Ug2DwPkE {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    background-color: var(--theme-color-primary-1);\n    opacity: 0;\n    transition: opacity 0.3s;\n}\n\n.ywC8N0Uxbvm2Ug2DwPkE.PBWSRsbiwEqGpeL0hEfm {\n    opacity: 1;\n}\n",""]),r.locals={Tgd:"hgIjhDQIuBCJEQ4ZgLXp",relative:"efOyHCihw9wfMB6AaAqw",overlay:"ywC8N0Uxbvm2Ug2DwPkE",loading:"PBWSRsbiwEqGpeL0hEfm"};const i=r},4088:(e,n,t)=>{t.d(n,{A:()=>C});var s=t(4848),o=t(6540),a=t(3078),r=t(8766),i=t(5072),c=t.n(i),l=t(7825),u=t.n(l),h=t(7659),d=t.n(h),f=t(5056),g=t.n(f),p=t(540),m=t.n(p),w=t(1113),v=t.n(w),y=t(3469),x={};x.styleTagTransform=v(),x.setAttributes=g(),x.insert=d().bind(null,"head"),x.domAPI=u(),x.insertStyleElement=m(),c()(y.A,x);const b=y.A&&y.A.locals?y.A.locals:void 0;var j=t(1328),k=(e,n,t)=>new Promise(((s,o)=>{var a=e=>{try{i(t.next(e))}catch(e){o(e)}},r=e=>{try{i(t.throw(e))}catch(e){o(e)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,r);i((t=t.apply(e,n)).next())}));function C({className:e,options:n,onReady:t,width:i="640px",height:c="480px",noBorder:l=!1,assets:u}){const[h,d]=o.useState(!1),f=o.useRef(null),g=o.useRef(null),[p,m]=o.useState(!0);let w="auto";i.endsWith("px")&&c.endsWith("px")&&(w=`${i.substring(i.length-2)} / ${c.substring(c.length-2)}`);const v=e=>{if(!e)return;if(g.current)return;g.current=e;const s=new a.tf(e,n);f.current=s,m(!0),function(){return k(this,arguments,(function*({glb:e,data:n,image:t}={}){console.log("ðŸš€ [Tgd] glb, data, image = ",e,n,t);const s={glb:{},data:{},image:{}},o=[];return t&&Object.keys(t).forEach((e=>{o.push((()=>k(this,null,(function*(){const n=t[e];console.log("Loading image:",n);const o=yield(0,a.V_)(n);o&&(s.image[e]=o)}))))})),e&&Object.keys(e).forEach((n=>{o.push((()=>k(this,null,(function*(){const t=e[n];console.log("Loading GLB:",t);const o=yield(0,a.TC)(t);o&&(s.glb[n]=o)}))))})),n&&Object.keys(n).forEach((e=>{o.push((()=>k(this,null,(function*(){const t=n[e],o=yield(0,a.vS)(t);o&&(s.data[e]=o)}))))})),yield Promise.all(o.map((e=>e()))),s}))}(u).then((e=>{t(s,e),s.paint(),m(!1)})).catch((()=>m(!1)))};return o.useEffect((()=>{const e=g.current,n=f.current;if(!e||!n)return;const t=new ResizeObserver((()=>n.paint()));return t.observe(e),e.requestFullscreen||(e.requestFullscreen=e.webkitRequestFullscreen),d(Boolean(e.requestFullscreen)),()=>t.unobserve(e)}),[f.current,g.current]),l?(0,s.jsx)("canvas",{className:e,style:{width:i,height:c,aspectRatio:w,maxWidth:"95%",maxHeight:"95%"},ref:v}):(0,s.jsxs)("div",{className:r.Sxu.classNames.join(e,b.Tgd),children:[(0,s.jsx)(r.sWC,{display:"flex",justifyContent:"flex-end",children:h&&(0,s.jsx)(r.yQN,{variant:"elevated",onClick:()=>{const e=g.current;e&&e.requestFullscreen()},enabled:!p,children:"Show fullscreen"})}),(0,s.jsxs)("div",{className:b.relative,children:[(0,s.jsx)("canvas",{style:{width:i,height:c},ref:v}),(0,s.jsx)("div",{className:r.Sxu.classNames.join(b.overlay,p&&b.loading),children:(0,s.jsx)(j.A,{})})]})]})}},8453:(e,n,t)=>{t.d(n,{R:()=>a});var s=t(6540);const o=s.createContext({});function a(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}}}]);