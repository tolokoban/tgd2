"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[6346],{3529:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".TivnAbABYZdpWW9GZs6n {\n    position: relative;\n}\n",""]),o.locals={action:"TivnAbABYZdpWW9GZs6n"};const r=o},8920:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".C9I4sL1N2ssiuRkPggbA {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}\n\ndiv.C9I4sL1N2ssiuRkPggbA > header {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    display: flex;\n    flex-wrap: nowrap;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    gap: 1em;\n}\n\n.v6mssTjMLNc8Ogj4uBSq {\n    padding: 0.5em 1em;\n    border-radius: 0 0 0.5em 0;\n    color: #fff;\n    background-color: #0008;\n}\n\n.lHntNRydftoMSCTh5gwv {\n    padding: 0.5em 1em;\n    border-radius: 0 0 0 0.5em;\n    color: #fff;\n    background-color: #0008;\n}\n",""]),o.locals={actionImage:"C9I4sL1N2ssiuRkPggbA",dimensions:"v6mssTjMLNc8Ogj4uBSq",link:"lHntNRydftoMSCTh5gwv"};const r=o},778:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".FHDDVaFyhGXfoGBta3yQ {\n}\n",""]),o.locals={actionNode:"FHDDVaFyhGXfoGBta3yQ"};const r=o},3829:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".H9dDNSbXjsX6jN3Bf3xh {\n}\n",""]),o.locals={actionNodeCamera:"H9dDNSbXjsX6jN3Bf3xh"};const r=o},4457:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".p9Kbtkuegy0iOh66GNDX {\n}\n",""]),o.locals={actionNodeMesh:"p9Kbtkuegy0iOh66GNDX"};const r=o},6163:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".WlQP8S7OoKQ5p9KJGWab {\n    width: 100%;\n    height: 100%;\n}\n\n.WlQP8S7OoKQ5p9KJGWab > * {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}\n",""]),o.locals={actionNodeRender:"WlQP8S7OoKQ5p9KJGWab"};const r=o},6181:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".YXMiTxYNCxTJZifDB0En {\n}\n",""]),o.locals={actionNodeTransfo:"YXMiTxYNCxTJZifDB0En"};const r=o},2140:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".IUOTuyuq_tmmW8h_lBpp {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}\n",""]),o.locals={actionScene:"IUOTuyuq_tmmW8h_lBpp"};const r=o},8424:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".EOCnuXPaVAQQjOaVzDWk > pre {\n    white-space: pre-wrap;\n}\n",""]),o.locals={verbatin:"EOCnuXPaVAQQjOaVzDWk"};const r=o},5639:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".V3aob0pLE9HcHxN5iVyj > summary {\n    display: flex;\n    flex-wrap: nowrap;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n    gap: 0.5em;\n    cursor: pointer;\n}\n\n.V3aob0pLE9HcHxN5iVyj > div {\n    margin-left: 0.5em;\n    padding-left: 0.5em;\n    border-left: 1px solid color-mix(in srgb, currentColor, transparent);\n}\n\n.PbWyyuXizmAAIbcs5urg {\n    opacity: 0.5;\n}\n",""]),o.locals={expander:"V3aob0pLE9HcHxN5iVyj",handle:"PbWyyuXizmAAIbcs5urg"};const r=o},2799:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".XPMLtzXBRVSrxv_Xe50A {\n    line-height: 1.5;\n}\n",""]),o.locals={gltfTree:"XPMLtzXBRVSrxv_Xe50A"};const r=o},2385:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".o4_1rbAB9XmGcjjHG22H {\n}\n",""]),o.locals={images:"o4_1rbAB9XmGcjjHG22H"};const r=o},1515:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".G3CJ6oAzpvDypk53NREK {\n}\n",""]),o.locals={lights:"G3CJ6oAzpvDypk53NREK"};const r=o},3597:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".NDcVYWtiNdLrATykGHx3 {\n}\n",""]),o.locals={node:"NDcVYWtiNdLrATykGHx3"};const r=o},4078:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".jgtK2RMH89K4DKGqzXgk {\n}\n",""]),o.locals={viewgltf:"jgtK2RMH89K4DKGqzXgk"};const r=o},607:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".H0UnrqUJgmcVuhNY9Flo {\n    white-space: pre-wrap;\n    font-family: monospace;\n    background-color: #a00;\n    color: #fff;\n    padding: 1em;\n    margin: 1em;\n    box-shadow: 0 0.125em 0.25em #000;\n}\n",""]),o.locals={Error:"H0UnrqUJgmcVuhNY9Flo"};const r=o},3469:(n,e,t)=>{t.d(e,{A:()=>r});var s=t(1601),a=t.n(s),i=t(6314),o=t.n(i)()(a());o.push([n.id,".hgIjhDQIuBCJEQ4ZgLXp {\n    display: inline-block;\n    margin: 1em;\n}\n\n.hgIjhDQIuBCJEQ4ZgLXp canvas {\n    box-shadow: 0 0.25em 0.5em #fff1;\n    max-width: 100vw;\n    max-height: 100vh;\n}\n\n.efOyHCihw9wfMB6AaAqw {\n    position: relative;\n}\n\n.ywC8N0Uxbvm2Ug2DwPkE {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    background-color: var(--theme-color-primary-1);\n    opacity: 0;\n    transition: opacity 0.3s;\n}\n\n.ywC8N0Uxbvm2Ug2DwPkE.PBWSRsbiwEqGpeL0hEfm {\n    opacity: 1;\n}\n\n.BErChOLWGtciKhh3IFud {\n    position: relative;    \n}\n\n.BErChOLWGtciKhh3IFud > canvas.fT7FcYouYlPbElIAEXRP {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}\n\n.BErChOLWGtciKhh3IFud > canvas.uAPfWt_Dhe7RaRrnmIu0 {\n    position: absolute;\n    right: 0;\n    top: 0;\n    width: 128px;\n    height: 128px;\n    box-shadow: none;\n    border: none;\n}",""]),o.locals={Tgd:"hgIjhDQIuBCJEQ4ZgLXp",relative:"efOyHCihw9wfMB6AaAqw",overlay:"ywC8N0Uxbvm2Ug2DwPkE",loading:"PBWSRsbiwEqGpeL0hEfm",screen:"BErChOLWGtciKhh3IFud",canvas:"fT7FcYouYlPbElIAEXRP",gizmo:"uAPfWt_Dhe7RaRrnmIu0"};const r=o},2482:(n,e,t)=>{t.r(e),t.d(e,{default:()=>le});var s=t(4848),a=t(6540),i=t(5968),o=t(5072),r=t.n(o),l=t(7825),c=t.n(l),d=t(7659),u=t.n(d),h=t(5056),m=t.n(h),x=t(540),f=t.n(x),p=t(1113),g=t.n(p),j=t(5639),A={};A.styleTagTransform=g(),A.setAttributes=m(),A.insert=u().bind(null,"head"),A.domAPI=c(),A.insertStyleElement=f(),r()(j.A,A);const b=j.A&&j.A.locals?j.A.locals:void 0,v=i.Sxu.classNames;function y(n){const[e,t]=a.useState(!1),o={...(0,i.$qi)(n),...n.style},r=n.icon;return(0,s.jsxs)("details",{className:v.join(n.className,b.expander),style:o,onToggle:s=>{s.preventDefault(),s.stopPropagation(),t(!e),n.onClick?.()},onClick:n.children?void 0:e=>{e.preventDefault(),e.stopPropagation(),n.onClick?.()},name:n.name,children:[(0,s.jsxs)("summary",{children:[(0,s.jsx)("div",{className:b.handle,children:n.children?e?(0,s.jsx)(i.vpi,{size:"1em"}):(0,s.jsx)(i.DF0,{size:"1em"}):(0,s.jsx)(i.Sg,{size:"1em"})}),r&&(0,s.jsx)(r,{color:"primary-7"}),(0,s.jsx)("span",{children:n.title})]}),(0,s.jsx)("div",{children:n.children})]})}var N=t(2799),w={};w.styleTagTransform=g(),w.setAttributes=m(),w.insert=u().bind(null,"head"),w.domAPI=c(),w.insertStyleElement=f(),r()(N.A,w);const S=N.A&&N.A.locals?N.A.locals:void 0;var T=t(2197);function k(n){return(0,T.Xj)(n,{camera:"number"})}var C=t(3597),E={};E.styleTagTransform=g(),E.setAttributes=m(),E.insert=u().bind(null,"head"),E.domAPI=c(),E.insertStyleElement=f(),r()(C.A,E);const I=C.A&&C.A.locals?C.A.locals:void 0,P=i.Sxu.classNames;function M(n){const e={...(0,i.$qi)(n)},t=n.data.gltf.nodes?.[n.index];if(!t)return null;const a=t.name??`#${n.index}`,o=function(n){return k(n)?i.PEB:(e=n,(0,T.Xj)(e,{mesh:"number"})?i.Td5:function(n){return(0,T.Xj)(n,{extensions:{KHR_lights_punctual:{light:"number"}}})}(n)?i.H3I:Array.isArray(n.children)?i.MRx:i.dlJ);var e}(t);return(0,s.jsx)(y,{className:P.join(n.className,I.node),name:n.name,style:e,title:a,onClick:()=>{n.onAction?.({type:"node",index:n.index})},icon:o,children:Array.isArray(t.children)&&t.children.map((e=>(0,s.jsx)(M,{data:n.data,index:e,onAction:n.onAction},`#${e}`)))})}function B(n){const{nodes:e}=n.data.gltf;return e?(0,s.jsx)(y,{title:"Nodes",icon:i.MRx,children:e.map(((e,t)=>(0,s.jsx)(M,{data:n.data,index:t,onAction:n.onAction},`#${t}`)))}):(0,s.jsx)("p",{children:"No nodes."})}i.Sxu.classNames;var O=t(2385),W={};W.styleTagTransform=g(),W.setAttributes=m(),W.insert=u().bind(null,"head"),W.domAPI=c(),W.insertStyleElement=f(),r()(O.A,W);const R=O.A&&O.A.locals?O.A.locals:void 0,X=i.Sxu.classNames;function G({className:n,data:e,onAction:t}){return(0,s.jsx)(y,{className:X.join(n,R.images),icon:i.dwH,title:"Images",children:(e.gltf.images??[]).map(((n,e)=>(0,s.jsx)(y,{title:n.name??`#${e}`,onClick:()=>t?.({type:"image",index:e}),children:(0,s.jsxs)("ul",{children:[n.name&&(0,s.jsxs)("li",{children:["Name: ",(0,s.jsx)("b",{children:n.name})]}),n.mimeType&&(0,s.jsxs)("li",{children:["Mime type: ",(0,s.jsx)("b",{children:n.mimeType})]}),n.bufferView&&(0,s.jsxs)("li",{children:["Buffer view: ",(0,s.jsx)("b",{children:n.bufferView})]}),n.uri&&(0,s.jsxs)("li",{children:["URI: ",(0,s.jsx)("b",{children:n.uri})]})]})},e)))})}var z=t(1515),D={};D.styleTagTransform=g(),D.setAttributes=m(),D.insert=u().bind(null,"head"),D.domAPI=c(),D.insertStyleElement=f(),r()(z.A,D);const L=z.A&&z.A.locals?z.A.locals:void 0,F=i.Sxu.classNames;function H({className:n,data:e,onAction:t}){return(0,s.jsx)(y,{className:F.join(n,L.images),title:"Lights",icon:i.H3I})}function $({data:n,scene:e,title:t,index:a,onAction:o}){return(0,s.jsx)(y,{title:t,icon:i.GtP,onClick:()=>{o?.({index:a,type:"scene"})},children:(e.nodes??[]).map(((e,t)=>(0,s.jsx)(M,{data:n,index:t,onAction:o},`node#${t}`)))})}function q(n){const{scenes:e}=n.data.gltf;return e?(0,s.jsx)(y,{title:"Scenes",icon:i.GtP,children:e.map(((e,t)=>(0,s.jsx)($,{data:n.data,scene:e,title:e.name??`Scene #${t}`,index:t,onAction:n.onAction},`Scene#${t}`)))}):(0,s.jsx)("p",{children:"No scenes."})}i.Sxu.classNames,i.Sxu.classNames;const V=i.Sxu.classNames;function J(n){const e={...(0,i.$qi)(n)};return(0,s.jsxs)("div",{className:V.join(n.className,S.gltfTree),style:e,children:[(0,s.jsxs)(y,{title:"GLTF",name:"root",children:[(0,s.jsx)(i.yQN,{variant:"text",color:"secondary-5",fullwidth:!0,onClick:(t={type:"verbatim"},()=>n.onAction(t)),children:"Show verbatim content"}),(0,s.jsx)(q,{data:n.data,onAction:n.onAction}),(0,s.jsx)(B,{data:n.data,onAction:n.onAction}),(0,s.jsx)(G,{data:n.data,onAction:n.onAction}),(0,s.jsx)(H,{data:n.data,onAction:n.onAction})]}),(0,s.jsx)(y,{title:"Chunks",name:"root",children:(0,s.jsxs)(i.sWC,{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",fullwidth:!0,gap:"S",children:[(0,s.jsx)("b",{children:"Index"}),(0,s.jsx)("b",{children:"Type"}),(0,s.jsx)("b",{children:"Size (bytes)"}),n.data.getChunkDetails().map((({type:n,size:e},t)=>{return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:["#",t]},`Index#${t}`),(0,s.jsx)("div",{children:n},`Type#${t}`),(0,s.jsx)("div",{children:(a=e,(new Intl.NumberFormat).format(a))},`Size#${t}`)]});var a}))]})}),(0,s.jsx)("hr",{}),(0,s.jsx)("a",{href:"https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html",children:"GLTF 2.0 Specification"})]});var t}var K=t(4461);const Q=t.p+"bin/danatia.b03f55aeadf7e337f613.glb";var U=t(3529),_={};_.styleTagTransform=g(),_.setAttributes=m(),_.insert=u().bind(null,"head"),_.domAPI=c(),_.insertStyleElement=f(),r()(U.A,_);const Z=U.A&&U.A.locals?U.A.locals:void 0;var Y=t(8424),nn={};nn.styleTagTransform=g(),nn.setAttributes=m(),nn.insert=u().bind(null,"head"),nn.domAPI=c(),nn.insertStyleElement=f(),r()(Y.A,nn);const en=Y.A&&Y.A.locals?Y.A.locals:void 0,tn=i.Sxu.classNames;function sn(n){return(0,s.jsxs)(i.sWC,{className:tn.join(n.className,en.verbatin),overflow:"auto",fullsize:!0,color:"neutral-1",padding:"S",children:[(0,s.jsx)(i.yQN,{onClick:()=>console.log(n.data.gltf),children:"Write to console"}),(0,s.jsx)("pre",{children:JSON.stringify(n.data.gltf,null,"  ")})]})}var an=t(2212),on=t(6181),rn={};rn.styleTagTransform=g(),rn.setAttributes=m(),rn.insert=u().bind(null,"head"),rn.domAPI=c(),rn.insertStyleElement=f(),r()(on.A,rn);const ln=on.A&&on.A.locals?on.A.locals:void 0,cn=i.Sxu.classNames;function dn(n){const e={...(0,i.$qi)(n)},t=["const transfo = new TgdTransfo({"];var a;return un(n.node.translation)&&t.push(`  position: [${n.node.translation.join(", ")}],`),a=n.node.rotation,(0,T.Xj)(a,["array","number",{min:4,max:4}])&&t.push(`  orientation: [${n.node.rotation.join(", ")}],`),un(n.node.scale)&&t.push(`  position: [${n.node.scale.join(", ")}],`),t.push("})"),(0,s.jsx)("div",{className:cn.join(n.className,ln.actionNodeTransfo),style:e,children:(0,s.jsx)(an.A,{language:"ts",value:t.join("\n")})})}function un(n){return(0,T.Xj)(n,["array","number",{min:3,max:3}])}var hn=t(607),mn={};mn.styleTagTransform=g(),mn.setAttributes=m(),mn.insert=u().bind(null,"head"),mn.domAPI=c(),mn.insertStyleElement=f(),r()(hn.A,mn);const xn=hn.A&&hn.A.locals?hn.A.locals:void 0,fn=i.Sxu.classNames;function pn({className:n,children:e}){return(0,s.jsx)("div",{className:fn.join(n,xn.Error),children:e})}var gn=t(3829),jn={};jn.styleTagTransform=g(),jn.setAttributes=m(),jn.insert=u().bind(null,"head"),jn.domAPI=c(),jn.insertStyleElement=f(),r()(gn.A,jn);const An=gn.A&&gn.A.locals?gn.A.locals:void 0,bn=i.Sxu.classNames;function vn(n){const e={...(0,i.$qi)(n)},t=n.data.gltf.cameras?.[n.node.camera??-1];if(!t)return(0,s.jsx)(pn,{children:"No camera found!"});const a=function(n,e){const t=[];return(0,K.JAF)(e)&&(t.push("const camera = new TgdCameraPerspective({",`  fovy: ${e.perspective.yfov},  // around ${Math.round((0,K.ZvP)(e.perspective.yfov))}Â°`,`  near: ${(0,T.GB)(e.perspective.znear,.001)}`,`  far: ${e.perspective.zfar??"Infinity"}`,"  transfo: {","    distrance: 0,"),n.translation&&t.push(`    position: [${n.translation.join(", ")}],`),n.rotation&&t.push(`    orientation: [${n.rotation.join(", ")}],`),n.scale&&t.push(`    scale: [${n.scale.join(", ")}],`),t.push("  }","})")),t.join("\n")}(n.node,t);return(0,s.jsx)("div",{className:bn.join(n.className,An.actionNodeCamera),style:e,children:(0,s.jsx)(an.A,{language:"ts",value:a})})}var yn=t(778),Nn={};Nn.styleTagTransform=g(),Nn.setAttributes=m(),Nn.insert=u().bind(null,"head"),Nn.domAPI=c(),Nn.insertStyleElement=f(),r()(yn.A,Nn);const wn=yn.A&&yn.A.locals?yn.A.locals:void 0;var Sn=t(6163),Tn={};Tn.styleTagTransform=g(),Tn.setAttributes=m(),Tn.insert=u().bind(null,"head"),Tn.domAPI=c(),Tn.insertStyleElement=f(),r()(Sn.A,Tn);const kn=Sn.A&&Sn.A.locals?Sn.A.locals:void 0;var Cn=t(6989);function En({data:n,node:e}){const t=function(n,e){return a.useCallback((t=>{const s=In(n,e);t.camera.transfo.position=s.center,t.camera.transfo.distance=2*s.radius,t.camera.far=10*s.radius,new K.pwt(t,{inertiaOrbit:1e3,speedZoom:.25*s.radius});const a=new K.o57(t,{color:[.2,.2,.2,1],depth:1}),{painter:i}=(0,K.TB8)({data:n,node:e,context:t});i.debug("nodePainter");const o=new K.Ipk(t,{depth:K.Eg5.lessOrEqual,children:[i]});t.add(a,o),t.paint()}),[n,e])}(n,e);return(0,s.jsx)("div",{className:kn.actionNodeRender,children:(0,s.jsx)(Cn.A,{onReady:t,width:"100%",height:"100%",gizmo:!0,noBorder:!0},JSON.stringify(e))})}function In(n,e){const t=[];(0,T.Et)(e.mesh)&&t.push(Mn(function(n,e){const t=n.getMesh(e);if(!t)return[{center:new K.hNi,radius:1}];const s=[];for(const e of t.primitives){const t=n.getAccessorByAttributeName(e,"POSITION");if(Pn(t.min)&&Pn(t.max)){const[n,e,a]=t.min,[i,o,r]=t.max;s.push({center:K.hNi.newFromMix(t.min,t.max),radius:Math.max(Math.abs(i-n),Math.abs(o-e),Math.abs(r-a))})}}return s}(n,e.mesh)));for(const s of e.children??[]){const e=n.getNode(s);t.push(In(n,e))}return function(n,e){const[t,s,a]=n.center,i=new K.oao(t,s,a,1),o={};e.translation&&(o.position=e.translation),e.rotation&&(o.orientation=e.rotation),e.scale&&(o.scale=e.scale);const r=new K.tSS(o);i.applyMatrix(r.matrix);const[l,c,d]=r.scale,u=Math.max(l,c,d);return{center:new K.hNi(i.x,i.y,i.z),radius:n.radius*u}}(Mn(t),e)}function Pn(n){return(0,T.Xj)(n,["array","number",{min:3,max:3}])}function Mn(n){if(0===n.length)return{center:new K.hNi,radius:1};let e=0,t=0,s=0;for(const{center:a}of n){const[n,i,o]=a;e+=n,t+=i,s+=o}const a=n.length;e/=a,t/=a,s/=a;const i=new K.hNi(e,t,s);let o=0;for(const{center:e,radius:t}of n)o=Math.max(o,t+K.hNi.distance(i,new K.hNi(e)));return{center:i,radius:o}}i.Sxu.classNames;var Bn=t(4457),On={};On.styleTagTransform=g(),On.setAttributes=m(),On.insert=u().bind(null,"head"),On.domAPI=c(),On.insertStyleElement=f(),r()(Bn.A,On);const Wn=Bn.A&&Bn.A.locals?Bn.A.locals:void 0,Rn=i.Sxu.classNames;function Xn({className:n,data:e,meshIndex:t}){const a=e.getMesh(t);return a?(0,s.jsx)("div",{className:Rn.join(n,Wn.actionNodeMesh),children:(0,s.jsx)("ul",{children:a.primitives.map(((n,t)=>(0,s.jsxs)("li",{children:[(0,s.jsxs)("b",{children:["Primitive ",t]}),(0,s.jsx)(y,{title:"Attributes",children:Object.keys(n.attributes).map((t=>(0,s.jsx)(y,{title:t,children:(0,s.jsx)("pre",{children:JSON.stringify(e.getAccessor(n.attributes[t]),null,"  ")})},t)))}),(n.material??-1)>-1&&(0,s.jsx)(y,{title:(0,s.jsxs)("div",{children:["Material"," ",(0,s.jsx)("b",{children:e.getMaterial(n.material??-1)?.name??"Material"})]}),children:(0,T.Et)(n.material)&&(0,s.jsx)("pre",{children:JSON.stringify(e.getMaterial(n.material),null,"  ")})}),(0,s.jsx)(y,{title:"Verbatim",children:(0,s.jsx)("pre",{children:JSON.stringify(n,null,"  ")})})]},t)))})}):(0,s.jsxs)(pn,{children:["No mesh found with index #",t,"!"]})}const Gn=i.Sxu.classNames;function zn(n){const e={...(0,i.$qi)(n)},t=n.data.gltf.nodes?.[n.index];return t?(0,s.jsxs)(i.UkC,{orientation:"column",template:"-1",className:Gn.join(n.className,wn.actionNode),fullsize:!0,children:[(0,s.jsx)(i.sWC,{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"M",color:"primary-5",padding:"S",children:(0,s.jsxs)("div",{children:["Node #",n.index,":"," ",(0,s.jsx)("b",{children:t.name??(0,s.jsx)("em",{children:"anonymous"})})]})}),(0,s.jsx)(i.sWC,{style:e,children:(0,s.jsxs)(i.WET,{fullsize:!0,children:[(0,s.jsx)(i.Zdo,{label:"3D View",children:!k(t)&&(0,s.jsx)(En,{data:n.data,node:t})},"render"),(0,s.jsx)(i.Zdo,{label:"Camera",children:k(t)&&(0,s.jsx)(vn,{data:n.data,node:t})},"camera"),(0,s.jsx)(i.Zdo,{label:"Transformation",children:(0,s.jsx)(dn,{node:t})},"transfo"),(0,s.jsx)(i.Zdo,{label:"Mesh",children:(0,T.Et)(t.mesh)&&(0,s.jsx)(Xn,{data:n.data,meshIndex:t.mesh})},"mesh"),(0,s.jsx)(i.Zdo,{label:"Verbatim",children:(0,s.jsx)("pre",{children:JSON.stringify(t,null,"  ")})},"verbatim")]})})]}):null}const Dn=t.p+"img/checkboard-light.a7a1229bc8b42ce5b9d3.jpg",Ln=t.p+"img/checkboard-dark.9d3dacc5286db0915472.jpg";var Fn=t(8920),Hn={};Hn.styleTagTransform=g(),Hn.setAttributes=m(),Hn.insert=u().bind(null,"head"),Hn.domAPI=c(),Hn.insertStyleElement=f(),r()(Fn.A,Hn);const $n=Fn.A&&Fn.A.locals?Fn.A.locals:void 0,qn=i.Sxu.classNames;function Vn({data:n,index:e}){const[t,o]=a.useState("light"),[r,l]=a.useState(null),[c,d]=a.useState(null),[u,h]=a.useState(null),m=a.useCallback(((t,s)=>{h(null);const a=new K.o57(t,{color:[0,0,0,0]});t.add(a),t.paint(),n.loadImage(e).then((n=>{if(!n)return void h("Unable to load the image!");l(n),d([n.width,n.height]);const e=new K.HTX(t).loadBitmap(n),s=new K.b6h(t,{mode:"contain",texture:e});t.add(s),t.paint()})).catch((()=>h("Unable to load the image!")))}),[n,e]);return(0,s.jsxs)("div",{className:qn.join($n.actionImage),style:{backgroundImage:`url(${"dark"===t?Ln:Dn})`},children:[u?(0,s.jsx)(pn,{children:u}):(0,s.jsx)(Cn.A,{options:{alpha:!0},onReady:m,noBorder:!0,width:"100%",height:"100%"},JSON.stringify(n.gltf.images?.[e])),(0,s.jsxs)("header",{children:[(0,s.jsx)("div",{className:$n.dimensions,children:c&&c.join(" Ã— ")}),(0,s.jsxs)(i.si8,{value:t,onChange:o,children:[(0,s.jsx)("div",{children:"Light"},"light"),(0,s.jsx)("div",{children:"Dark"},"dark")]}),(0,s.jsx)("div",{className:$n.link,children:r&&(0,s.jsx)("a",{href:r.src,target:"_blank",children:"Open in new tab"})})]})]})}var Jn=t(2140),Kn={};Kn.styleTagTransform=g(),Kn.setAttributes=m(),Kn.insert=u().bind(null,"head"),Kn.domAPI=c(),Kn.insertStyleElement=f(),r()(Jn.A,Kn);const Qn=Jn.A&&Jn.A.locals?Jn.A.locals:void 0,Un=i.Sxu.classNames;function _n({data:n,index:e}){const t=n.gltf.scenes?.[e],i=function(n,e){return a.useCallback((t=>{if(!e)return void console.error("No Scene!");console.log("ðŸš€ [ActionScene] context =",t);const s=new K.buV({children:(e.nodes??[]).filter((e=>{const t=n.getNode(e);return(0,T.Et)(t.mesh)||Array.isArray(t.children)&&t.children.length>0})).map((e=>(0,K.TB8)({data:n,node:e,context:t}).painter)),name:e.name??"Scene"});s.debug();const a=ne((e.nodes??[]).map((e=>Zn(n,n.getNode(e)))));t.camera.transfo.position=a.center,t.camera.transfo.distance=2*a.radius,t.camera.far=10*a.radius,new K.pwt(t,{inertiaOrbit:1e3,speedZoom:.25*a.radius});const i=new K.o57(t,{color:[.2,.2,.2,1],depth:1}),o=new K.Ipk(t,{depth:K.Eg5.lessOrEqual,children:[s]});t.add(i,o),t.paint()}),[n,e])}(n,t);return t?(0,s.jsx)("div",{className:Un.join(Qn.actionScene),children:(0,s.jsx)(Cn.A,{onReady:i,width:"100%",height:"100%",gizmo:!0,noBorder:!0},JSON.stringify(t))}):(0,s.jsx)("p",{children:"No scene..."})}function Zn(n,e){const t=[];(0,T.Et)(e.mesh)&&t.push(ne(function(n,e){const t=n.getMesh(e);if(!t)return[{center:new K.hNi,radius:1}];const s=[];for(const e of t.primitives){const t=n.getAccessorByAttributeName(e,"POSITION");if(Yn(t.min)&&Yn(t.max)){const[n,e,a]=t.min,[i,o,r]=t.max;s.push({center:K.hNi.newFromMix(t.min,t.max),radius:Math.max(Math.abs(i-n),Math.abs(o-e),Math.abs(r-a))})}}return s}(n,e.mesh)));for(const s of e.children??[]){const e=n.getNode(s);t.push(Zn(n,e))}return function(n,e){const[t,s,a]=n.center,i=new K.oao(t,s,a,1),o={};e.translation&&(o.position=e.translation),e.rotation&&(o.orientation=e.rotation),e.scale&&(o.scale=e.scale);const r=new K.tSS(o);i.applyMatrix(r.matrix);const[l,c,d]=r.scale,u=Math.max(l,c,d);return{center:new K.hNi(i.x,i.y,i.z),radius:n.radius*u}}(ne(t),e)}function Yn(n){return(0,T.Xj)(n,["array","number",{min:3,max:3}])}function ne(n){if(0===n.length)return{center:new K.hNi,radius:1};let e=0,t=0,s=0;for(const{center:a}of n){const[n,i,o]=a;e+=n,t+=i,s+=o}const a=n.length;e/=a,t/=a,s/=a;const i=new K.hNi(e,t,s);let o=0;for(const{center:e,radius:t}of n)o=Math.max(o,t+K.hNi.distance(i,new K.hNi(e)));return{center:i,radius:o}}const ee=i.Sxu.classNames;function te(n){const e={...(0,i.$qi)(n)};switch(n.action.type){case"scene":return(0,s.jsx)(_n,{data:n.data,index:n.action.index});case"verbatim":return(0,s.jsx)(sn,{data:n.data});case"node":return(0,s.jsx)(zn,{data:n.data,index:n.action.index});case"image":return(0,s.jsx)(Vn,{data:n.data,index:n.action.index});default:return(0,s.jsxs)("div",{className:ee.join(n.className,Z.action),style:e,children:["Don't know what to do with this action:"," ",(0,s.jsx)("pre",{children:JSON.stringify(n.action,null,"  ")}),"."]})}}var se=t(4078),ae={};ae.styleTagTransform=g(),ae.setAttributes=m(),ae.insert=u().bind(null,"head"),ae.domAPI=c(),ae.insertStyleElement=f(),r()(se.A,ae);const ie=se.A&&se.A.locals?se.A.locals:void 0,oe=i.Sxu.classNames;function re(n){const[e,t]=a.useState({type:"verbatim"});console.log("ðŸš€ [ViewGltf] action =",e);const[o,r]=function(){const[n,e]=a.useState(null),t=a.useCallback((n=>{(0,K.vSU)(n).then((n=>{if(!n)return;const t=new K.nU$(n);e(t)})).catch(console.error)}),[e]);return a.useEffect((()=>{t(Q)}),[]),[n,t]}();return a.useState(null),(0,s.jsxs)(i.UkC,{className:oe.join(n.className,ie.viewgltf),template:"*1",orientation:"row",fullsize:!0,gap:"8px",children:[(0,s.jsxs)(i.UkC,{template:"*1",orientation:"column",children:[(0,s.jsxs)(i.sWC,{color:"primary-5",display:"flex",justifyContent:"space-between",alignItems:"center",padding:["S","M"],minWidth:"300px",gap:"M",children:[(0,s.jsx)("div",{children:"GLB Viewer"}),o&&(0,s.jsxs)("em",{children:[Math.floor(o.fileSize/1024)," Kb"]}),(0,s.jsx)(i.e3B,{accept:"glb",onLoad:function(n){const[e]=n;e&&r(e)},children:(0,s.jsx)(i.Thu,{})})]}),(0,s.jsxs)(i.sWC,{overflow:"auto",minHeight:"auto",color:"neutral-5",padding:"S",children:[!o&&(0,s.jsx)("div",{children:"Loading..."}),o&&(0,s.jsx)(J,{data:o,onAction:t})]})]}),o&&(0,s.jsx)(i.sWC,{position:"relative",overflow:"auto",fullsize:!0,children:(0,s.jsx)(te,{action:e,data:o})})]})}function le(){return(0,s.jsx)(re,{})}},6989:(n,e,t)=>{t.d(e,{A:()=>N});var s=t(4848),a=t(6540),i=t(4461),o=t(5968),r=t(5670),l=t(5072),c=t.n(l),d=t(7825),u=t.n(d),h=t(7659),m=t.n(h),x=t(5056),f=t.n(x),p=t(540),g=t.n(p),j=t(1113),A=t.n(j),b=t(3469),v={};v.styleTagTransform=A(),v.setAttributes=f(),v.insert=m().bind(null,"head"),v.domAPI=u(),v.insertStyleElement=g(),c()(b.A,v);const y=b.A&&b.A.locals?b.A.locals:void 0;function N({className:n,options:e,onReady:t,gizmo:l=!1,width:c="640px",height:d="480px",noBorder:u=!1,assets:h,children:m}){const[x,f]=a.useState(!0),[p,g]=a.useState(!1),j=a.useRef(null),A=a.useRef(null),b=a.useRef(null),v=a.useRef(null),[N,w]=a.useState(!0);let S="auto";c.endsWith("px")&&d.endsWith("px")&&(c.substring(c.length-2),d.substring(d.length-2));const T=n=>{if(!n)return;if(A.current)return;A.current=n;const s=new i.tfp(n,e);j.current=s,w(!0),async function({glb:n,data:e,text:t,image:s}={}){console.log("ðŸš€ [Tgd] glb, data, text, image = ",n,e,t,s);const a={glb:{},data:{},text:{},image:{}},o=[];return s&&Object.keys(s).forEach((n=>{o.push((async()=>{const e=s[n];console.log("Loading image:",e);const t=await(0,i.V_9)(e);t&&(a.image[n]=t)}))})),n&&Object.keys(n).forEach((e=>{o.push((async()=>{const t=n[e];console.log("Loading GLB:",t);const s=await(0,i.TCe)(t);s&&(a.glb[e]=s)}))})),e&&Object.keys(e).forEach((n=>{o.push((async()=>{const t=e[n],s=await(0,i.vSU)(t);s&&(a.data[n]=s)}))})),t&&Object.keys(t).forEach((n=>{o.push((async()=>{const e=t[n],s=await(0,i.jWq)(e);s&&(a.text[n]=s)}))})),await Promise.all(o.map((n=>n()))),a}(h).then((n=>{console.log("Ready!"),t(s,n),s.paint(),w(!1)})).catch((n=>{console.error("Unable to initialize the scene!",n),w(!1)}));const a=b.current;a&&a.attachContext(s)},k=n=>{const e=new i.GbF({canvas:n});b.current=e,e.eventTipClick.addListener((({to:n})=>{const e=j.current;console.log("ðŸš€ [tgd] to, context =",n,e),e&&e.animSchedule({duration:.2,easingFunction:i.Wcc,action:(0,i.vRM)(e.camera,{orientation:n})})}));const t=j.current;t&&e.attachContext(t)};return a.useEffect((()=>{const n=A.current,e=j.current;if(!n||!e)return;const t=new ResizeObserver((()=>e.paint()));return t.observe(n),n.requestFullscreen||(n.requestFullscreen=n.webkitRequestFullscreen),g(Boolean(n.requestFullscreen)),()=>t.unobserve(n)}),[j.current,A.current]),u?(0,s.jsxs)("div",{ref:v,className:y.screen,style:{width:x?c:d,height:x?d:c},children:[(0,s.jsx)("canvas",{className:y.canvas,ref:T}),l&&(0,s.jsx)("canvas",{className:y.gizmo,ref:k})]}):(0,s.jsxs)("div",{className:o.Sxu.classNames.join(n,y.Tgd),children:[(0,s.jsxs)(o.sWC,{display:"flex",justifyContent:"space-between",children:[(0,s.jsx)(o.yQN,{variant:"elevated",onClick:()=>f(!x),enabled:!N,children:x?"Switch to Portrait":"Switch to Landscape"}),p&&(0,s.jsx)(o.yQN,{variant:"elevated",onClick:()=>{const n=v.current;n&&n.requestFullscreen()},enabled:!N,children:"Fullscreen"})]}),(0,s.jsxs)("div",{className:y.relative,children:[(0,s.jsxs)("div",{ref:v,className:y.screen,style:{width:x?c:d,height:x?d:c},children:[(0,s.jsx)("canvas",{className:y.canvas,ref:T}),l&&(0,s.jsx)("canvas",{className:y.gizmo,ref:k})]}),(0,s.jsx)("div",{className:o.Sxu.classNames.join(y.overlay,N&&y.loading),children:(0,s.jsx)(r.A,{})}),m]})]})}}}]);