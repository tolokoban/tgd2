"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([["6426"],{6511(e,t,n){n.r(t),n.d(t,{default:()=>x});var r=n(4848),o=n(8453),i=n(6540),a=n(6671),s=n(385),l=n(2155),c=n(3172),d=n(6252);function h(e,t){e.camera.transfo.distance=6;let n=new l.TgdPainterClear(e,{color:[0,0,0,1],depth:1}),r=new l.TgdTexture2D(e).loadBitmap(t.image.texture),o=new l.TgdPainterMesh(e,{material:new l.TgdMaterialDiffuse({color:r})});o.transfo.setPosition(-.5,0,0);let i=new l.TgdPainterMesh(e,{material:new l.TgdMaterialDiffuse({color:r})});i.transfo.setPosition(.5,0,0);let a=new l.TgdPainterState(e,{depth:l.webglPresetDepth.less,children:[n,o,i]}),s=new l.TgdPainterFramebuffer(e,{children:[a],depthBuffer:!0,textureColor0:new l.TgdTexture2D(e)}),c=new l.TgdFilterChromaticAberration({strength:10}),d=new l.TgdFilterHueRotation,h=new l.TgdPainterFilter(e,{filters:[d,c],texture:s.textureColor0});e.add(s,h,new l.TgdPainterLogic((e,t)=>{o.transfo.orbitAroundX(t*Math.sin(.5*e)),o.transfo.orbitAroundZ(.341*t),i.transfo.orbitAroundX(t*Math.sin(.714*e)),i.transfo.orbitAroundZ(-(.471*t)),c.strength=10*Math.sin(e),d.hueShiftInRadians+=t})),e.play()}function u(){return(0,r.jsx)(c.A,{onReady:h,assets:{image:{texture:d}}})}let f={"Detail #1":"    const clear = new TgdPainterClear(context, {\n        color: [0, 0, 0, 1],\n        depth: 1,\n    })"};function g(){let[e,t]=i.useState(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"half-left",children:(0,r.jsx)(u,{})}),(0,r.jsxs)("div",{className:"half-right",children:[(0,r.jsx)("div",{children:(0,r.jsx)(a.yQN,{variant:"elevated",onClick:()=>t(!e),children:e?"Show code details":"Show full code"})}),(0,r.jsx)(s.A,{language:"tsx",value:e?'import {\n    TgdContext,\n    TgdFilterChromaticAberration,\n    TgdFilterHueRotation,\n    TgdMaterialDiffuse,\n    TgdPainterClear,\n    TgdPainterFilter,\n    TgdPainterFramebuffer,\n    TgdPainterLogic,\n    TgdPainterMesh,\n    TgdPainterState,\n    TgdTexture2D,\n    webglPresetDepth,\n} from "@tolokoban/tgd"\nimport View, { Assets } from "@/components/demo/Tgd"\n\nimport TextureURL from "@/assets/image/whale-1024.webp"\n\nfunction init(context: TgdContext, assets: Assets) {\n    context.camera.transfo.distance = 6\n    const clear = new TgdPainterClear(context, {\n        color: [0, 0, 0, 1],\n        depth: 1,\n    })\n    const texture = new TgdTexture2D(context).loadBitmap(assets.image.texture)\n    const mesh = new TgdPainterMesh(context, {\n        material: new TgdMaterialDiffuse({\n            color: texture,\n        }),\n    })\n    mesh.transfo.setPosition(-0.5, 0, 0)\n    const mesh2 = new TgdPainterMesh(context, {\n        material: new TgdMaterialDiffuse({\n            color: texture,\n        }),\n    })\n    mesh2.transfo.setPosition(0.5, 0, 0)\n    const meshPainter = new TgdPainterState(context, {\n        depth: webglPresetDepth.less,\n        children: [clear, mesh, mesh2],\n    })\n    const fb = new TgdPainterFramebuffer(context, {\n        children: [meshPainter],\n        depthBuffer: true,\n        textureColor0: new TgdTexture2D(context),\n    })\n    const chromaticAberrationFilter = new TgdFilterChromaticAberration({\n        strength: 10,\n    })\n    const hueRotationFilter = new TgdFilterHueRotation()\n    const filters = new TgdPainterFilter(context, {\n        filters: [hueRotationFilter, chromaticAberrationFilter],\n        texture: fb.textureColor0,\n    })\n    context.add(\n        fb,\n        filters,\n        new TgdPainterLogic((time, delay) => {\n            mesh.transfo.orbitAroundX(delay * Math.sin(time * 0.5))\n            mesh.transfo.orbitAroundZ(delay * 0.341)\n            mesh2.transfo.orbitAroundX(delay * Math.sin(time * 0.714))\n            mesh2.transfo.orbitAroundZ(-delay * 0.471)\n            chromaticAberrationFilter.strength = Math.sin(time) * 10\n            hueRotationFilter.hueShiftInRadians += delay\n        })\n    )\n    context.play()\n}\n\nexport default function Demo() {\n    return (\n        <View\n            onReady={init}\n            assets={{\n                image: {\n                    texture: TextureURL,\n                },\n            }}\n        />\n    )\n}\n':f})]})]})}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function p(e){var t=m({a:"a",h1:"h1",hr:"hr",li:"li",p:"p",ul:"ul"},(0,o.R)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.h1,{children:[(0,r.jsx)(t.a,{href:"docs/classes/TgdPainterFramebuffer.html",children:"TgdPainterFramebuffer"})," - Step by step demo"]}),"\n",(0,r.jsx)(t.p,{children:"The mistake we did in the previous step was that we forgot to clear the depth\nbuffer."}),"\n",(0,r.jsx)(g,{}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"#/articles/painter/framebuffer/example0/04",children:"Previous step"})}),"\n"]})]})}function x(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=m({},(0,o.R)(),n.components).wrapper;return i?(0,r.jsx)(i,(e=m({},n),t=t={children:(0,r.jsx)(p,m({},n))},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e)):p(n)}}}]);