"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([["5081"],{1465(e,t,r){r.r(t),r.d(t,{default:()=>y});var a=r(4848),n=r(6540),i=r(6671),s=r(2155),o=r(216);let l=i.Sxu.classNames;function c(e){return(0,a.jsx)(o.A,{className:l.join(e.className,"yotYZLhOyPwmxNHF"),language:"glsl",value:e.code,onChange:t=>e.onChange?.(t),disabled:e.disabled})}let u=r.p+"img/background.1d5820706f10ac07.avif";class d{constructor(e,t){this.onError=t,this.uniEffectStrength=0,this.filter=null;const r=new s.TgdContext(e);this.context=r;const a=new s.TgdTexture2D(r).loadBitmap(u).setParams({wrapR:"MIRRORED_REPEAT",wrapS:"MIRRORED_REPEAT",wrapT:"MIRRORED_REPEAT"});this.texture=a,this.destroy=()=>{a.delete(),r.delete()}}setCode(e,t=""){try{let{context:r,texture:a}=this,n=new s.TgdPainterFilter(r,{texture:a,filters:[new s.TgdFilter({fragmentShaderCode:e,extraFunctions:t,uniforms:{uniTime:"float",uniEffectStrength:"float",uniAspectRatio:"float",uniAspectRatioInverse:"float",uniModelViewMatrix:"mat4",uniProjectionMatrix:"mat4"},setUniforms:({program:e,time:t})=>{e.uniform1f("uniTime",t),e.uniform1f("uniEffectStrength",this.uniEffectStrength),e.uniform1f("uniAspectRatio",r.width/r.height),e.uniform1f("uniAspectRatioInverse",r.height/r.width),e.uniformMatrix4fv("uniModelViewMatrix",r.camera.matrixModelView),e.uniformMatrix4fv("uniProjectionMatrix",r.camera.matrixProjection)}})]});this.filter&&this.context.remove(this.filter),this.filter=n,r.add(n),r.play(),this.onError(null)}catch(e){this.onError(e instanceof Error?e.message:JSON.stringify(e))}}}let h=i.Sxu.classNames;function f(e){let t=n.useRef(null),[r,o]=n.useState(null),l=n.useRef(null),[c,u]=n.useState(.5);return n.useEffect(()=>{let t=l.current;t&&t.setCode(e.fragmentShader,e.functions)},[e.fragmentShader,e.functions]),n.useEffect(()=>{let e=l.current;e&&(e.uniEffectStrength=c)},[c]),n.useEffect(()=>()=>{l.current?.destroy()},[]),(0,a.jsxs)("div",{ref:t,className:h.join(e.className,"kyl55SuijU4ixMcn"),...e,children:[(0,a.jsxs)(i.sWC,{color:"primary-5",height:"2em",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"M",fullwidth:!0,children:[(0,a.jsx)("div",{children:"Filter output"}),(0,a.jsx)(i.L9n,{onClick:()=>{let e=t.current;e&&(0,s.tgdFullscreenToggle)(e)}})]}),(0,a.jsx)("canvas",{ref:t=>{t&&(l.current||(l.current=new d(t,o)),l.current.setCode(e.fragmentShader,e.functions))}}),r&&(0,a.jsx)("pre",{children:r.split("\n").map((e,t)=>e.startsWith("#####")?(0,a.jsxs)("div",{className:"p60Efk9fosg9tj1a",children:[e,"\n"]},t):(0,a.jsx)("div",{children:e},t))}),(0,a.jsx)(i.BAW,{min:0,max:1,step:.01,value:c,onChange:u})]})}var m=r(8453);function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(t){var a;a=r[t],t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a})}return e}function g(e){var t=p({a:"a",code:"code",h2:"h2",li:"li",ul:"ul"},(0,m.R)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{children:"Available uniforms"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"uniTime"}),": current time in seconds."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"uniEffectStrength"}),": float between 0.0 and 1.0, controlled by the slider."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"uniAspectRatio"}),": Aspect ratio (width / height)."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"uniAspectRatioInverse"}),": Inverse aspect ratio (height / width)."]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{children:"Useful resources for fragment shaders:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["GLSL ES 3.1: ",(0,a.jsx)(t.a,{href:"https://docs.gl/sl4/trunc",children:"https://docs.gl/sl4/trunc"})]}),"\n",(0,a.jsxs)(t.li,{children:["Shadertoy: ",(0,a.jsx)(t.a,{href:"https://www.shadertoy.com/",children:"https://www.shadertoy.com/"})]}),"\n",(0,a.jsxs)(t.li,{children:["Inigo Quilez website: ",(0,a.jsx)(t.a,{href:"https://iquilezles.org/articles/",children:"https://iquilezles.org/articles/"})]}),"\n",(0,a.jsxs)(t.li,{children:["2D signed distance functions:\n",(0,a.jsx)(t.a,{href:"https://iquilezles.org/articles/distfunctions2d/",children:"https://iquilezles.org/articles/distfunctions2d/"})]}),"\n",(0,a.jsxs)(t.li,{children:["Color palette article: ",(0,a.jsx)(t.a,{href:"https://iquilezles.org/articles/palettes/",children:"https://iquilezles.org/articles/palettes/"})]}),"\n",(0,a.jsxs)(t.li,{children:["Color palette webapp: ",(0,a.jsx)(t.a,{href:"http://dev.thi.ng/gradients/",children:"http://dev.thi.ng/gradients/"})]}),"\n",(0,a.jsxs)(t.li,{children:["Graphtoy: ",(0,a.jsx)(t.a,{href:"https://graphtoy.com/",children:"https://graphtoy.com/"})]}),"\n",(0,a.jsxs)(t.li,{children:["The Book of Shaders: ",(0,a.jsx)(t.a,{href:"https://thebookofshaders.com/",children:"https://thebookofshaders.com/"})]}),"\n",(0,a.jsxs)(t.li,{children:["Shadertoy Unofficial: ",(0,a.jsx)(t.a,{href:"https://shadertoyunofficial.wordpress.com/",children:"https://shadertoyunofficial.wordpress.com/"})]}),"\n"]})]})}function x(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=p({},(0,m.R)(),r.components).wrapper;return n?(0,a.jsx)(n,(e=p({},r),t=t={children:(0,a.jsx)(g,p({},r))},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r.push.apply(r,a)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e)):g(r)}function j(){let e=function(){let[e,t]=n.useState({});return n.useEffect(()=>{Promise.resolve().then(r.bind(r,2155)).then(e=>{let r={},a="tgdCodeFunction_";for(let t of Object.keys(e))t.startsWith(a)&&(r[t.slice(a.length)]=e[t]);t(r)})},[]),e}(),t=n.useMemo(()=>{let t={};for(let r of Object.keys(e))t={...t,...e[r]()};return Object.values(t).join("\n")},[e]),[s,o]=(0,i.Vcb)(v,"Filter/FragmentShader");return console.log(t),(0,a.jsxs)(i.UkC,{className:"A90fXYua7a8C6S9U",template:"11",orientation:"row",children:[(0,a.jsxs)(i.WET,{children:[(0,a.jsx)(i.Zdo,{label:"Fragment Shader",children:(0,a.jsx)(i.sWC,{fullsize:!0,overflow:"auto",children:(0,a.jsx)(c,{code:s,onChange:o})})},"shader"),(0,a.jsx)(i.Zdo,{label:"Extra functions",children:(0,a.jsx)(i.sWC,{fullsize:!0,overflow:"auto",children:(0,a.jsx)(c,{code:t,disabled:!0})})},"functions"),(0,a.jsx)(i.Zdo,{label:"Documentation",children:(0,a.jsx)(i.sWC,{fullsize:!0,overflow:"auto",children:(0,a.jsx)(x,{})})},"doc")]}),(0,a.jsx)(f,{fragmentShader:s,functions:t})]})}i.Sxu.classNames;let v=(0,s.tgdCodeStringify)(["vec2 polar = uv2polar(varUV);","polar.y += polar.x * cos(uniTime);","vec2 uv = polar2uv(polar);","vec4 color = texture(uniTexture, uv);","FragColor = vec4(",["shiftHue(color.rgb, polar.y + uniTime),","1.0"],");"]);function y(){return(0,a.jsx)(j,{})}(0,s.tgdCodeStringify)([(0,s.tgdCodeConstants)("PI","TAU","E"),(0,s.tgdCodeFunction_random)(),(0,s.tgdCodeFunction_shiftHue)(),(0,s.tgdCodeFunction_polar2uv)(),(0,s.tgdCodeFunction_polar2xy)(),(0,s.tgdCodeFunction_uv2polar)(),(0,s.tgdCodeFunction_xy2polar)(),(0,s.tgdCodeFunction_uv2xy)(),(0,s.tgdCodeFunction_xy2uv)(),(0,s.tgdCodeFunction_luminance)(),`
float dot2( in vec2 v ) { return dot(v,v); }
`])},216(e,t,r){r.d(t,{A:()=>d});var a=r(4848),n=r(6069),i=r.n(n),s=r(8848),o=r.n(s);let l={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/g,lookbehind:!0,greedy:!0},{pattern:/"(^|[^\\:])\/\/.*"/g,lookbehind:!0,greedy:!0}],number:{pattern:/(^|[^\w$])(?:NaN|Infinity|0[bB][01]+(?:_[01]+)*n?|0[oO][0-7]+(?:_[0-7]+)*n?|0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?|\d+(?:_\d+)*n|(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?)(?![\w$])/,lookbehind:!0},type:c(["bvec2","bvec3","bvec4","dmat2","dmat2x2","dmat2x3","dmat2x4","dmat3","dmat3x2","dmat3x3","dmat3x4","dmat4","dmat4x2","dmat4x3","dmat4x4","dvec2","dvec3","dvec4","float","fvec2","fvec3","fvec4","isampler1D","isampler1DArray","isampler2D","isampler2DArray","isampler2DMS","isampler2DMSArray","isampler2DRect","isampler3D","isamplerBuffer","isamplerCube","isamplerCubeArray","ivec2","ivec3","ivec4","mat2","mat2x2","mat2x3","mat2x4","mat3","mat3x2","mat3x3","mat3x4","mat4","mat4x2","mat4x3","mat4x4","sample","sampler1D","sampler1DArray","sampler1DArrayShadow","sampler1DShadow","sampler2D","sampler2DArray","sampler2DArrayShadow","sampler2DMS","sampler2DMSArray","sampler2DRect","sampler2DRectShadow","sampler2DShadow","sampler3D","samplerBuffer","samplerCube","samplerCubeArray","samplerCubeArrayShadow","samplerCubeShadow","usampler1D","usampler1DArray","usampler2D","usampler2DArray","usampler2DMS","usampler2DMSArray","usampler2DRect","usampler3D","usamplerBuffer","usamplerCube","usamplerCubeArray","uvec2","uvec3","uvec4","vec2","vec3","vec4","void"]),keyword:c(["centroid","const","discard","else","flat","highp","if","in","inout","invariant","layout","lowp","mediump","noperspective","out","patch","precision","smooth","subroutine","uniform","active","asm","cast","class","common","enum","extern","external","filter","fixed","goto","half","hvec2","hvec3","hvec4","iimage1D","iimage1DArray","iimage2D","iimage2DArray","iimage3D","iimageBuffer","iimageCube","image1D","image1DArray","image1DArrayShadow","image1DShadow","image2D","image2DArray","image2DArrayShadow","image2DShadow","image3D","imageBuffer","imageCube","inline","input","interface","long","namespace","noinline","output","packed","partition","public","row_major","sampler3DRect","short","sizeof","static","superp","template","this","typedef","uimage1D","uimage1DArray","uimage2D","uimage2DArray","uimage3D","uimageBuffer","uimageCube","union","unsigned","using","volatile"]),global:c(["gl_DepthRange","gl_DepthRange.diff","gl_DepthRange.far","gl_DepthRange.near","gl_FragCoord","gl_FragDepth","gl_FrontFacing","gl_InstanceID","gl_PointCoord","gl_PointSize","gl_Position","gl_VertexID"]),function:c(["abs","acos","acosh","all","any","asin","asinh","atan","atanh","ceil","clamp","cos","cosh","cross","degrees","determinant","dFdx","dFdy","distance","dot","equal","exp","exp2","faceforward","floatBitsToInt","floatBitsToUint","floor","fract","fwidth","greaterThan","greaterThanEqual","intBitsToFloat","inverse","inversesqrt","isinf","isnan","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","modf","normalize","not","notEqual","outerProduct","packHalf2x16","packSnorm2x16","packUnorm2x16","pow","radians","reflect","refract","round","roundEven","sign","sin","sinh","smoothstep","sqrt","step","tan","tanh","texelFetch","texelFetchOffset","texture","textureGrad","textureGradOffset","textureLod","textureLodOffset","textureOffset","textureProj","textureProjGrad","textureProjGradOffset","textureProjLod","textureProjLodOffset","textureProjOffset","textureSize","transpose","trunc","uintBitsToFloat","unpackHalf2x16","unpackSnorm2x16","unpackUnorm2x16"])};function c(e){return RegExp(`(?:[^a-zA-Z0-9_])(${e.join("|")})(?=[^a-zA-Z0-9_])`)}let u=()=>{};function d(e){var t;let r;return(0,a.jsx)("div",{className:(r=["custom","view-CodeEditorView"],"string"==typeof(t=e).className&&r.push(t.className),r.join(" ")),children:(0,a.jsx)(i(),{disabled:e.disabled,value:e.value,onValueChange:e.onChange??u,highlight:t=>o().highlight(t,(e.language,l),e.language)})})}},8453(e,t,r){r.d(t,{R:()=>i});var a=r(6540);let n=a.createContext({});function i(e){let t=a.useContext(n);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}}}]);