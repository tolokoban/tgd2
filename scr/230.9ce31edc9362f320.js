"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([["230"],{6069(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},l=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(6540)),c="u">typeof window&&"navigator"in window&&/Win/i.test(navigator.platform),u="u">typeof window&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),f="npm__react-simple-code-editor__textarea",d="\n/**\n * Reset the text fill color so that placeholder is visible\n */\n.".concat(f,":empty {\n  -webkit-text-fill-color: inherit !important;\n}\n\n/**\n * Hack to apply on some CSS on IE10 and IE11\n */\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  /**\n    * IE doesn't support '-webkit-text-fill-color'\n    * So we use 'color: transparent' to make the text transparent on IE\n    * Unlike other browsers, it doesn't affect caret color in IE\n    */\n  .").concat(f," {\n    color: transparent !important;\n  }\n\n  .").concat(f,"::selection {\n    background-color: #accef7 !important;\n    color: transparent !important;\n  }\n}\n"),h=s.forwardRef(function(e,t){var n=e.autoFocus,o=e.disabled,i=e.form,a=e.highlight,h=e.ignoreTabKey,g=void 0!==h&&h,v=e.insertSpaces,y=void 0===v||v,m=e.maxLength,b=e.minLength,k=e.name,S=e.onBlur,w=e.onClick,C=e.onFocus,E=e.onKeyDown,x=e.onKeyUp,_=e.onValueChange,K=e.padding,O=void 0===K?0:K,j=e.placeholder,D=e.preClassName,P=e.readOnly,I=e.required,z=e.style,M=e.tabSize,T=void 0===M?2:M,F=e.textareaClassName,L=e.textareaId,W=e.value,B=l(e,["autoFocus","disabled","form","highlight","ignoreTabKey","insertSpaces","maxLength","minLength","name","onBlur","onClick","onFocus","onKeyDown","onKeyUp","onValueChange","padding","placeholder","preClassName","readOnly","required","style","tabSize","textareaClassName","textareaId","value"]),N=s.useRef({stack:[],offset:-1}),R=s.useRef(null),H=s.useState(!0),U=H[0],q=H[1],V={paddingTop:"object"==typeof O?O.top:O,paddingRight:"object"==typeof O?O.right:O,paddingBottom:"object"==typeof O?O.bottom:O,paddingLeft:"object"==typeof O?O.left:O},A=a(W),$=function(e,t){return e.substring(0,t).split("\n")},G=s.useCallback(function(e,t){void 0===t&&(t=!1);var n,o,i,a=N.current,l=a.stack,s=a.offset;if(l.length&&s>-1){N.current.stack=l.slice(0,s+1);var c=N.current.stack.length;if(c>100){var u=c-100;N.current.stack=l.slice(u,c),N.current.offset=Math.max(N.current.offset-u,0)}}var f=Date.now();if(t){var d=N.current.stack[N.current.offset];if(d&&f-d.timestamp<3e3){var h=/[^a-z0-9]([a-z0-9]+)$/i,p=null==(n=$(d.value,d.selectionStart).pop())?void 0:n.match(h),g=null==(o=$(e.value,e.selectionStart).pop())?void 0:o.match(h);if((null==p?void 0:p[1])&&(null==(i=null==g?void 0:g[1])?void 0:i.startsWith(p[1]))){N.current.stack[N.current.offset]=r(r({},e),{timestamp:f});return}}}N.current.stack.push(r(r({},e),{timestamp:f})),N.current.offset++},[]),J=s.useCallback(function(){var e=R.current;e&&G({value:e.value,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})},[G]),Q=function(e){var t=R.current;t&&(t.value=e.value,t.selectionStart=e.selectionStart,t.selectionEnd=e.selectionEnd,null==_||_(e.value))},X=function(e){var t=R.current,n=N.current.stack[N.current.offset];n&&t&&(N.current.stack[N.current.offset]=r(r({},n),{selectionStart:t.selectionStart,selectionEnd:t.selectionEnd})),G(e),Q(e)},Y=function(){var e=N.current,t=e.stack,n=e.offset,r=t[n-1];r&&(Q(r),N.current.offset=Math.max(n-1,0))},Z=function(){var e=N.current,t=e.stack,n=e.offset,r=t[n+1];r&&(Q(r),N.current.offset=Math.min(n+1,t.length-1))};return s.useEffect(function(){J()},[J]),s.useImperativeHandle(t,function(){return{get session(){return{history:N.current}},set session(session){N.current=session.history}}},[]),s.createElement("div",r({},B,{style:r(r({},p.container),z)}),s.createElement("pre",r({className:D,"aria-hidden":"true",style:r(r(r({},p.editor),p.highlight),V)},"string"==typeof A?{dangerouslySetInnerHTML:{__html:A+"<br />"}}:{children:A})),s.createElement("textarea",{ref:function(e){return R.current=e},style:r(r(r({},p.editor),p.textarea),V),className:f+(F?" ".concat(F):""),id:L,value:W,onChange:function(e){var t=e.currentTarget,n=t.value;G({value:n,selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},!0),_(n)},onKeyDown:function(e){if(!E||(E(e),!e.defaultPrevented)){"Escape"===e.key&&e.currentTarget.blur();var t=e.currentTarget,n=t.value,r=t.selectionStart,o=t.selectionEnd,i=(y?" ":"	").repeat(T);if("Tab"===e.key&&!g&&U)if(e.preventDefault(),e.shiftKey){var a=$(n,r),l=a.length-1,s=$(n,o).length-1,f=n.split("\n").map(function(e,t){return t>=l&&t<=s&&e.startsWith(i)?e.substring(i.length):e}).join("\n");if(n!==f){var d=a[l];X({value:f,selectionStart:(null==d?void 0:d.startsWith(i))?r-i.length:r,selectionEnd:o-(n.length-f.length)})}}else if(r!==o){var a=$(n,r),h=a.length-1,p=$(n,o).length-1,d=a[h];X({value:n.split("\n").map(function(e,t){return t>=h&&t<=p?i+e:e}).join("\n"),selectionStart:d&&/\S/.test(d)?r+i.length:r,selectionEnd:o+i.length*(p-h+1)})}else{var v=r+i.length;X({value:n.substring(0,r)+i+n.substring(o),selectionStart:v,selectionEnd:v})}else if("Backspace"===e.key){var m=r!==o;if(n.substring(0,r).endsWith(i)&&!m){e.preventDefault();var v=r-i.length;X({value:n.substring(0,r-i.length)+n.substring(o),selectionStart:v,selectionEnd:v})}}else if("Enter"===e.key){if(r===o){var b=$(n,r).pop(),k=null==b?void 0:b.match(/^\s+/);if(null==k?void 0:k[0]){e.preventDefault();var S="\n"+k[0],v=r+S.length;X({value:n.substring(0,r)+S+n.substring(o),selectionStart:v,selectionEnd:v})}}}else if(57===e.keyCode||219===e.keyCode||222===e.keyCode||192===e.keyCode){var w=void 0;57===e.keyCode&&e.shiftKey?w=["(",")"]:219===e.keyCode?w=e.shiftKey?["{","}"]:["[","]"]:222===e.keyCode?w=e.shiftKey?['"','"']:["'","'"]:192!==e.keyCode||e.shiftKey||(w=["`","`"]),r!==o&&w&&(e.preventDefault(),X({value:n.substring(0,r)+w[0]+n.substring(r,o)+w[1]+n.substring(o),selectionStart:r,selectionEnd:o+2}))}else(u?e.metaKey&&90===e.keyCode:e.ctrlKey&&90===e.keyCode)&&!e.shiftKey&&!e.altKey?(e.preventDefault(),Y()):(u?e.metaKey&&90===e.keyCode&&e.shiftKey:c?e.ctrlKey&&89===e.keyCode:e.ctrlKey&&90===e.keyCode&&e.shiftKey)&&!e.altKey?(e.preventDefault(),Z()):77===e.keyCode&&e.ctrlKey&&(!u||e.shiftKey)&&(e.preventDefault(),q(function(e){return!e}))}},onClick:w,onKeyUp:x,onFocus:C,onBlur:S,disabled:o,form:i,maxLength:m,minLength:b,name:k,placeholder:j,readOnly:P,required:I,autoFocus:n,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),s.createElement("style",{dangerouslySetInnerHTML:{__html:d}}))}),p={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}};t.default=h}}]);