/*! For license information please see app.d954bbcdc4478dbe4e65.js.LICENSE.txt */
(()=>{"use strict";var t,e,n,i={7705:(t,e,n)=>{n.d(e,{A:()=>o});var i=n(1601),r=n.n(i),s=n(6314),a=n.n(s)()(r());a.push([t.id,".Tbm5iqySdR2ncMStaCcH {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    background: var(--theme-color-neutral-5);\n    color: var(--theme-color-on-neutral-5);\n}\n\n.Tbm5iqySdR2ncMStaCcH > div {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 4rem 0;\n    overflow: auto;\n}\n\n.Tbm5iqySdR2ncMStaCcH > footer,\n.Tbm5iqySdR2ncMStaCcH > header {\n    position: fixed;\n    left: 0;\n    width: 100%;\n    height: 64px;\n    bottom: 0;\n    box-sizing: border-box;\n}\n\n.Tbm5iqySdR2ncMStaCcH > header {\n    top: 0;\n    background: linear-gradient(\n        to top,\n        var(--theme-color-primary-5-1),\n        var(--theme-color-primary-5-9)\n    );\n    backdrop-filter: blur(6px);\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    gap: 0.5em;\n    padding: 0 0.5em;\n    height: 3em;\n    z-index: 9999;\n    box-shadow: 0 0.25em 0.5em #000a;\n}\n\n.Tbm5iqySdR2ncMStaCcH > header > * {\n    flex: 0 0 auto;\n}\n\n.Tbm5iqySdR2ncMStaCcH > header > div {\n    flex: 1 1 auto;\n    text-align: center;\n    font-weight: bolder;\n    font-size: 200%;\n    color: var(--theme-color-on-primary);\n    text-shadow: 0 2px 2px var(--theme-color-primary-9);\n}\n\n.Tbm5iqySdR2ncMStaCcH > header > button {\n    border: none;\n    background: linear-gradient(\n        to top,\n        var(--theme-color-primary-7),\n        var(--theme-color-primary-3)\n    );\n    box-shadow: 0 0 5px var(--theme-color-primary-1);\n    height: 2em;\n    width: 80px;\n    border-radius: 0.25em;\n    color: inherit;\n    font: inherit;\n    font-weight: bold;\n    font-size: 90%;\n    display: inline-block;\n    margin: 0;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    font-variant: small-caps;\n    cursor: pointer;\n    transition: all 0.3s;\n}\n\n.Tbm5iqySdR2ncMStaCcH > header > button:first-child,\n.Tbm5iqySdR2ncMStaCcH > header > button:nth-child(2) {\n    width: 2em;\n}\n\n.Tbm5iqySdR2ncMStaCcH > header > button:hover,\n.Tbm5iqySdR2ncMStaCcH > header > button:active {\n    background: linear-gradient(\n        to top,\n        var(--theme-color-primary-9),\n        var(--theme-color-primary-5)\n    );\n    box-shadow: 0 0 2px 0px var(--theme-color-primary-9) inset,\n        0 0 5px var(--theme-color-primary-5);\n}\n\n.Tbm5iqySdR2ncMStaCcH > header > button > svg {\n    height: 1.5em;\n    fill: currentColor;\n}\n\n.Tbm5iqySdR2ncMStaCcH > footer {\n    bottom: 0;\n    background: linear-gradient(to top, #ddd, transparent);\n}\n",""]),a.locals={Layout:"Tbm5iqySdR2ncMStaCcH"};const o=a},1001:(t,e,n)=>{n.d(e,{A:()=>o});var i=n(1601),r=n.n(i),s=n(6314),a=n.n(s)()(r());a.push([t.id,".ZqNf4TRBwCZoomCzm94o {\n    display: grid;\n    grid-template-columns: auto 1fr;\n    grid-template-rows: 100%;\n    gap: 1em;\n    place-items: stretch;\n}\n\n.ZqNf4TRBwCZoomCzm94o > div {\n    max-height: 100%;\n    overflow: auto;\n}\n\n@media (max-width: 640px) {\n    .ZqNf4TRBwCZoomCzm94o {\n        grid-template-columns: 1fr;\n        grid-template-rows: auto 1fr;\n        gap: 1em;\n    }\n}\n",""]),a.locals={Layout:"ZqNf4TRBwCZoomCzm94o"};const o=a},3203:(t,e,n)=>{n.d(e,{A:()=>o});var i=n(1601),r=n.n(i),s=n(6314),a=n.n(s)()(r());a.push([t.id,".aVS7j0kYoHtHtYRK2ncJ {\n    \n}",""]),a.locals={Spinner:"aVS7j0kYoHtHtYRK2ncJ"};const o=a},6573:(t,e,n)=>{n.d(e,{A:()=>o});var i=n(1601),r=n.n(i),s=n(6314),a=n.n(s)()(r());a.push([t.id,'.qKlsNk05XzT1P3AWyaVM {\n    display: grid;\n    grid-template-columns: 1fr 390px 390px 1fr;\n    margin: 0 0;\n    margin: 0;\n}\n\n.qKlsNk05XzT1P3AWyaVM blockquote {\n    border-left: 0.25em solid #e82;\n    padding-left: 1em;\n    font-style: italic;\n}\n\n.qKlsNk05XzT1P3AWyaVM > * {\n    grid-column: 2/4;\n}\n\n.qKlsNk05XzT1P3AWyaVM > *.full-width {\n    grid-column: 1/5;\n    padding: 0.5em;\n}\n\n.qKlsNk05XzT1P3AWyaVM > *.margin-right {\n    grid-column: 4/5;\n    padding: 1em;\n}\n\n.qKlsNk05XzT1P3AWyaVM > *.margin-left {\n    grid-column: 1/2;\n    padding: 1em;\n}\n\n@media (max-width: 1200px) {\n    .qKlsNk05XzT1P3AWyaVM > *.margin-right {\n        grid-column: 2/4;\n    }\n\n    .qKlsNk05XzT1P3AWyaVM > *.margin-left {\n        grid-column: 2/4;\n    }\n}\n\n@media (max-width: 800px) {\n    .qKlsNk05XzT1P3AWyaVM {\n        grid-template-columns: 8px 1fr 1fr 8px;\n    }\n}\n\n.qKlsNk05XzT1P3AWyaVM h1,\n.qKlsNk05XzT1P3AWyaVM h2,\n.qKlsNk05XzT1P3AWyaVM h3 {\n    display: block;\n    position: relative;\n    padding: 0 0 0 0.5em;\n}\n\n.qKlsNk05XzT1P3AWyaVM h1::after,\n.qKlsNk05XzT1P3AWyaVM h2::after,\n.qKlsNk05XzT1P3AWyaVM h3::after {\n    content: "";\n    position: absolute;\n    left: 0;\n    bottom: -1px;\n    width: 100%;\n    height: 1px;\n    background: linear-gradient(to right, currentcolor, transparent);\n}\n\n.qKlsNk05XzT1P3AWyaVM h1 {\n    font-size: 145%;\n}\n\n.qKlsNk05XzT1P3AWyaVM h2 {\n    font-size: 130%;\n    margin-left: 1em;\n}\n\n.qKlsNk05XzT1P3AWyaVM h3 {\n    font-size: 115%;\n    margin-left: 2em;\n}\n',""]),a.locals={Article:"qKlsNk05XzT1P3AWyaVM"};const o=a},9165:(t,e,n)=>{n.d(e,{A:()=>o});var i=n(1601),r=n.n(i),s=n(6314),a=n.n(s)()(r());a.push([t.id,"html {\n    font-family: sans-serif;\n    font-size: 16px;\n}\n\nbody {\n    background-color: var(--theme-color-neutral);\n    color: var(--theme-color-on-neutral);\n}\n\na,\na:visited {\n    color: var(--theme-color-secondary-2);\n    text-decoration-color: var(--theme-color-secondary-2-4);\n    text-decoration-thickness: 1px;\n}\n\na:hover,\na:active {\n    text-decoration-color: var(--theme-color-secondary-2);\n    text-decoration-thickness: 2px;\n}\n\n#splash-screen {\n    transition: all 1s;\n    pointer-events: none;\n}\n\n#splash-screen.vanish {\n    opacity: 0;\n}\n",""]);const o=a},5670:(t,e,n)=>{n.d(e,{A:()=>b});var i=n(4848),r=n(9898),s=n(5072),a=n.n(s),o=n(7825),c=n.n(o),h=n(7659),u=n.n(h),d=n(5056),l=n.n(d),g=n(540),m=n.n(g),f=n(1113),p=n.n(f),x=n(3203),v={};v.styleTagTransform=p(),v.setAttributes=l(),v.insert=u().bind(null,"head"),v.domAPI=c(),v.insertStyleElement=m(),a()(x.A,v);const y=x.A&&x.A.locals?x.A.locals:void 0,T=r.Sx.classNames;function b({className:t}){return(0,i.jsxs)("svg",{className:T.join(t,y.Spinner),xmlns:"http://www.w3.org/2000/svg",height:"100%",width:"100%",version:"1.1",viewBox:"-200 -200 400 400",preserveAspectRatio:"xMidYMid",children:[(0,i.jsx)("defs",{children:(0,i.jsxs)("path",{id:"anim",d:"M100,0 A100 100 0 1 1 0 -100",fill:"none",strokeDasharray:"300 1000",strokeDashoffset:"0",children:[(0,i.jsx)("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",from:"0 0 0",to:"360 0 0",dur:".83s",repeatCount:"indefinite"}),(0,i.jsx)("animate",{attributeName:"stroke-dashoffset",values:"0;280;0",dur:"1.1s",repeatCount:"indefinite"})]})}),(0,i.jsxs)("g",{strokeLinecap:"round",strokeLinejoin:"round",children:[(0,i.jsx)("use",{href:"#anim",stroke:"#000",strokeWidth:"12"}),(0,i.jsx)("use",{href:"#anim",stroke:"#f90",strokeWidth:"6"}),(0,i.jsxs)("g",{stroke:"#000",strokeWidth:"2",children:[(0,i.jsx)("path",{d:"M-35,-25 h10v-10h-10v-10h10v10h10v10h30v-10h10v-10h10v10h-10v10h10v10h10v10h10v30h-10v-20h-10v20h-10v10h-20v-10h20v-10h-50v10h20v10h-20v-10h-10v-20h-10v20h-10v-30h10v-10h10z",fill:"#05d"}),(0,i.jsx)("path",{d:"M-25-15h10v10h-10zM15-15h10v10h-10z",fill:"#f90"})]})]})]})}},8367:(t,e,n)=>{var i=n(4848),r=n(6540);const s={"/":["/"],"/articles":["/articles"],"/articles/painter":["/articles/painter"],"/articles/painter/background":["/articles/painter/background"],"/articles/painter/background/2":["/articles/painter/background/2"],"/articles/painter/clear":["/articles/painter/clear"],"/articles/painter/logic":["/articles/painter/logic"],"/articles/suzanne":["/articles/suzanne"],"/articles/test":["/articles/test"],"/articles/texture":["/articles/texture"],"/articles/texture/cube":["/articles/texture/cube"],"/tools":["/tools"],"/tools/gltf":["/tools/gltf"]};function a(t,e){if(!e)return null;let n=t;const i={};for(let t=0;t<e.length;t++){if(n.length<1)return null;const r=e[t];if(r.startsWith("[")){const t=r.substring(1,r.length-1),[e,s]=o(n);i[t]=e,n=s}else{if(!n.startsWith(r))return null;n=n.substring(r.length+1)}}return{path:t,route:e.join("/"),params:i,distance:n.length}}function o(t){const e=t.indexOf("/");return e<0?[t,""]:[t.substring(0,e),t.substring(e+1)]}const c=new class{constructor(){this.listeners=new Set,this._value=null,this._hash="",this.handleHashChange=t=>{const e=this.extractHash(t.oldURL),n=this.extractHash(t.newURL),i=this.ensureAbsoluteHash(n,e);i!==n&&history.replaceState({},"",`#${i}`),this.setHash(i)},this.nonEmpty=t=>"string"==typeof t&&t.trim().length>0,this.setHash(this.extractHash(window.location.href)),window.addEventListener("hashchange",this.handleHashChange)}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}get value(){return this._value}setHash(t){if(this._hash===t)return;this._hash=t;const e=function(t){let e=null;for(const n of Object.values(s)){const i=a(t,n);if(i){if(0===i.distance)return i;(!e||i.distance<e.distance)&&(e=i)}}return e}(t);this._value=e,this.listeners.forEach((t=>t(e)))}extractHash(t){const e=new URL(t).hash;return e?e.startsWith("#")?e.substring(1):e:"/"}ensureAbsoluteHash(t,e){if(t.startsWith("/"))return t;let n=t;for(;n.startsWith("./");)n=n.substring(2);const i=e.split("/").filter(this.nonEmpty);for(const e of t.split("/"))".."===e?i.length>0&&i.pop():i.push(e);return`/${i.filter(this.nonEmpty).join("/")}`}};var h=n(5072),u=n.n(h),d=n(7825),l=n.n(d),g=n(7659),m=n.n(g),f=n(5056),p=n.n(f),x=n(540),v=n.n(x),y=n(1113),T=n.n(y),b=n(7705),E={};E.styleTagTransform=T(),E.setAttributes=p(),E.insert=m().bind(null,"head"),E.domAPI=l(),E.insertStyleElement=v(),u()(b.A,E);const w=b.A&&b.A.locals?b.A.locals:void 0;function A({children:t}){return(0,i.jsxs)("div",{className:w.Layout,children:[(0,i.jsx)("div",{children:t}),(0,i.jsxs)("header",{children:[(0,i.jsx)("button",{onClick:()=>document.location.hash="#/",children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,i.jsx)("title",{children:"home"}),(0,i.jsx)("path",{d:"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"})]})}),(0,i.jsxs)("button",{onClick:()=>window.history.back(),children:[(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,i.jsx)("title",{children:"arrow-left-circle"}),(0,i.jsx)("path",{d:"M2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12M18,11H10L13.5,7.5L12.08,6.08L6.16,12L12.08,17.92L13.5,16.5L10,13H18V11Z"})]})," "]}),(0,i.jsx)("div",{children:"TGD 2"})]}),(0,i.jsx)("footer",{})]})}var P=n(1001),M={};M.styleTagTransform=T(),M.setAttributes=p(),M.insert=m().bind(null,"head"),M.domAPI=l(),M.insertStyleElement=v(),u()(P.A,M);const I=P.A&&P.A.locals?P.A.locals:void 0,F=["Background","Clear","Logic"].sort();function _({children:t}){return(0,i.jsxs)("div",{className:I.Layout,children:[(0,i.jsx)("div",{children:(0,i.jsx)("ul",{children:F.map((t=>(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:`#/articles/painter/${t.toLowerCase()}`,children:t})},t)))})}),(0,i.jsx)("div",{children:t})]})}var C=n(5670);function O(){return(0,i.jsx)(C.A,{})}var S=n(6573),R={};R.styleTagTransform=T(),R.setAttributes=p(),R.insert=m().bind(null,"head"),R.domAPI=l(),R.insertStyleElement=v(),u()(S.A,R);const k=S.A&&S.A.locals?S.A.locals:void 0;function B({className:t,children:e}){return(0,i.jsx)("div",{className:L(t,k.Article),children:e})}function L(...t){return t.filter((t=>"string"==typeof t)).join(" ")}function V({children:t}){return(0,i.jsxs)(B,{children:[t," "]})}const z=r.lazy((()=>n.e(616).then(n.bind(n,7616)))),j=r.lazy((()=>n.e(196).then(n.bind(n,9196)))),N=r.lazy((()=>Promise.all([n.e(20),n.e(440)]).then(n.bind(n,2944)))),U=r.lazy((()=>Promise.all([n.e(20),n.e(49)]).then(n.bind(n,1336)))),D=r.lazy((()=>Promise.all([n.e(20),n.e(675)]).then(n.bind(n,4675)))),$=r.lazy((()=>Promise.all([n.e(20),n.e(179)]).then(n.bind(n,4179)))),X=r.lazy((()=>n.e(193).then(n.bind(n,2597)))),W=r.lazy((()=>n.e(875).then(n.bind(n,4875)))),H=r.lazy((()=>n.e(264).then(n.bind(n,8264)))),Z=r.lazy((()=>n.e(450).then(n.bind(n,7450)))),G=r.lazy((()=>n.e(91).then(n.bind(n,1967))));function K({lang:t}){const e=(0,i.jsx)(O,{}),n=z,r=A,s=V,a=_,o=j,c=N,h=U,u=D,d=$,l=X,g=W,m=H,f=Z,p=G;return(0,i.jsxs)(q,{path:"/",Page:n,fallback:e,children:[(0,i.jsxs)(q,{path:"/articles",Layout:r,Template:s,fallback:e,children:[(0,i.jsxs)(q,{path:"/articles/painter",Page:o,Layout:a,Template:s,fallback:e,children:[(0,i.jsx)(q,{path:"/articles/painter/background",Page:c,Template:s,fallback:e,children:(0,i.jsx)(q,{path:"/articles/painter/background/2",Page:h,Template:s,fallback:e})}),(0,i.jsx)(q,{path:"/articles/painter/clear",Page:u,Template:s,fallback:e}),(0,i.jsx)(q,{path:"/articles/painter/logic",Page:d,Template:s,fallback:e})]}),(0,i.jsx)(q,{path:"/articles/suzanne",Page:l,Template:s,fallback:e}),(0,i.jsx)(q,{path:"/articles/test",Page:g,Template:s,fallback:e}),(0,i.jsx)(q,{path:"/articles/texture",Page:m,Template:s,fallback:e,children:(0,i.jsx)(q,{path:"/articles/texture/cube",Page:f,Template:s,fallback:e})})]}),(0,i.jsx)(q,{path:"/tools",fallback:e,children:(0,i.jsx)(q,{path:"/tools/gltf",Page:p,fallback:e})})]})}function q({path:t,fallback:e,children:n,Page:o,Layout:h,Template:u,access:d}){const[l,g]=r.useState(!1),m=function(){const[t,e]=r.useState(c.value);return r.useEffect((()=>{const t=t=>{e(t)};return c.addListener(t),()=>c.removeListener(t)}),[]),t}(),f=m&&a(m.path,s[t]);if(r.useEffect((()=>{m&&f&&(d?(g(void 0),d(m).then(g).catch((t=>{console.error("Error in access() function:",t),g(!1)}))):g(!0))}),[d,m]),!f)return null;if(!l)return e;if(0===f.distance){if(!o)return null;const t=u?(0,i.jsx)(u,{params:f.params,children:(0,i.jsx)(o,{params:f.params})}):(0,i.jsx)(o,{params:f.params});return h?(0,i.jsx)(h,{params:f.params,children:(0,i.jsx)(r.Suspense,{fallback:e,children:t})}):(0,i.jsx)(r.Suspense,{fallback:e,children:t})}return h?(0,i.jsx)(h,{params:f.params,children:n}):(0,i.jsx)(i.Fragment,{children:n})}var Q=n(5338),Y=n(9898),J=n(9165),tt={};tt.styleTagTransform=T(),tt.setAttributes=p(),tt.insert=m().bind(null,"head"),tt.domAPI=l(),tt.insertStyleElement=v(),u()(J.A,tt),J.A&&J.A.locals&&J.A.locals;var et=n(2139);!function(){document.createElement("canvas"),new et.xN,(new Y.Sx).apply();const t=document.getElementById("app");if(!t)throw Error('No element with id "app"!');(0,Q.H)(t).render((0,i.jsx)(K,{}));const e=document.getElementById("splash-screen");if(!e)throw Error("Unable to find element #splash-screen!");e.classList.add("vanish"),window.setTimeout((()=>{var t;return null===(t=e.parentNode)||void 0===t?void 0:t.removeChild(e)}),1e3)}()},2139:(t,e,n)=>{n.d(e,{$R:()=>T,$f:()=>b,AN:()=>p,FX:()=>E,HI:()=>A,I9:()=>d,LU:()=>F,ZJ:()=>x,b5:()=>y,b6:()=>m,dR:()=>v,hN:()=>P,m1:()=>g,o5:()=>f,oj:()=>I,on:()=>M,pw:()=>u,qj:()=>w,tb:()=>l,tf:()=>h,v$:()=>o,xN:()=>c});var i={"./src/buffer/buffer.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdBuffer:()=>i});class i{constructor(t,e,n){var i,r;this.gl=t;const s=t.createBuffer();if(!s)throw Error("Unable to create WebGLBuffer!");this._target=null!==(i=null==n?void 0:n.target)&&void 0!==i?i:"ARRAY_BUFFER",this._usage=null!==(r=null==n?void 0:n.usage)&&void 0!==r?r:"STATIC_DRAW",this.buffer=s,e&&this.bufferData(e,n)}get target(){return this._target}bind(t){const{gl:e,buffer:n}=this;this._target=null!=t?t:this._target,e.bindBuffer(e[this._target],n)}bufferData(t,e={}){var n;const{gl:i}=this;this.bind(e.target),this._usage=null!==(n=e.usage)&&void 0!==n?n:this._usage,i.bufferData(i[this._target],t,i[this._usage])}delete(){const{gl:t,buffer:e}=this;t.deleteBuffer(e)}}},"./src/buffer/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdBuffer:()=>i.TgdBuffer});var i=n("./src/buffer/buffer.ts")},"./src/camera/camera-orthographic.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdCameraOrthographic:()=>s});var i=n("./src/math/index.ts"),r=n("./src/camera/camera.ts");class s extends r.TgdCamera{constructor(t={}){var e;super(t),this._matrixProjection=new i.TgdMat4,this._spaceHeight=10,this._ray={origin:new i.TgdVec3,direction:new i.TgdVec3},this.spaceHeight=null!==(e=t.spaceHeight)&&void 0!==e?e:10}copyProjectionFrom(t){return this.spaceHeight=t.spaceHeight,this}castRay(t,e){const{origin:n,direction:i}=this._ray;i.from(this.axisZ);const r=.5*this.spaceHeight,s=r*this.screenAspectRatio;return n.from(this.position).addWithScale(this.axisX,s*t).addWithScale(this.axisY,r*e),this._ray}get spaceHeight(){return this._spaceHeight}set spaceHeight(t){t!==this._spaceHeight&&(this._spaceHeight=t,this.dirtyProjection=!0)}get near(){return this._near}set near(t){t!==this._near&&(this._near=t,this.dirtyProjection=!0)}get far(){return this._far}set far(t){t!==this._far&&(this._far=t,this.dirtyProjection=!0)}get matrixProjection(){return this.updateProjectionIfNeeded(),this._matrixProjection}getSpaceHeightAtTarget(){return this.spaceHeight}setSpaceHeightAtTarget(t){this.spaceHeight=t}updateProjectionIfNeeded(){if(!this.dirtyProjection)return;const{near:t,far:e,screenAspectRatio:n,_spaceHeight:i,zoom:r}=this,s=i/(r+r),a=-s,o=s*n,c=-o,h=this._matrixProjection,u=1/(c-o),d=1/(a-s),l=1/(t-e);h[0]=-2*u,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*d,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=l,h[11]=0,h[12]=(c+o)*u,h[13]=(s+a)*d,h[14]=t*l,h[15]=1,this.dirtyProjection=!0}}},"./src/camera/camera-perspective.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdCameraPerspective:()=>s});var i=n("./src/math/index.ts"),r=n("./src/camera/camera.ts");class s extends r.TgdCamera{constructor(t={}){var e;super(t),this._matrixProjection=new i.TgdMat4,this._fovy=Math.PI/4,this._ray={origin:new i.TgdVec3,direction:new i.TgdVec3},this._fovy=null!==(e=t.fovy)&&void 0!==e?e:Math.PI/4}copyProjectionFrom(t){return this.fovy=t.fovy,this.near=t.near,this.far=t.far,this}castRay(t,e){const{origin:n,direction:i}=this._ray;n.from(this.position);const r=Math.atan(this.fovy),s=r*this.screenAspectRatio;return i.from(n).subtract(this.axisZ).addWithScale(this.axisX,s*t).addWithScale(this.axisY,r*e).subtract(n).normalize(),this._ray}get fovy(){return this._fovy}set fovy(t){t!==this._fovy&&(this._fovy=t,this.dirtyProjection=!0)}get matrixProjection(){return this.updateProjectionIfNeeded(),this._matrixProjection}getSpaceHeightAtTarget(){return 2*Math.tan(this.fovy)*this.distance}setSpaceHeightAtTarget(t){this.distance=t/(2*Math.tan(.5*this.fovy))}updateProjectionIfNeeded(){if(!this.dirtyProjection)return;const t=this._fovy,e=this.screenAspectRatio,n=this._near,i=this._far,r=this._matrixProjection,s=this.zoom/Math.tan(t/2);if(r[0]=s/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!==1/0){const t=1/(n-i);r[10]=(i+n)*t,r[14]=2*i*n*t}else r[10]=-1,r[14]=-2*n;this.dirtyProjection=!0}}},"./src/camera/camera.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdCamera:()=>a});var i=n("./src/math/index.ts"),r=n("./src/math/mat3.ts"),s=n("./src/event/index.ts");class a{constructor(t={}){var e,n,o,c,h,u,d;this.eventTransformChange=new s.TgdEvent,this._screenWidth=1920,this._screenHeight=1080,this._screenAspectRatio=1920/1080,this._dirtyModelView=!0,this.dirtyModelViewInverse=!0,this._dirtyAxis=!0,this._dirtyProjection=!0,this.dirtyProjectionInverse=!0,this._near=.001,this._far=1/0,this._axisX=new i.TgdVec3,this._axisY=new i.TgdVec3,this._axisZ=new i.TgdVec3,this._matrixModelView=new i.TgdMat4,this._matrixModelViewInverse=new i.TgdMat4,this._matrixProjectionInverse=new i.TgdMat4,this._orientation=new i.TgdQuat(0,0,0,1),this._shift=new i.TgdVec3(0,0,0),this._target=new i.TgdVec3(0,0,0),this._position=new i.TgdVec3(0,0,0),this._distance=10,this._zoom=1,this.tmpMat3=new r.TgdMat3,this.tmpVec3=new i.TgdVec3,this.name=null!==(e=t.name)&&void 0!==e?e:"TgdCamera#"+a.incrementalId++,this._near=null!==(n=t.near)&&void 0!==n?n:.001,this._far=null!==(o=t.far)&&void 0!==o?o:1e6,this._distance=null!==(c=t.distance)&&void 0!==c?c:10,this._zoom=null!==(h=t.zoom)&&void 0!==h?h:1;const[l,g,m]=null!==(u=t.target)&&void 0!==u?u:[0,0,0];this.target.reset(l,g,m);const[f,p,x,v]=null!==(d=t.orientation)&&void 0!==d?d:[0,0,0,1];this.orientation.reset(f,p,x,v)}get near(){return this._near}set near(t){t!==this._near&&(this._near=t,this.dirtyProjection=!0)}get far(){return this._far}set far(t){t!==this._far&&(this._far=t,this.dirtyProjection=!0)}get screenAspectRatio(){return this._screenAspectRatio}get screenWidth(){return this._screenWidth}set screenWidth(t){t!==this._screenWidth&&(this._screenWidth=t,this.dirtyProjection=!0,this._screenAspectRatio=this._screenWidth/this._screenHeight)}get screenHeight(){return this._screenHeight}set screenHeight(t){t!==this._screenHeight&&(this._screenHeight=t,this.dirtyProjection=!0,this._screenAspectRatio=this._screenWidth/this._screenHeight)}get spaceHeightAtTarget(){return this.getSpaceHeightAtTarget()}set spaceHeightAtTarget(t){this.setSpaceHeightAtTarget(t)}get spaceWidthAtTarget(){return this.screenWidth*this.spaceHeightAtTarget/this.screenHeight}set spaceWidthAtTarget(t){this.setSpaceHeightAtTarget(t*this.screenHeight/this.screenWidth)}face(t){this._orientation.face(t),this.dirtyModelView=!0,this.dirtyAxis=!0}from(t){const{_orientation:e,_target:n,distance:i,zoom:r,screenWidth:s,screenHeight:a}=t;return this._orientation.from(e),this._target.from(n),this.distance=i,this.zoom=r,this.screenWidth=s,this.screenHeight=a,this.dirtyModelView=!0,this.dirtyAxis=!0,this.copyProjectionFrom(t),this}get axisX(){return this.updateAxisIfNeeded(),this._axisX}get axisY(){return this.updateAxisIfNeeded(),this._axisY}get axisZ(){return this.updateAxisIfNeeded(),this._axisZ}get matrixModelView(){return this.updateIfNeeded(),this._matrixModelView}get matrixModelViewInverse(){return this.dirtyModelViewInverse&&(this._matrixModelViewInverse.invert(this.matrixModelView),this.dirtyModelViewInverse=!1),this._matrixModelViewInverse}get matrixProjectionInverse(){return this.dirtyProjectionInverse&&(this._matrixProjectionInverse.invert(this.matrixProjection),this.dirtyProjectionInverse=!1),this._matrixProjectionInverse}get orientation(){return this._orientation}set orientation(t){const{_orientation:e}=this;if(t.isEqual(e))return;const[n,i,r,s]=t;e.x=n,e.y=i,e.z=r,e.w=s,this.dirtyModelView=!0,this.dirtyAxis=!0}setOrientation(t,e,n,i){const{_orientation:r}=this;return r.x=t,r.y=e,r.z=n,r.w=i,this.dirtyModelView=!0,this.dirtyAxis=!0,this}get position(){return this.updateIfNeeded(),this._position}get target(){return this._target}set target(t){this._target.from(t),this.dirtyModelView=!0}setTarget(t,e,n){const{_target:i}=this;return i.x=t,i.y=e,i.z=n,this.dirtyModelView=!0,this}get shift(){return this._shift}set shift(t){this._shift.from(t),this.dirtyModelView=!0}setShift(t,e,n){const{_shift:i}=this;return i.x=t,i.y=e,i.z=n,this.dirtyModelView=!0,this}get x(){return this._target.x}set x(t){const{_target:e}=this;t!==e.x&&(e.x=t,this.dirtyModelView=!0)}get y(){return this._target.y}set y(t){const{_target:e}=this;t!==e.y&&(e.y=t,this.dirtyModelView=!0)}get z(){return this._target.z}set z(t){const{_target:e}=this;t!==e.z&&(e.z=t,this.dirtyModelView=!0)}get distance(){return this._distance}set distance(t){this._distance!==t&&(this._distance=t,this.dirtyModelView=!0)}get zoom(){return this._zoom}set zoom(t){this._zoom!==t&&(this._zoom=t,this.dirtyModelView=!0)}moveTarget(t,e,n){const{_target:i}=this;this.updateAxisIfNeeded();const{_axisX:r,_axisY:s,_axisZ:a,tmpVec3:o}=this;o.from(r).scale(t).addWithScale(s,e).addWithScale(a,n),i.x+=o.x,i.y+=o.y,i.z+=o.z,this.dirtyModelView=!0}moveShift(t,e,n){const[i,r,s]=this._shift;this._shift.reset(t+i,e+r,n+s),this._dirtyModelView=!0}orbitAroundX(t){this.updateAxisIfNeeded();const{_axisX:e,_axisY:n,_axisZ:i,_orientation:r}=this;return n.rotateAround(e,t),i.rotateAround(e,t),r.fromAxis(e,n,i),this.dirtyModelView=!0,this}orbitAroundY(t){this.updateAxisIfNeeded();const{_axisX:e,_axisY:n,_axisZ:i,_orientation:r}=this;return e.rotateAround(n,t),i.rotateAround(n,t),r.fromAxis(e,n,i),this.dirtyModelView=!0,this}orbitAroundZ(t){this.updateAxisIfNeeded();const{_axisX:e,_axisY:n,_axisZ:i,_orientation:r}=this;return e.rotateAround(i,t),n.rotateAround(i,t),r.fromAxis(e,n,i),this.dirtyModelView=!0,this}debug(t){this._orientation.debug(`${null!=t?t:this.name} quaternion:`)}updateAxisIfNeeded(){this.dirtyAxis&&this.updateAxis()}updateAxis(){const{tmpMat3:t}=this;t.fromQuat(this._orientation),t.toAxis(this._axisX,this._axisY,this._axisZ),this.dirtyAxis=!1}updateIfNeeded(){if(!this.dirtyModelView)return;const{tmpMat3:t,tmpVec3:e,_position:n}=this,i=this._matrixModelView;this.updateAxis();const r=this._distance,{x:s,y:a,z:o}=this._shift,{x:c,y:h,z:u}=this._target,{x:d,y:l,z:g}=this._axisZ;n.x=c+r*d,n.y=h+r*l,n.z=u+r*g,n.addWithScale(this._axisX,s),n.addWithScale(this._axisY,a),n.addWithScale(this._axisZ,o),e.from(n).applyMatrix(t.transpose()).scale(-1),i.m30=e.x,i.m31=e.y,i.m32=e.z,i.fromMat3(t),this.dirtyModelView=!1}get dirtyModelView(){return this._dirtyModelView}set dirtyModelView(t){this._dirtyModelView=t,t&&(this.dirtyModelViewInverse=!0,this.eventTransformChange.dispatch(this))}get dirtyAxis(){return this._dirtyAxis}set dirtyAxis(t){this._dirtyAxis=t}get dirtyProjection(){return this._dirtyProjection}set dirtyProjection(t){this._dirtyProjection=t,t&&(this.dirtyProjectionInverse=!0)}}a.incrementalId=1},"./src/camera/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdCamera:()=>i.TgdCamera,TgdCameraOrthographic:()=>r.TgdCameraOrthographic,TgdCameraPerspective:()=>s.TgdCameraPerspective});var i=n("./src/camera/camera.ts"),r=n("./src/camera/camera-orthographic.ts"),s=n("./src/camera/camera-perspective.ts")},"./src/color/color.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdColor:()=>i});class i{constructor(t=0,e=0,n=0,i=1){this.R=1,this.G=1,this.B=1,this.A=1,this.H=1,this.S=1,this.L=1,"string"==typeof t?this.parse(t):(this.R=t,this.G=e,this.B=n,this.A=i)}parse(t){const e=function(){if(!m){const t=document.createElement("canvas");t.width=1,t.height=1;const e=t.getContext("2d",{alpha:!0,willReadFrequently:!0});if(!e)throw Error("Unable to create a 2D context!");m=e}return m}();e.clearRect(0,0,1,1),e.fillStyle=t,e.fillRect(0,0,1,1);const n=e.getImageData(0,0,1,1),[i,r,s,a]=n.data,o=1/255;this.R=i*o,this.G=r*o,this.B=s*o,this.A=a*o}toString(){const{R:t,G:e,B:n,A:i}=this;return`#${g(t)}${g(e)}${g(n)}${g(i)}`}rgb2hsl(){const t=this.R,e=this.G,n=this.B,i=Math.min(t,e,n),a=Math.max(t,e,n),c=a-i;this.L=s*(a+i),c<r?(this.H=0,this.S=0):(this.S=c/(1-Math.abs(this.L+this.L-1)),this.H=a===t?e>=n?l*((e-n)/c):l*((n-e)/c):a===e?l*(o+(n-t)/c):l*(h+(t-e)/c))}hsl2rgb(){const t=d*this.H,e=this.S,n=this.L,i=(1-Math.abs(n+n-1))*e,{R:r,G:l,B:g}=function(t,e){let n=0,i=0,r=0;const s=e*(1-Math.abs(t%o-1));return t<c?t<a?(n=e,i=s,r=0):t<o?(n=s,i=e,r=0):(n=0,i=e,r=s):t<h?(n=0,i=s,r=e):t<u?(n=s,i=0,r=e):(n=e,i=0,r=s),{R:n,G:i,B:r}}(t,i),m=n-i*s;this.R=r+m,this.G=l+m,this.B=g+m}}const r=1e-6,s=.5,a=1,o=2,c=3,h=4,u=5,d=6,l=1/d;function g(t){return Math.floor(255*t).toString(16).padStart(2,"0")}let m=null},"./src/color/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdColor:()=>i.TgdColor});var i=n("./src/color/color.ts")},"./src/context/animation/animation-manager.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdManagerAnimation:()=>i});class i{constructor(){this.animations=new Map}schedule(t){const{action:e,duration:n,easingFunction:i,repeat:r}=t;return this.animations.set(t,{start:-1,duration:n,inverseDuration:1/n,action:i?t=>e(i(t)):e,loop:1,repeat:null!=r?r:1,cancel:()=>this.cancel(t)}),t}cancel(t){this.animations.delete(t)}paint(t){for(const e of this.animations.values()){e.start<0&&(e.start=t);const n=Math.min(1,e.inverseDuration*(t-e.start));e.action(n),t>e.start+e.duration&&e.loop++,e.loop>e.repeat&&e.cancel()}}}},"./src/context/context.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdContext:()=>d});var i=n("./src/buffer/index.ts"),r=n("./src/camera/index.ts"),s=n("./src/input/index.ts"),a=n("./src/resource/index.ts"),o=n("./src/vao/index.ts"),c=n("./src/painter/group.ts"),h=n("./src/utils/index.ts"),u=n("./src/context/animation/animation-manager.ts");class d{constructor(t,e={}){var n;this.canvas=t,this.options=e,this._texturesCube=null,this.isPlaying=!1,this.requestAnimationFrame=-1,this.lastTime=-1,this.animationManager=new u.TgdManagerAnimation,this.paint=()=>{window.cancelAnimationFrame(this.requestAnimationFrame),this.requestAnimationFrame=window.requestAnimationFrame(this.actualPaint)},this.actualPaint=t=>{const{lastTime:e,gl:n}=this;if(e<0)return this.lastTime=t,void this.paint();const i=t-this.lastTime;this.lastTime=t,this._camera.screenWidth=n.drawingBufferWidth,this._camera.screenHeight=n.drawingBufferHeight,this.painters.paint(t,i),this.animationManager.paint(t),this.isPlaying&&this.paint()};const i=t.getContext("webgl2",e);if(!i)throw Error("Unable to create a WebGL2 context!");this.gl=i,this.programs=new a.TgdResourceProgram(i),this.textures2D=new a.TgdResourceTexture2D(this),this.observer=new ResizeObserver((()=>{var n;const r=t.clientWidth,s=t.clientHeight;t.width=r,t.height=s,i.viewport(0,0,r,s),this.paint(),null===(n=e.onResize)||void 0===n||n.call(e,this,t.clientWidth,t.clientHeight)})),this.observer.observe(t),this.inputs=new s.TgdInputs(t),this._camera=new r.TgdCameraPerspective,this.painters=new c.TgdPainterGroup,this.name=null!==(n=e.name)&&void 0!==n?n:"TgdContext#"+d.incrementalId++,t.style.touchAction="none"}get camera(){return this._camera}set camera(t){t!==this._camera&&(this._camera.eventTransformChange.removeListener(this.paint),t.eventTransformChange.addListener(this.paint),this._camera=t,this.paint())}get texturesCube(){return this._texturesCube||(this._texturesCube=new a.TgdResourceTextureCube(this)),this._texturesCube}animSchedule(t){return this.animationManager.schedule(t)}animCancel(t){this.animationManager.cancel(t)}get onEnter(){return this.painters.onEnter}set onEnter(t){this.painters.onEnter=t}get onExit(){return this.painters.onExit}set onExit(t){this.painters.onExit=t}get width(){return this.gl.drawingBufferWidth}get height(){return this.gl.drawingBufferHeight}get playing(){return this.isPlaying}set playing(t){t!==this.isPlaying&&(t&&this.paint(),this.isPlaying=t)}play(){this.playing=!0}pause(){this.playing=!1}has(t){return this.painters.has(t)}add(...t){this.painters.add(...t)}remove(...t){this.painters.remove(...t)}removeAll(){this.painters.removeAll()}createBuffer(t,e){return new i.TgdBuffer(this.gl,t,e)}createFramebuffer(){const t=this.gl.createFramebuffer();if(!t)throw Error("Unable to create a WebGL2 Framebuffer!");return t}createVAO(t,e,n){return new o.TgdVertexArray(this.gl,t,e,n)}takeSnapshot(t){const e=t.getContext("2d");if(!e)throw Error("[TgdContext.takeSnapshot] We cannot get a 2D context for the target canvas! Maybe it already has another type of context.");const{width:n,height:i}=t,r=(0,h.tgdCanvasCreate)(n,i),s=new d(r,this.options);this.painters.forEachChild((t=>s.add(t))),s.actualPaint(this.lastTime),s.gl.finish(),e.drawImage(r,0,0)}lookupWebglConstant(t){const{gl:e}=this;for(const n in e)if(e[n]===t)return n;return`Unknown gl[${t}]`}destroy(){window.cancelAnimationFrame(this.requestAnimationFrame),this.playing=!1,this.painters.delete(),this.observer.unobserve(this.canvas)}stateReset(){const{gl:t}=this,e=t.getParameter(t.MAX_VERTEX_ATTRIBS),n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n);for(let n=0;n<e;++n)t.disableVertexAttribArray(n),t.vertexAttribPointer(n,4,t.FLOAT,!1,0,0),t.vertexAttrib1f(n,0);t.deleteBuffer(n);const i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);for(let e=0;e<i;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_CUBE_MAP,null),t.bindTexture(t.TEXTURE_2D,null);return t.activeTexture(t.TEXTURE0),t.useProgram(null),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.DITHER),t.disable(t.SCISSOR_TEST),t.blendColor(0,0,0,0),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.clearColor(0,0,0,0),t.clearDepth(1),t.clearStencil(-1),t.colorMask(!0,!0,!0,!0),t.cullFace(t.BACK),t.depthFunc(t.LESS),t.depthMask(!0),t.depthRange(0,1),t.frontFace(t.CCW),t.hint(t.GENERATE_MIPMAP_HINT,t.DONT_CARE),t.lineWidth(1),t.pixelStorei(t.PACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.polygonOffset(0,0),t.sampleCoverage(1,!1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilMask(4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT),t}}d.incrementalId=1},"./src/context/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdContext:()=>i.TgdContext});var i=n("./src/context/context.ts")},"./src/controller/camera/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdControllerCameraOrbit:()=>i.TgdControllerCameraOrbit});var i=n("./src/controller/camera/orbit.ts")},"./src/controller/camera/orbit.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdControllerCameraOrbit:()=>s});var i=n("./src/utils/index.ts"),r=n("./src/utils/math.ts");class s{constructor(t,{minZoom:e=.001,maxZoom:n=1/0,speedZoom:s=1,speedOrbit:o=1,speedPanning:c=1,inertiaZoom:h=0,inertiaOrbit:u=0,inertiaPanning:d=0,fixedTarget:l=!1,onZoomRequest:g=a}={}){this.context=t,this.minZoom=.001,this.maxZoom=1/0,this.enabled=!0,this.speedZoom=1,this.speedOrbit=1,this.speedPanning=1,this.inertiaZoom=0,this.inertiaOrbit=0,this.inertiaPanning=0,this.fixedTarget=!1,this.animOrbit=null,this.handleMove=t=>{if(!this.enabled)return;if(t.current.t-t.previous.t<=0)return;const{context:e}=this,{keyboard:n}=e.inputs;return t.altKey||2===t.current.fingersCount?this.handlePan(t):n.isDown("z")?this.handleRotateAroundZ(t):void this.orbit(t.current.x-t.previous.x,t.current.y-t.previous.y,t.shiftKey)},this.handleMoveStart=()=>{if(!this.enabled)return;const{animOrbit:t,context:e}=this;t&&e.animCancel(t)},this.handleMoveEnd=t=>{if(!this.enabled)return;const{context:e,inertiaOrbit:n}=this;if(n>0){const r=n/(t.current.t-t.previous.t),s=t.shiftKey,a=r*(t.current.x-t.previous.x),o=r*(t.current.y-t.previous.y);let c=0;this.animOrbit={duration:n,action:t=>{const e=t-c;c=t,this.orbit(a*e,o*e,s)},easingFunction:i.tgdEasingFunctionOutQuad},e.animSchedule(this.animOrbit)}},this.handleZoom=t=>{if(!this.enabled||0===this.speedZoom||!this.onZoomRequest({altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,x:t.current.x,y:t.current.y}))return;const{context:e}=this,{camera:n}=e;let i=.1*this.speedZoom;this.context.inputs.keyboard.isDown("Shift")&&(i*=.1);const s=-t.direction*i;n.zoom=(0,r.clamp)(n.zoom*(1+s),this.minZoom,this.maxZoom),t.preventDefault(),this.fireZoomChange()};const{inputs:m}=t;m.pointer.eventMoveStart.addListener(this.handleMoveStart),m.pointer.eventMoveEnd.addListener(this.handleMoveEnd),m.pointer.eventMove.addListener(this.handleMove),m.pointer.eventZoom.addListener(this.handleZoom),this.speedOrbit=o,this.speedZoom=s,this.speedPanning=c,this.inertiaOrbit=u,this.inertiaZoom=h,this.inertiaPanning=d,this.fixedTarget=l,this.minZoom=e,this.maxZoom=n,this.onZoomRequest=g}detach(){const{inputs:t}=this.context;t.pointer.eventMove.removeListener(this.handleMove),t.pointer.eventZoom.removeListener(this.handleZoom)}orbit(t,e,n){const{context:i}=this,{camera:r}=i,{keyboard:s}=i.inputs,a=3*(n?.1:1)*this.speedOrbit,o=t*a,c=e*a;s.isDown("x")||r.orbitAroundY(-o),s.isDown("y")||r.orbitAroundX(c),this.fireOrbitChange()}handlePan(t){const{fixedTarget:e,speedPanning:n,context:i}=this,{camera:r}=i,s=.5*n*(1/r.zoom),a=(t.current.x-t.previous.x)*s*r.spaceWidthAtTarget,o=(t.current.y-t.previous.y)*s*r.spaceHeightAtTarget;e?(console.log("moveShift"),r.moveShift(-a,-o,0)):(console.log("moveTarget"),r.moveTarget(-a,-o,0)),this.fireOrbitChange()}handleRotateAroundZ(t){const{camera:e}=this.context,n=t.previous.x,i=t.previous.y;if(Math.abs(n)+Math.abs(i)===0)return;const r=t.current.x,s=t.current.y;if(Math.abs(r)+Math.abs(s)===0)return;const a=n*r+i*s,o=n*s-i*r,c=Math.atan2(o,a)*this.speedOrbit;e.orbitAroundZ(-c),this.fireOrbitChange()}fireOrbitChange(){this.context.paint()}fireZoomChange(){this.context.paint()}}const a=()=>!0},"./src/controller/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdControllerCameraOrbit:()=>i.TgdControllerCameraOrbit});var i=n("./src/controller/camera/index.ts")},"./src/dataset/dataset.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdDataset:()=>i});class i{constructor(t,e={}){var n,i,s;this._data=new ArrayBuffer(0),this._count=0,this.target=null!==(n=e.target)&&void 0!==n?n:"ARRAY_BUFFER",this.usage=null!==(i=e.usage)&&void 0!==i?i:"STATIC_DRAW";const a=null!==(s=e.divisor)&&void 0!==s?s:0;let o=0;const c={},h={};for(const e of Object.keys(t)){const n=e;c[e]=new ArrayBuffer(0);const i={dimension:r[t[n]],byteOffset:o,bytesPerElement:Float32Array.BYTES_PER_ELEMENT,divisor:a,getter:(t,e)=>(e>=t.byteLength&&(e%=t.byteLength),t.getFloat32(e,!0)),setter(t,e,n){t.setFloat32(e,n,!0)}};h[e]=i,o+=i.bytesPerElement*i.dimension}this.definitions=h,this.stride=o}get data(){return this._data}get count(){return this._count}set count(t){this._count!==t&&(this._count=t,this._data=s(this._data,t*this.stride))}getAttribAccessor(t){const e=this.getDef(t),n=new DataView(this.data),i=this.stride;return{get(t,r=0){const s=e.byteOffset+i*t+r*e.bytesPerElement;return e.getter(n,s)},set(t,r,s=0){const a=e.byteOffset+i*r+s*e.bytesPerElement;e.setter(n,a,t)}}}set(t,e,{byteOffset:n=0,byteStride:i,first:r=0,count:s=1/0,targetFirst:a=0}={}){const{bytesPerElement:o,dimension:c,byteOffset:h}=this.getDef(t),u=e instanceof ArrayBuffer?e:e.buffer,d=o*c,l=null!=i?i:d;let g=n+l*r;const m=this.stride;let f=a*m+h;this.count=Math.max(this.count,Math.min(s,Math.floor((u.byteLength-g)/l)));const p=u.byteLength-l+1,x=this._data.byteLength+h-m+1,v=new Uint8Array(u),y=new Uint8Array(this._data);let T=0;for(;T<s&&g<p&&f<x;)y.set(v.subarray(g,g+d),f),T++,g+=l,f+=m}getDef(t){const e=this.definitions[t];if(!e)throw Error(`[TgdDataset] Attribute "${String(t)}" not found in this DataSet!\nAvailable names are: ${Object.keys(this.definitions).map((t=>JSON.stringify(t))).join(", ")}.`);return e}defineAttributes(t,e){let n=0;const{definitions:i}=this;for(const r of Object.keys(i)){const s=i[r],a=e.getAttribLocation(r);t.enableVertexAttribArray(a),t.vertexAttribPointer(a,s.dimension,t.FLOAT,!1,this.stride,n),t.vertexAttribDivisor(a,s.divisor),n+=s.dimension*s.bytesPerElement}}toCode({indent:t=""}={}){const e=[];let n=0;const{definitions:i}=this;for(const t of Object.keys(i)){const r=i[t],s=`$${t}`;e.push(`const ${s} = gl.getAttribLocation(prg, "${t}")`,`gl.enableVertexAttribArray(${s})`,"gl.vertexAttribPointer(",`  ${s},`,`  ${r.dimension},  // Dimension`,"  gl.FLOAT,","  false,",`  ${this.stride},   // Stride`,`  ${n}   // Offset`,")",`gl.vertexAttribDivisor(${s}, ${r.divisor})`),n+=r.dimension*r.bytesPerElement}return e.map((e=>`${t}${e}`)).join("\n")}}const r={float:1,vec2:2,vec3:3,vec4:4},s="function"==typeof ArrayBuffer.prototype.transfer?function(t,e){return t.transfer(e)}:function(t,e){const n=new ArrayBuffer(null!=e?e:t.byteLength);return new Uint8Array(n).set(new Uint8Array(t)),n}},"./src/dataset/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdDataset:()=>i.TgdDataset});var i=n("./src/dataset/dataset.ts")},"./src/debug.ts":(t,e,n)=>{function i(t,e=6){const n=Math.pow(10,e),i=[];let r=0;for(const s of t){const t=(Math.round(s*n)/n).toFixed(e);r=Math.max(r,t.length),i.push(t)}return i.map((t=>t.padStart(r," ")))}n.r(e),n.d(e,{padColOfNumbers:()=>i})},"./src/event/event.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdEvent:()=>i});class i{constructor(){this.listeners=new Set}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}dispatch(t){this.listeners.forEach((e=>e(t)))}}},"./src/event/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdEvent:()=>i.TgdEvent});var i=n("./src/event/event.ts")},"./src/input/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdInputKeyboardImpl:()=>r.TgdInputKeyboardImpl,TgdInputPointerImpl:()=>s.TgdInputPointerImpl,TgdInputs:()=>i.TgdInputs});var i=n("./src/input/inputs.ts"),r=n("./src/input/keyboard.ts"),s=n("./src/input/pointer.ts")},"./src/input/inputs.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdInputs:()=>s});var i=n("./src/input/keyboard.ts"),r=n("./src/input/pointer.ts");class s{constructor(t){this.canvas=t,this._keyboard=null,this._pointer=null}get keyboard(){return this._keyboard||(this._keyboard=new i.TgdInputKeyboardImpl),this._keyboard}get pointer(){return this._pointer||(this._pointer=new r.TgdInputPointerImpl(this.canvas)),this._pointer}}},"./src/input/keyboard.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdInputKeyboardImpl:()=>r});var i=n("./src/event/index.ts");class r{constructor(){this.eventKeyPress=new i.TgdEvent,this.keysDown=new Set,this.keysUp=new Set,this.attached=!1,this.handleKeyDown=t=>{this.keysDown.add(t.key),this.keysUp.delete(t.key)},this.handleKeyUp=t=>{this.keysDown.delete(t.key),this.keysUp.add(t.key),this.eventKeyPress.dispatch(t)},document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp),this.attached=!0}detach(){this.attached&&(document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.attached=!1)}isUp(...t){return!this.isDown(...t)}isDown(...t){for(const e of t)if(!this.keysDown.has(e))return!1;return!0}hasClicked(t){return!!this.keysUp.has(t)&&(this.keysUp.delete(t),!0)}}},"./src/input/pointer.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdInputPointerImpl:()=>r});var i=n("./src/event/index.ts");class r{constructor(t){this.canvas=t,this.eventTap=new i.TgdEvent,this.eventMoveStart=new i.TgdEvent,this.eventMove=new i.TgdEvent,this.eventMoveEnd=new i.TgdEvent,this.eventZoom=new i.TgdEvent,this.tapDelay=300,this.controlKeys={altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},this.start={x:0,y:0,t:0,fingersCount:1},this.current={x:0,y:0,t:0,fingersCount:1},this.previous={x:0,y:0,t:0,fingersCount:1},this.pointerEvent=null,this.handleContextMenu=t=>{t.preventDefault()},this.handleCanvasWheel=t=>{let e=t.deltaX+t.deltaY+t.deltaZ;e=e>0?1:-1,this.eventZoom.dispatch(Object.assign({current:this.getPoint(t),direction:e,preventDefault:()=>t.preventDefault()},this.controlKeys))},this.handlePointerDown=t=>{if(!t.isPrimary)return;this.canvas.setPointerCapture(t.pointerId),t.preventDefault(),t.stopPropagation(),this.pointerEvent=t;const e=this.getPoint(t);this.start=this.current=this.previous=e,this.eventMoveStart.dispatch(Object.assign({start:e,current:e,previous:e},this.controlKeys))},this.handlePointerMove=t=>{t.isPrimary&&this.pointerEvent&&this.canvas&&(this.previous=this.current,this.current=this.getPoint(t),this.eventMove.dispatch(Object.assign({start:this.start,current:this.current,previous:this.previous},this.controlKeys)))},this.handlePointerUp=t=>{t.isPrimary&&this.pointerEvent&&(t.preventDefault(),this.current=this.getPoint(t),this.eventMoveEnd.dispatch(Object.assign({start:this.start,current:this.current,previous:this.previous},this.controlKeys)),this.pointerEvent=null,t.timeStamp-this.start.t<this.tapDelay&&this.eventTap.dispatch(Object.assign(Object.assign({},this.start),this.controlKeys)))},t.addEventListener("pointerdown",this.handlePointerDown,!0),t.addEventListener("wheel",this.handleCanvasWheel),t.addEventListener("contextmenu",this.handleContextMenu),t.addEventListener("pointermove",this.handlePointerMove),t.addEventListener("pointerup",this.handlePointerUp)}detach(){const{canvas:t}=this;t&&(t.removeEventListener("pointerdown",this.handlePointerDown),t.removeEventListener("wheel",this.handleCanvasWheel),t.removeEventListener("contextmenu",this.handleContextMenu),t.removeEventListener("pointermove",this.handlePointerMove),t.removeEventListener("pointerup",this.handlePointerUp))}getPoint(t){this.controlKeys={altKey:t.altKey||2===t.buttons,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey};const{left:e,top:n,width:i,height:r}=this.canvas.getBoundingClientRect();return{x:2*((t.clientX-e)/i-.5),y:-2*((t.clientY-n)/r-.5),t:t.timeStamp,fingersCount:1}}}},"./src/loader/image.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdLoaderImage:()=>r});var i=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function a(t){try{c(i.next(t))}catch(t){s(t)}}function o(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}c((i=i.apply(t,e||[])).next())}))};class r{static image(t){return i(this,void 0,void 0,(function*(){return new Promise((e=>{const n=new Image;n.onload=()=>e(n),n.onerror=()=>{console.error("Unable to load image: ",t),e(null)},n.src=t}))}))}static canvas(t){return i(this,void 0,void 0,(function*(){const e=yield r.image(t);if(!e)return null;const n=document.createElement("canvas");n.width=e.naturalWidth,n.height=e.naturalHeight;const i=n.getContext("2d");if(!i)throw Error("Unable to get a 2D context!");return i.drawImage(e,0,0),n}))}}},"./src/loader/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdLoaderImage:()=>i.TgdLoaderImage});var i=n("./src/loader/image.ts")},"./src/math/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdMat4:()=>i.TgdMat4,TgdQuat:()=>r.TgdQuat,TgdVec3:()=>s.TgdVec3,TgdVec4:()=>a.TgdVec4});var i=n("./src/math/mat4.ts"),r=n("./src/math/quat.ts"),s=n("./src/math/vec3.ts"),a=n("./src/math/vec4.ts")},"./src/math/mat3.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdMat3:()=>r});var i=n("./src/debug.ts");class r extends Float32Array{constructor(t=1,e=0,n=0,i=0,r=1,s=0,a=0,o=0,c=1){super("number"==typeof t?[t,e,n,i,r,s,a,o,c]:t)}transpose(){let t=this.m10;return this.m10=this.m01,this.m01=t,t=this.m20,this.m20=this.m02,this.m02=t,t=this.m21,this.m21=this.m12,this.m12=t,this}fromQuat({x:t,y:e,z:n,w:i}){const r=t+t,s=e+e,a=n+n,o=t*r,c=e*r,h=e*s,u=n*r,d=n*s,l=n*a,g=i*r,m=i*s,f=i*a;return this.m00=1-h-l,this.m10=c-f,this.m20=u+m,this.m01=c+f,this.m11=1-o-l,this.m21=d-g,this.m02=u-m,this.m12=d+g,this.m22=1-o-h,this}toAxis(t,e,n){return this.toAxisX(t),this.toAxisY(e),this.toAxisZ(n)}toAxisX(t){return t.x=this.m00,t.y=this.m01,t.z=this.m02,this}toAxisY(t){return t.x=this.m10,t.y=this.m11,t.z=this.m12,this}toAxisZ(t){return t.x=this.m20,t.y=this.m21,t.z=this.m22,this}scale(t){return this[0]*=t,this[1]*=t,this[2]*=t,this[3]*=t,this[4]*=t,this[5]*=t,this[6]*=t,this[7]*=t,this[8]*=t,this}get m00(){return this[0]}set m00(t){this[0]=t}get m01(){return this[1]}set m01(t){this[1]=t}get m02(){return this[2]}set m02(t){this[2]=t}get m10(){return this[3]}set m10(t){this[3]=t}get m11(){return this[4]}set m11(t){this[4]=t}get m12(){return this[5]}set m12(t){this[5]=t}get m20(){return this[6]}set m20(t){this[6]=t}get m21(){return this[7]}set m21(t){this[7]=t}get m22(){return this[8]}set m22(t){this[8]=t}debug(t="Mat3"){const e=(0,i.padColOfNumbers)([this.m00,this.m01,this.m02]),n=(0,i.padColOfNumbers)([this.m10,this.m11,this.m12]),r=(0,i.padColOfNumbers)([this.m20,this.m21,this.m22]);console.log(t),console.log("   ",[e[0],n[0],r[0]].join(" | ")),console.log("   ",[e[1],n[1],r[1]].join(" | ")),console.log("   ",[e[2],n[2],r[2]].join(" | "))}}},"./src/math/mat4.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdMat4:()=>s});var i=n("./src/debug.ts"),r=n("./src/math/vec3.ts");class s extends Float32Array{constructor(t=1,e=0,n=0,i=0,r=0,s=1,a=0,o=0,c=0,h=0,u=1,d=0,l=0,g=0,m=0,f=1){super("number"==typeof t?[t,e,n,i,r,s,a,o,c,h,u,d,l,g,m,f]:t)}multiply(t){const[e,n,i,r,s,a,o,c,h,u,d,l,g,m,f,p]=this,[x,v,y,T,b,E,w,A,P,M,I,F,_,C,O,S]=t;return this.m00=e*x+s*v+h*y+g*T,this.m10=e*b+s*E+h*w+g*A,this.m20=e*P+s*M+h*I+g*F,this.m30=e*_+s*C+h*O+g*S,this.m01=n*x+a*v+u*y+m*T,this.m11=n*b+a*E+u*w+m*A,this.m21=n*P+a*M+u*I+m*F,this.m31=n*_+a*C+u*O+m*S,this.m02=i*x+o*v+d*y+f*T,this.m12=i*b+o*E+d*w+f*A,this.m22=i*P+o*M+d*I+f*F,this.m32=i*_+o*C+d*O+f*S,this.m03=r*x+c*v+l*y+p*T,this.m13=r*b+c*E+l*w+p*A,this.m23=r*P+c*M+l*I+p*F,this.m33=r*_+c*C+l*O+p*S,this}invert(t){const[e,n,i,r,s,a,o,c,h,u,d,l,g,m,f,p]=null!=t?t:this,x=e*a-n*s,v=e*o-i*s,y=e*c-r*s,T=n*o-i*a,b=n*c-r*a,E=i*c-r*o,w=h*m-u*g,A=h*f-d*g,P=h*p-l*g,M=u*f-d*m,I=u*p-l*m,F=d*p-l*f,_=x*F-v*I+y*M+T*P-b*A+E*w;if(!_)return this;const C=1/_;return this[0]=(a*F-o*I+c*M)*C,this[1]=(i*I-n*F-r*M)*C,this[2]=(m*E-f*b+p*T)*C,this[3]=(d*b-u*E-l*T)*C,this[4]=(o*P-s*F-c*A)*C,this[5]=(e*F-i*P+r*A)*C,this[6]=(f*y-g*E-p*v)*C,this[7]=(h*E-d*y+l*v)*C,this[8]=(s*I-a*P+c*w)*C,this[9]=(n*P-e*I-r*w)*C,this[10]=(g*b-m*y+p*x)*C,this[11]=(u*y-h*b-l*x)*C,this[12]=(a*A-s*M-o*w)*C,this[13]=(e*M-n*A+i*w)*C,this[14]=(m*v-g*T-f*x)*C,this[15]=(h*T-u*v+d*x)*C,this}get translation(){const{m30:t,m31:e,m32:n}=this;return new r.TgdVec3(t,e,n)}set translation(t){this.m30=t.x,this.m31=t.y,this.m32=t.z}from(t){return this.m00=t.m00,this.m01=t.m01,this.m02=t.m02,this.m03=t.m03,this.m10=t.m10,this.m11=t.m11,this.m12=t.m12,this.m13=t.m13,this.m20=t.m20,this.m21=t.m21,this.m22=t.m22,this.m23=t.m23,this.m30=t.m30,this.m31=t.m31,this.m32=t.m32,this.m33=t.m33,this}fromMat3(t){return this.m00=t.m00,this.m01=t.m01,this.m02=t.m02,this.m10=t.m10,this.m11=t.m11,this.m12=t.m12,this.m20=t.m20,this.m21=t.m21,this.m22=t.m22,this}toAxis(t,e,n){return this.toAxisX(t),this.toAxisY(e),this.toAxisZ(n)}toAxisX(t){return t.x=this.m00,t.y=this.m01,t.z=this.m02,this}toAxisY(t){return t.x=this.m10,t.y=this.m11,t.z=this.m12,this}toAxisZ(t){return t.x=this.m20,t.y=this.m21,t.z=this.m22,this}fromQuat({x:t,y:e,z:n,w:i}){const r=t+t,s=e+e,a=n+n,o=t*r,c=e*r,h=e*s,u=n*r,d=n*s,l=n*a,g=i*r,m=i*s,f=i*a;return this.m00=1-h-l,this.m10=c-f,this.m20=u+m,this.m01=c+f,this.m11=1-o-l,this.m21=d-g,this.m02=u-m,this.m12=d+g,this.m22=1-o-h,this}get m00(){return this[0]}set m00(t){this[0]=t}get m01(){return this[1]}set m01(t){this[1]=t}get m02(){return this[2]}set m02(t){this[2]=t}get m03(){return this[3]}set m03(t){this[3]=t}get m10(){return this[4]}set m10(t){this[4]=t}get m11(){return this[5]}set m11(t){this[5]=t}get m12(){return this[6]}set m12(t){this[6]=t}get m13(){return this[7]}set m13(t){this[7]=t}get m20(){return this[8]}set m20(t){this[8]=t}get m21(){return this[9]}set m21(t){this[9]=t}get m22(){return this[10]}set m22(t){this[10]=t}get m23(){return this[11]}set m23(t){this[11]=t}get m30(){return this[12]}set m30(t){this[12]=t}get m31(){return this[13]}set m31(t){this[13]=t}get m32(){return this[14]}set m32(t){this[14]=t}get m33(){return this[15]}set m33(t){this[15]=t}debug(t="Mat4"){const e=(0,i.padColOfNumbers)([this.m00,this.m01,this.m02,this.m03]),n=(0,i.padColOfNumbers)([this.m10,this.m11,this.m12,this.m13]),r=(0,i.padColOfNumbers)([this.m20,this.m21,this.m22,this.m23]),s=(0,i.padColOfNumbers)([this.m30,this.m31,this.m32,this.m33]);console.log(t),console.log("   ",[e[0],n[0],r[0],s[0]].join(" | ")),console.log("   ",[e[1],n[1],r[1],s[1]].join(" | ")),console.log("   ",[e[2],n[2],r[2],s[2]].join(" | ")),console.log("   ",[e[3],n[3],r[3],s[3]].join(" | "))}}},"./src/math/quat.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdQuat:()=>r});var i=n("./src/math/vec4.ts");class r extends i.TgdVec4{constructor(t=0,e=0,n=0,i=1){"number"==typeof t?super(t,e,n,i):super(t)}clone(){return new r(this)}multiply(t){const[e,n,i,r]=this,[s,a,o,c]=t;return this[0]=c*e+s*r-a*i+o*n,this[1]=c*n+s*i+a*r-o*e,this[2]=c*i-s*n+a*e+o*r,this[3]=c*r-s*e-a*n-o*i,this}fromSlerp(t,e,n){const[i,r,s,a]=t;let o,c,[h,u,d,l]=e,g=i*h+r*u+s*d+a*l;if(g<0&&(g=-g,h=-h,u=-u,d=-d,l=-l),1-g>1e-6){const t=Math.acos(g),e=1/Math.sin(t);o=Math.sin((1-n)*t)*e,c=Math.sin(n*t)*e}else o=1-n,c=n;return this.x=o*i+c*h,this.y=o*r+c*u,this.z=o*s+c*d,this.w=o*a+c*l,this}fromAxis(t,e,n){const i=t.x+e.y+n.z;if(i>0){const r=Math.sqrt(i+1);this.w=.5*r;const s=.5/r;this.x=(e.z-n.y)*s,this.y=(n.x-t.z)*s,this.z=(t.y-e.x)*s}else{const i=[t,e,n];let r=0;e.y>t.x&&(r=1),n.z>i[r][r]&&(r=2);const s=(r+1)%3,a=(r+2)%3;let o=Math.sqrt(i[r][r]-i[s][s]-i[a][a]+1);this[r]=.5*o,o=.5/o,this[3]=(i[s][a]-i[a][s])*o,this[s]=(i[s][r]+i[r][s])*o,this[a]=(i[a][r]+i[r][a])*o}return this.normalize()}rotateAroundX(t){const e=.5*t,n=this[0],i=this[1],r=this[2],s=this[3],a=Math.sin(e),o=Math.cos(e);return this[0]=n*o+s*a,this[1]=i*o+r*a,this[2]=r*o-i*a,this[3]=s*o-n*a,this}rotateAroundY(t){const e=.5*t,n=this[0],i=this[1],r=this[2],s=this[3],a=Math.sin(e),o=Math.cos(e);return this[0]=n*o-r*a,this[1]=i*o+s*a,this[2]=r*o+n*a,this[3]=s*o-i*a,this}rotateAroundZ(t){const e=.5*t,n=this[0],i=this[1],r=this[2],s=this[3],a=Math.sin(e),o=Math.cos(e);return this[0]=n*o+i*a,this[1]=i*o-n*a,this[2]=r*o+s*a,this[3]=s*o-r*a,this}toAxisZ(t){const{x:e,y:n,z:i,w:r}=this,s=e+e,a=n+n,o=e*s,c=n*a,h=i*s,u=i*a,d=r*s,l=r*a;return t.x=h+l,t.y=u-d,t.z=1-o-c,t}face(t="+X+Y+Z"){const[e,n,i,r]=o[t];return this.x=e,this.y=n,this.z=i,this.w=r,this}}const s=Math.sqrt(2)/2,a=.5,o={"+X+Y+Z":[0,0,0,1],"-Z+Y+X":[0,+s,0,+s],"-X+Y-Z":[0,1,0,0],"+Z+Y-X":[0,-s,0,+s],"+X+Z-Y":[+s,0,0,+s],"+Y+Z+X":[+a,+a,+a,+a],"-X+Z+Y":[0,+s,+s,0],"-Y+Z-X":[+a,-a,-a,+a],"+X-Y-Z":[1,0,0,0],"+X-Z+Y":[-s,0,0,+s],"-X-Y+Z":[0,0,1,0],"-X-Z-Y":[0,+s,-s,0],"+Y+X-Z":[+s,+s,0,0],"+Y-X+Z":[0,0,+s,+s],"+Y-Z-X":[+a,+a,-a,-a],"-Y+X+Z":[0,0,-s,+s],"-Y-X-Z":[+s,-s,0,0],"-Y-Z+X":[+a,-a,+a,-a],"+Z+X+Y":[+a,+a,+a,-a],"+Z-X-Y":[+a,-a,+a,+a],"+Z-Y+X":[+s,0,+s,0],"-Z+X-Y":[+a,+a,-a,+a],"-Z-X+Y":[+a,-a,-a,-a],"-Z-Y-X":[+s,0,-s,0]}},"./src/math/vec3.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdVec3:()=>r});var i=n("./src/utils/math.ts");class r extends Float32Array{static newFromMix(t,e,n=.5){const i=1-n,s=i*t.x+n*e.x,a=i*t.y+n*e.y,o=i*t.z+n*e.z;return new r(s,a,o)}static distance(t,e){const n=e.x-t.x,i=e.y-t.y,r=e.z-t.z;return Math.sqrt(n*n+i*i+r*r)}constructor(t=0,e=0,n=0){if(super(3),"number"!=typeof t)return this.x=t[0],this.y=t[1],void(this.z=t[2]);this.x=t,this.y=e,this.z=n}clone(){return new r(this)}isEqual([t,e,n]){return t===this.x&&e===this.y&&n===this.z}isClose([t,e,n],i=1e-6){return!(Math.abs(t-this.x)>i||Math.abs(e-this.y)>i||Math.abs(n-this.z)>i)}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),[r,s,a]=this,[o,c,h]=t,u=c*a-h*s,d=h*r-o*a,l=o*s-c*r,g=(r*o+s*c+a*h)*(1-n);return this.x=r*n+u*i+o*g,this.y=s*n+d*i+c*g,this.z=a*n+l*i+h*g,this}applyMatrix(t){const{x:e,y:n,z:i}=this;return this.x=e*t.m00+n*t.m10+i*t.m20,this.y=e*t.m01+n*t.m11+i*t.m21,this.z=e*t.m02+n*t.m12+i*t.m22,this}from(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}fromMix(t,e,n){const[r,s,a]=t,[o,c,h]=e;return this.reset((0,i.mix)(r,o,n),(0,i.mix)(s,c,n),(0,i.mix)(a,h,n))}reset(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this}distanceToLineSquared(t,e){const[n,i,r]=this,[s,a,o]=t,[c,h,u]=e,d=c*(n-s)+h*(i-a)+u*(r-o),l=n-(s+d*c),g=i-(a+d*h),m=r-(o+d*u);return l*l+g*g+m*m}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}get z(){return this[2]}set z(t){this[2]=t}add(...t){for(const e of t)this[0]+=e.x,this[1]+=e.y,this[2]+=e.z;return this}addWithScale(t,e){return this[0]+=t.x*e,this[1]+=t.y*e,this[2]+=t.z*e,this}subtract(t){return this[0]-=t[0],this[1]-=t[1],this[2]-=t[2],this}scale(t){return this[0]*=t,this[1]*=t,this[2]*=t,this}dot(t){return this[0]*t[0]+this[1]*t[1]+this[2]*t[2]}get size(){return Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2])}normalize(){const t=this[0]*this[0]+this[1]*this[1]+this[2]*this[2];return 0===t?this:this.scale(1/Math.sqrt(t))}cross(t){const[e,n,i]=this,[r,s,a]=t;return this[0]=n*a-s*i,this[1]=i*r-a*e,this[2]=e*s-r*n,this}random(){return this[0]=Math.random()-.5,this[1]=Math.random()-.5,this[2]=Math.random()-.5,this}debug(t="vec3"){const{x:e,y:n,z:i}=this,r=[e,n,i].map((t=>t.toFixed(6)));console.log(`${t}:   `,r.join(" | "),"   length:",Math.sqrt(e*e+n*n+i*i))}}},"./src/math/vec4.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdVec4:()=>r});var i=n("./src/math/vec3.ts");class r extends Float32Array{constructor(t=0,e=0,n=0,s=1){return super(4),t instanceof r?(this.x=t.x,this.y=t.y,this.z=t.z,void(this.w=t.w)):t instanceof i.TgdVec3?(this.x=t.x,this.y=t.y,this.z=t.z,void(this.w=s)):(this.x=t,this.y=e,this.z=n,void(this.w=s))}reset(t=0,e=0,n=0,i=1){return this.x=t,this.y=e,this.z=n,this.w=i,this}from(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}clone(){return new r(this)}isEqual({x:t,y:e,z:n,w:i}){return t===this.x&&e===this.y&&n===this.z&&i===this.w}isClose({x:t,y:e,z:n,w:i},r=1e-6){return!(Math.abs(t-this.x)>r||Math.abs(e-this.y)>r||Math.abs(n-this.z)>r||Math.abs(i-this.w)>r)}applyMatrix(t){const{x:e,y:n,z:i,w:r}=this;return this.x=e*t.m00+n*t.m10+i*t.m20+r*t.m30,this.y=e*t.m01+n*t.m11+i*t.m21+r*t.m31,this.z=e*t.m02+n*t.m12+i*t.m22+r*t.m32,this.w=e*t.m03+n*t.m13+i*t.m23+r*t.m33,this}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}get z(){return this[2]}set z(t){this[2]=t}get w(){return this[3]}set w(t){this[3]=t}add(...t){for(const e of t)this[0]+=e[0],this[1]+=e[1],this[2]+=e[2],e.length>3&&(this[3]+=e[3]);return this}subtract(t){return this[0]-=t[0],this[1]-=t[1],this[2]-=t[2],t.length>3&&(this[3]-=t[3]),this}scale(t){return this[0]*=t,this[1]*=t,this[2]*=t,this[3]*=t,this}dot(t){return this[0]*t[0]+this[1]*t[1]+this[2]*t[2]+this[3]*t[3]}get size(){return Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]+this[3]*this[3])}normalize(){const t=this[0]*this[0]+this[1]*this[1]+this[2]*this[2]+this[3]*this[3];return 0===t?this:this.scale(1/Math.sqrt(t))}debug(t="vec4"){const{x:e,y:n,z:i,w:r}=this,s=[e,n,i,r].map((t=>t.toFixed(6)));console.log(`${t}:   `,s.join(" | "))}}},"./src/painter/axis/axis.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterAxis:()=>c});var i=n("./src/painter/painter.ts"),r=n("./src/dataset/index.ts"),s=n("./src/math/index.ts"),a=n("./src/painter/axis/axis.vert"),o=n("./src/painter/axis/axis.frag");class c extends i.TgdPainter{constructor(t,{x:e=0,y:n=0,z:i=0,scale:c=1}={}){super(),this.context=t;const h=t.programs.create({vert:a,frag:o});this.prg=h;const u=new r.TgdDataset({attPos:"vec3",attColor:"vec4"});u.set("attPos",new Float32Array([0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,-1,-0,-0,0,0,0,-0,-1,-0,0,0,0,-0,-0,-1]));const d=.25;u.set("attColor",new Float32Array([1,0,0,1,1,0,0,1,0,1,0,1,0,1,0,1,0,0,1,1,0,0,1,1,d,0,0,1,d,0,0,1,0,d,0,1,0,d,0,1,0,0,d,1,0,0,d,1])),this.vao=t.createVAO(h,[u]),this.translateAndScale=new s.TgdVec4(e,n,i,c)}get x(){return this.translateAndScale.x}set x(t){this.translateAndScale.x=t}get y(){return this.translateAndScale.y}set y(t){this.translateAndScale.y=t}get z(){return this.translateAndScale.z}set z(t){this.translateAndScale.z=t}get scale(){return this.translateAndScale.w}set scale(t){this.translateAndScale.w=t}delete(){this.vao.delete()}paint(){const{context:t,prg:e,vao:n,translateAndScale:i}=this,{gl:r,camera:s}=t;e.use(),e.uniform4fv("uniTS",i),e.uniformMatrix4fv("uniModelViewMatrix",s.matrixModelView),e.uniformMatrix4fv("uniProjectionMatrix",s.matrixProjection),n.bind(),r.drawArrays(r.LINES,0,12)}}},"./src/painter/axis/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterAxis:()=>i.TgdPainterAxis});var i=n("./src/painter/axis/axis.ts")},"./src/painter/background/background.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterBackground:()=>o});var i=n("./src/painter/painter.ts"),r=n("./src/dataset/dataset.ts"),s=n("./src/painter/background/background.vert"),a=n("./src/painter/background/background.frag");class o extends i.TgdPainter{constructor(t,e,{x:n=0,y:i=0,z:o=1,zoom:c=1}={}){super(),this.context=t,this.zoom=1,this.x=0,this.y=0,this.z=1,this.x=n,this.y=i,this.z=o,this.zoom=c,this.texture=e,this.program=t.programs.create({vert:s,frag:a}),console.log(""),console.log("#########################################################"),console.log("");const h=new r.TgdDataset({attPoint:"vec2",attUV:"vec2"});h.set("attPoint",new Float32Array([-1,-1,1,-1,-1,1,1,1])),console.log(new Float32Array(h.data)),h.set("attUV",new Float32Array([0,0,1,0,0,1,1,1])),console.log(new Float32Array(h.data)),this.vao=t.createVAO(this.program,[h])}delete(){const{vao:t}=this;t.delete()}paint(){const{gl:t}=this.context,{vao:e,program:n,texture:i,zoom:r,x:s,y:a,z:o}=this;n.use();const{width:c,height:h}=this.context,u=i.width*h>i.height*c,d=u?i.width*h/(c*i.height):1,l=u?1:i.height*c/(h*i.width);n.uniform2f("uniScale",d,l),n.uniform2f("uniScroll",s,a),n.uniform1f("uniZoom",1/r),n.uniform1f("uniZ",o),i.activate(n,"uniTexture"),e.bind(),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}},"./src/painter/background/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterBackground:()=>i.TgdPainterBackground});var i=n("./src/painter/background/background.ts")},"./src/painter/clear.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterClear:()=>r});var i=n("./src/painter/painter.ts");class r extends i.TgdPainter{constructor(t,e={}){var n,i;super(),this.context=t,this.options=e,this.red=1,this.green=.7,this.blue=0,this.alpha=1,this.depth=1;const{gl:r}=t,s=null!==(n=e.color)&&void 0!==n?n:[0,0,0,1],a=null!==(i=e.depth)&&void 0!==i?i:1;this.clearMask=0;let o=!1;if(e.color&&(this.clearMask|=r.COLOR_BUFFER_BIT,o=!0),"number"==typeof e.depth&&(this.clearMask|=r.DEPTH_BUFFER_BIT,o=!0),!o)throw Error("[TgdPainterClear] You must give at least a color or a depth in the constructor!");[this.red,this.green,this.blue,this.alpha]=s,this.depth=a}delete(){}paint(){const{clearMask:t,context:e,red:n,green:i,blue:r,alpha:s,depth:a,options:o}=this,{gl:c}=e;o.color&&c.clearColor(n,i,r,s),"number"==typeof o.depth&&c.clearDepth(a),c.clear(t)}}},"./src/painter/depth.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterDepth:()=>r});var i=n("./src/painter/painter.ts");class r extends i.TgdPainter{constructor(t,{enabled:e=!0,func:n="LESS",mask:i=!0,rangeMin:r=0,rangeMax:s=1}={}){super(),this.context=t,this.enabled=e,this.func=n,this.mask=i,this.rangeMin=r,this.rangeMax=s}delete(){}paint(){const{gl:t}=this.context,{enabled:e}=this;if(!e)return void t.disable(t.DEPTH_TEST);const{func:n,mask:i,rangeMin:r,rangeMax:s}=this;t.enable(t.DEPTH_TEST),t.depthFunc(t[n]),t.depthMask(i),t.depthRange(r,s)}update(){}}},"./src/painter/group.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterGroup:()=>r});var i=n("./src/painter/painter.ts");class r extends i.TgdPainter{constructor(t=[],{onEnter:e,onExit:n}={}){super(),this.active=!0,this.onEnter=e,this.onExit=n,this.painters=[...t]}forEachChild(t){this.painters.forEach(((e,n)=>t(e,n)))}has(t){return this.painters.includes(t)}add(...t){for(const e of t)this.painters.push(e)}remove(...t){for(const e of t){const t=this.painters.indexOf(e);t<0||(this.painters.splice(t,1),e.delete())}}removeAll(){for(const t of this.painters)t.delete();this.painters.splice(0,this.painters.length)}delete(){for(const t of this.painters)t.delete();this.painters.splice(0,this.painters.length)}paint(t,e){var n,i;if(this.active){null===(n=this.onEnter)||void 0===n||n.call(this,t,e);for(const n of this.painters)n.active&&n.paint(t,e);null===(i=this.onExit)||void 0===i||i.call(this,t,e)}}}},"./src/painter/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterAxis:()=>i.TgdPainterAxis,TgdPainterBackground:()=>r.TgdPainterBackground,TgdPainterClear:()=>s.TgdPainterClear,TgdPainterDepth:()=>a.TgdPainterDepth,TgdPainterGroup:()=>o.TgdPainterGroup,TgdPainterLogic:()=>c.TgdPainterLogic,TgdPainterMeshGltf:()=>h.TgdPainterMeshGltf,TgdPainterMeshNormals:()=>h.TgdPainterMeshNormals,TgdPainterSegments:()=>u.TgdPainterSegments,TgdPainterSegmentsData:()=>u.TgdPainterSegmentsData,TgdPainterSkybox:()=>d.TgdPainterSkybox});var i=n("./src/painter/axis/index.ts"),r=n("./src/painter/background/index.ts"),s=n("./src/painter/clear.ts"),a=n("./src/painter/depth.ts"),o=n("./src/painter/group.ts"),c=n("./src/painter/logic.ts"),h=n("./src/painter/mesh/index.ts"),u=n("./src/painter/segments/index.ts"),d=n("./src/painter/skybox/index.ts")},"./src/painter/logic.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterLogic:()=>r});var i=n("./src/painter/painter.ts");class r extends i.TgdPainter{constructor(t){super(),this.logicFunction=t}delete(){}paint(t,e){this.logicFunction(t,e)}}},"./src/painter/mesh/gltf/gltf.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterMeshGltf:()=>c});var i=n("./src/dataset/index.ts"),r=n("./src/painter/painter.ts"),s=n("./src/painter/mesh/gltf/shader.frag"),a=n("./src/painter/mesh/gltf/shader.vert"),o=n("./src/math/index.ts");class c extends r.TgdPainter{constructor(t,e){super(),this.context=t,this.bboxMin=null,this.bboxMax=null,this.paint=()=>{const{context:t,prg:e}=this,{gl:n,camera:i}=t;n.enable(n.CULL_FACE),n.cullFace(n.BACK),e.use(),e.uniformMatrix4fv("uniModelViewMatrix",i.matrixModelView),e.uniformMatrix4fv("uniProjectionMatrix",i.matrixProjection),this.vao.bind(),n.drawElements(n.TRIANGLES,this.elementsCount,this.elementsType,0),this.vao.unbind()};const n=t.programs.create({vert:a,frag:s}),r=new i.TgdDataset({POSITION:"vec3",NORMAL:"vec3"});this.dataset=r;const{asset:o,meshIndex:c,primitiveIndex:h=0}=e;o.setAttrib(r,"POSITION",c,h),o.setAttrib(r,"NORMAL",c,h);const{elemType:u,elemData:d,elemCount:l}=o.getMeshPrimitiveIndices(c,h);this.prg=n,this.vao=t.createVAO(n,[r],d),this.elementsType=u,this.elementsCount=l}computeBoundingBox(){if(this.bboxMin&&this.bboxMax)return{min:this.bboxMin,max:this.bboxMax};const{dataset:t}=this,{get:e}=t.getAttribAccessor("POSITION"),n=new o.TgdVec3(e(0,0),e(0,1),e(0,2)),i=new o.TgdVec3(n);for(let r=1;r<t.count;r++){const t=e(r,0),s=e(r,1),a=e(r,2);n.x=Math.min(n.x,t),i.x=Math.max(i.x,t),n.y=Math.min(n.y,s),i.y=Math.max(i.y,s),n.z=Math.min(n.z,a),i.z=Math.max(i.z,a)}return this.bboxMin=n,this.bboxMax=i,{min:n,max:i}}delete(){this.vao.delete()}}},"./src/painter/mesh/gltf/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterMeshGltf:()=>i.TgdPainterMeshGltf});var i=n("./src/painter/mesh/gltf/gltf.ts")},"./src/painter/mesh/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterMeshGltf:()=>i.TgdPainterMeshGltf,TgdPainterMeshNormals:()=>r.TgdPainterMeshNormals});var i=n("./src/painter/mesh/gltf/index.ts"),r=n("./src/painter/mesh/normals/index.ts")},"./src/painter/mesh/normals/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterMeshNormals:()=>i.TgdPainterMeshNormals});var i=n("./src/painter/mesh/normals/normals.ts")},"./src/painter/mesh/normals/normals.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterMeshNormals:()=>o});var i=n("./src/dataset/index.ts"),r=n("./src/painter/painter.ts"),s=n("./src/painter/mesh/normals/shader.frag"),a=n("./src/painter/mesh/normals/shader.vert");class o extends r.TgdPainter{constructor(t,e){super(),this.context=t,this.paint=()=>{const{context:t,prg:e}=this,{gl:n,camera:i}=t;n.enable(n.CULL_FACE),n.cullFace(n.BACK),e.use(),e.uniformMatrix4fv("uniModelViewMatrix",i.matrixModelView),e.uniformMatrix4fv("uniProjectionMatrix",i.matrixProjection),this.vao.bind(),n.drawElements(n.TRIANGLES,this.elementsCount,this.elementsType,0),this.vao.unbind()};const{attPosition:n,attNormal:r,elements:o,count:c,type:h}=e;if(!r)throw Error("This mesh has no normal!");const u=t.programs.create({vert:a,frag:s}),d=new i.TgdDataset({attPosition:"vec3",attNormal:"vec3"});d.set("attPosition",n),d.set("attNormal",r),this.prg=u,this.vao=t.createVAO(u,[d],o),this.elementsType=t.gl[h],this.elementsCount=c}delete(){this.vao.delete()}}},"./src/painter/painter.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainter:()=>i});class i{constructor(){this.active=!0}}},"./src/painter/segments/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterSegments:()=>i.TgdPainterSegments,TgdPainterSegmentsData:()=>i.TgdPainterSegmentsData});var i=n("./src/painter/segments/segments.ts")},"./src/painter/segments/segments.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterSegments:()=>o,TgdPainterSegmentsData:()=>c});var i=n("./src/painter/painter.ts"),r=n("./src/dataset/index.ts"),s=n("./src/painter/segments/segments.vert"),a=n("./src/painter/segments/segments.frag");class o extends i.TgdPainter{constructor(t,e,{roundness:n=3,minRadius:i=0}={}){if(super(),this.context=t,this.minRadius=0,this.radiusMultiplier=1,this.radiusConstant=1,this.radiusSwitch=0,this.light=1,this.shiftZ=0,this.minRadius=i,n>125)throw Error("[TgdPainterSegments] Max roundness is 125!");if(n<0)throw Error("[TgdPainterSegments] Min roundness is 0!");const o=t.textures2D.create({magFilter:"NEAREST",minFilter:"NEAREST",wrapR:"CLAMP_TO_EDGE",wrapS:"CLAMP_TO_EDGE",wrapT:"CLAMP_TO_EDGE"});o.makePalette(["#f00","#0f0","#00f"]),this.colorTexture=o;const c=t.programs.create({vert:s,frag:a});this.prg=c;const{capsule:h,elements:u}=function(t){const e=[0,0,0,1,0,0,-1,0,0,0,0,1,1,0,1,-1,0,1],n=[0,3,1,3,4,1,0,2,5,3,0,5];if(t>0){let i=1,r=4,s=6;for(let a=0;a<t;a++){const o=Math.PI*(a+1)/(t+1),c=Math.cos(o),h=Math.sin(o);e.push(c,h,0),n.push(0,i,s),i=s,s++,e.push(c,-h,1),n.push(3,s,r),r=s,s++}n.push(0,i,2),n.push(3,5,r)}const i=new r.TgdDataset({attOffset:"vec3"});return i.set("attOffset",new Float32Array(e)),{capsule:i,elements:new Uint8Array(n)}}(n),d=e.makeDataset();this.vao=t.createVAO(c,[h,d],u),this.vertexCount=u.length,this.instanceCount=d.count}delete(){this.vao.delete()}paint(t,e){const{context:n,prg:i,vao:r,colorTexture:s,vertexCount:a,instanceCount:o,light:c,radiusMultiplier:h,radiusConstant:u,radiusSwitch:d,shiftZ:l}=this,{gl:g,camera:m}=n;i.use();const f=this.minRadius*m.spaceHeightAtTarget/(m.zoom*m.screenHeight);i.uniform1f("uniMinRadius",f),i.uniform1f("uniLight",c),i.uniform1f("uniShiftZ",l),i.uniform1f("uniRadiusMultiplier",h),i.uniform1f("uniRadiusConstant",u),i.uniform1f("uniRadiusSwitch",d),s.activate(i,"uniTexture"),i.uniformMatrix4fv("uniModelViewMatrix",m.matrixModelView),i.uniformMatrix4fv("uniProjectionMatrix",m.matrixProjection),r.bind(),g.drawElementsInstanced(g.TRIANGLES,a,g.UNSIGNED_BYTE,0,o)}}class c{constructor(){this._count=0,this.attAxyzr=[],this.attAuv=[],this.attAinfluence=[],this.attBxyzr=[],this.attBuv=[],this.attBinfluence=[]}get count(){return this._count}add(t,e,n=[0,0],i=[0,0],r=1,s=1){this.attAxyzr.push(...t),this.attAuv.push(...n),this.attAinfluence.push(r),this.attBxyzr.push(...e),this.attBuv.push(...i),this.attBinfluence.push(s),this._count++}makeDataset(){const t=new r.TgdDataset({attAxyzr:"vec4",attAuv:"vec2",attAinfluence:"float",attBxyzr:"vec4",attBuv:"vec2",attBinfluence:"float"},{divisor:1});return t.set("attAxyzr",new Float32Array(this.attAxyzr)),t.set("attAuv",new Float32Array(this.attAuv)),t.set("attAinfluence",new Float32Array(this.attAinfluence)),t.set("attBxyzr",new Float32Array(this.attBxyzr)),t.set("attBuv",new Float32Array(this.attBuv)),t.set("attBinfluence",new Float32Array(this.attBinfluence)),t}}},"./src/painter/skybox/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterSkybox:()=>i.TgdPainterSkybox});var i=n("./src/painter/skybox/skybox.ts")},"./src/painter/skybox/skybox.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdPainterSkybox:()=>h});var i=n("./src/painter/painter.ts"),r=n("./src/dataset/dataset.ts"),s=n("./src/camera/index.ts"),a=n("./src/math/index.ts"),o=n("./src/painter/skybox/skybox.vert"),c=n("./src/painter/skybox/skybox.frag");class h extends i.TgdPainter{constructor(t,e){var n;super(),this.context=t,this.matrix=new a.TgdMat4,this.tmpMat=new a.TgdMat4,this.camera=null!==(n=e.camera)&&void 0!==n?n:new s.TgdCameraPerspective,this.texture=t.texturesCube.create(e),this.program=t.programs.create({vert:o,frag:c});const i=new r.TgdDataset({attPoint:"vec2"});i.set("attPoint",new Float32Array([-1,1,1,1,-1,-1,1,-1])),this.vao=t.createVAO(this.program,[i])}delete(){const{vao:t}=this;t.delete()}paint(){const{context:t,vao:e,program:n,texture:i}=this,{gl:r}=t;n.use(),n.uniformMatrix4fv("uniMatrix",this.matrix),i.activate(n,"uniTexture"),e.bind(),r.drawArrays(r.TRIANGLE_STRIP,0,4);const{camera:s,matrix:a,tmpMat:o}=this;s!==t.camera&&(s.orientation=t.camera.orientation),a.from(s.matrixProjection),o.fromMat3(s.matrixModelView),o.m30=0,o.m31=0,o.m32=0,o.m33=1,o.m03=0,o.m13=0,o.m23=0,a.multiply(o).invert()}}},"./src/parser/for-each-line.ts":(t,e,n)=>{n.r(e),n.d(e,{forEachLine:()=>i});const i=function*(t){const e=t.length;let n=0,i=0;for(;n>-1&&n<e&&(n=t.indexOf("\n",i),!(n<0));)yield t.substring(i,n).trim(),i=n+1;return t.substring(i).trim()}},"./src/parser/gltf/gltf.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdParserGLTransfertFormatBinary:()=>r});var i=n("./src/parser/gltf/parser.ts");class r{constructor(t){this.cacheImages=new Map,this.cacheImageURLs=new Map,this.cacheBufferViewDatas=new Map;try{const e=(0,i.parseGLB)(t);console.log("🚀 [gltf] data.gltf = ",e.gltf);for(const t of e.chunks)console.log("ArrayBuffer:",t.byteLength);this.gltf=e.gltf,this.chunks=e.chunks}catch(t){const e=t instanceof Error?t.message:JSON.stringify(t);throw Error(`[TgdParserGLTransfertFormatBinary] ${e}`)}}getAccessor(t=0){var e;const n=null===(e=this.gltf.accessors)||void 0===e?void 0:e[t];if(!n)throw Error(`Asset has no accessor with index #${t}!`);return n}getMesh(t=0){var e;const n=null===(e=this.gltf.meshes)||void 0===e?void 0:e[t];if(!n)throw Error(`Asset has no mesh with index #${t}!`);return n}getMeshPrimitive(t=0,e=0){const n=this.getMesh(t).primitives[e];if(!n)throw Error(`Asset has no primitive #${e} in mesh #${t}!`);return n}getMeshPrimitiveIndices(t=0,e=0){var n,i;const r=this.getMeshPrimitive(t,e),s=this.getAccessor(null!==(n=r.indices)&&void 0!==n?n:0),a=this.getBufferViewData(null!==(i=s.bufferView)&&void 0!==i?i:0);return{elemType:s.componentType,elemData:a,elemCount:s.count}}loadImage(t){return e=this,n=void 0,r=function*(){const e=this.cacheImages.get(t);if(e)return e;const n=this.getImageURL(t);if(!n)return;const i=new Promise((t=>{const e=new Image;e.src=n,e.onload=()=>{t(e)},e.onerror=()=>{t(void 0)}}));return this.cacheImages.set(t,i),i},new((i=void 0)||(i=Promise))((function(t,s){function a(t){try{c(r.next(t))}catch(t){s(t)}}function o(t){try{c(r.throw(t))}catch(t){s(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(a,o)}c((r=r.apply(e,n||[])).next())}));var e,n,i,r}getImageURL(t){var e;const n=this.cacheImageURLs.get(t);if(n)return n;const{gltf:i}=this,r=null===(e=i.images)||void 0===e?void 0:e[t];if(!r)return;const s=this.getBufferViewData(r.bufferView);if(!s)return;const a=new Blob([s],{type:r.mimeType}),o=URL.createObjectURL(a);return this.cacheImageURLs.set(t,o),o}getBufferViewData(t){var e;const n=this.cacheBufferViewDatas.get(t);if(n)return n;const{gltf:i}=this,r=null===(e=i.bufferViews)||void 0===e?void 0:e[t];if(!r)throw Error(`No bufferView with index #${t}!`);const s=this.chunks[r.buffer].slice(r.byteOffset,r.byteOffset+r.byteLength);return this.cacheBufferViewDatas.set(t,s),s}setAttrib(t,e,n,i=0,r){var s,a,o,c,h;const{gltf:u}=this,d=null!==(a=null===(s=u.meshes)||void 0===s?void 0:s[n].primitives[i].attributes[null!=r?r:e])&&void 0!==a?a:-1,l=null===(o=u.accessors)||void 0===o?void 0:o[d];if(!l)throw Error(`No attribute "${null!=r?r:e}" for primitive #${i} of mesh #${n}!`);const g=null!==(c=l.bufferView)&&void 0!==c?c:0,m=null===(h=u.bufferViews)||void 0===h?void 0:h[g];if(!m)throw Error(`No bufferView with index #${g}!`);const f=this.getBufferViewData(g);t.set(e,f,{byteStride:m.byteStride,byteOffset:l.byteOffset,count:l.count})}}},"./src/parser/gltf/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdParserGLTransfertFormatBinary:()=>i.TgdParserGLTransfertFormatBinary});var i=n("./src/parser/gltf/gltf.ts")},"./src/parser/gltf/parser.ts":(t,e,n)=>{n.r(e),n.d(e,{parseGLB:()=>r});var i=n("./src/types/gltf.ts");function r(t){const e=new DataView(t);if(1179937895!==e.getUint32(0,!0))throw Error("Invalid magic number for GLB file!");const n=e.getUint32(4,!0);if(2!==n)throw Error(`We support only version 2, but this file is in version ${n}!`);const r=e.getUint32(8,!0);let s={};const a=[];let o=12;for(;o<r;){const n=e.getUint32(o,!0);o+=4;const r=e.getUint32(o,!0);o+=4;const c=t.slice(o,o+n);if(o+=n,1313821514===r){const t=(new TextDecoder).decode(c);try{s=JSON.parse(t),console.log(s),(0,i.assertTgdFormatGltf)(s)}catch(e){throw console.error("Unable to parse this JSON file:",t),console.error(e),Error("Invalid JSON data in the chunk!")}}else{if(5130562!==r)throw Error(`We got an invalid chunk type: 0x${r.toString(16).padStart(8,"0")}!`);a.push(c)}}return{gltf:s,chunks:a}}},"./src/parser/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdParserGLTransfertFormatBinary:()=>i.TgdParserGLTransfertFormatBinary,TgdParserMeshWavefront:()=>r.TgdParserMeshWavefront});var i=n("./src/parser/gltf/index.ts"),r=n("./src/parser/mesh/wavefront.ts")},"./src/parser/mesh/wavefront.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdParserMeshWavefront:()=>s});var i=n("./src/parser/for-each-line.ts"),r=n("./src/math/index.ts");class s{constructor(){this.name="Mesh",this.attPosition=[],this.attNormal=[],this.attUV=[],this.elements=[],this.elementIndex=0,this.mapVertices=new Map,this.points=[],this.normals=[],this.verticesPerTriangle=[],this.normalPerTriangle=[],this.trianglesPerVertex=[],this.uvs=[],this.onObject=t=>{this.name=t},this.onVertex=(t,e,n)=>{this.points.push([t,e,n])},this.onNormal=(t,e,n)=>{this.normals.push([t,e,n])},this.onTexture=(t,e)=>{this.uvs.push([t,e])},this.onFace=t=>{if(3!==t.length)throw Error("We can only deal with triangles!");const e=t.map(this.getElem);this.elements.push(...e),this.normalPerTriangle.push(new r.TgdVec3(0,0,0)),this.verticesPerTriangle.push(e);const n=this.normalPerTriangle.length-1;e.forEach((t=>{var e,i;null!==(e=(i=this.trianglesPerVertex)[t])&&void 0!==e||(i[t]=[]),this.trianglesPerVertex[t].push(n)}))},this.getElem=t=>{var e;const n=this.key(t),i=null!==(e=this.mapVertices.get(n))&&void 0!==e?e:-1;if(i>-1)return i;const[r,s,a]=this.points[t.vertex];if(this.attPosition.push(r,s,a),"number"==typeof t.normal){const[e,n,i]=this.normals[t.normal];this.attNormal.push(e,n,i)}if("number"==typeof t.uv){const[e,n]=this.uvs[t.uv];this.attUV.push(e,n)}return this.mapVertices.set(n,this.elementIndex),this.elementIndex++}}parse(t,{computeNormals:e}={}){this.reset();const{onVertex:n,onNormal:r,onTexture:s,onFace:o,onObject:c,name:h,elements:u}=this;!function(t,e={}){const{onVertex:n,onNormal:r,onTexture:s,onFace:o,onObject:c}=e;for(const e of(0,i.forEachLine)(t)){const t=e.trimStart();if(n&&t.startsWith("v ")){const e=t.substring(2).split(" ").map((t=>Number(t)));a(e)&&n(...e)}else if(o&&t.startsWith("f "))o(t.substring(2).split(" ").map((t=>{const[e,n,i]=t.split("/");return{vertex:Number(e)-1,normal:i?Number(i)-1:void 0,uv:n?Number(n)-1:void 0}})));else if(r&&t.startsWith("vn ")){const e=t.substring(3).split(" ").map((t=>Number(t)));a(e)&&r(...e)}else if(s&&t.startsWith("vt ")){const[e,n,i]=t.substring(3).split(" ").map((t=>Number(t)));s(e,n,i)}else c&&t.startsWith("o ")&&c(t.substring(2))}}(t,{onVertex:n,onNormal:r,onTexture:s,onFace:o,onObject:c}),e&&this.computeNormals();const d={name:h,count:u.length,attPosition:new Float32Array(this.attPosition)};this.attNormal.length>0&&(d.attNormal=new Float32Array(this.attNormal)),this.attUV.length>0&&(d.attUV=new Float32Array(this.attUV));const{elementIndex:l}=this;return l<=256?Object.assign(Object.assign({},d),{type:"UNSIGNED_BYTE",elements:new Uint8Array(u)}):l<=65536?Object.assign(Object.assign({},d),{type:"UNSIGNED_SHORT",elements:new Uint16Array(u)}):Object.assign(Object.assign({},d),{type:"UNSIGNED_INT",elements:new Uint32Array(u)})}computeNormals(){const t=new r.TgdVec3,e=new r.TgdVec3,n=new r.TgdVec3;this.normalPerTriangle.forEach(((i,r)=>{const[s,a,o]=this.verticesPerTriangle[r];this.readVertexInto(s,t),this.readVertexInto(a,e).subtract(t),this.readVertexInto(o,n).subtract(t),i.from(e.cross(n).normalize())})),this.attNormal=[];for(let t=0;t<this.elementIndex;t++){const e=new r.TgdVec3(0,0,0);this.trianglesPerVertex[t].forEach((t=>e.add(this.normalPerTriangle[t])));const[n,i,s]=e.normalize();this.attNormal.push(n,i,s)}}reset(){this.name="Mesh",this.attPosition=[],this.attNormal=[],this.attUV=[],this.elements=[],this.elementIndex=0,this.points=[],this.normals=[],this.verticesPerTriangle=[],this.trianglesPerVertex=[],this.normalPerTriangle=[],this.uvs=[],this.mapVertices.clear(),this.mapVertices.clear()}key(t){return`${t.vertex}/${t.normal}`}readVertexInto(t,e){const n=this.attPosition,i=3*t;return e.reset(n[i+0],n[i+1],n[i+2]),e}}function a(t){return 3===t.length}},"./src/program/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdProgramImpl:()=>i.TgdProgramImpl});var i=n("./src/program/program.ts")},"./src/program/program.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdProgramImpl:()=>i});class i{constructor(t,e){var n;this.gl=t,this.code=e;const i=t.createProgram();if(!i)throw Error("Unable to create WebGLProgram!");const r=this.createShader("VERTEX_SHADER",e.vert);t.attachShader(i,r);const a=this.createShader("FRAGMENT_SHADER",e.frag);if(t.attachShader(i,a),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){const r=null!==(n=t.getProgramInfoLog(i))&&void 0!==n?n:"";console.warn(r);const a=s(r);throw o("Vertex Shader",e.vert,a),o("Fragment Shader",e.frag,a),new Error("Could NOT link WebGL2 program!\n"+r)}this.program=i,this.shaders=[r,a],this.uniformsLocations=this.getUniformsLocations(),t.detachShader(i,r),t.deleteShader(r),t.detachShader(i,a),t.deleteShader(a)}toCode({indent:t=""}={}){return["function createProgram(gl: WebGL2RenderingContext) {","  const prg = gl.createProgram()","  const vertexShader = gl.createShader(gl.VERTEX_SHADER)",`  gl.shaderSource(vertexShader, \`${this.code.vert}\`)`,"  gl.compileShader(vertexShader)","  const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER)",`  gl.shaderSource(fragmentShader, \`${this.code.frag}\`)`,"  gl.compileShader(fragmentShader)","  gl.attachShader(prg, vertexShader)","  gl.attachShader(prg, fragmentShader)","  gl.linkProgram(prg)","  return prg","}"].map((e=>`${t}${e}`)).join("\n")}getAttribLocation(t){const{gl:e,program:n}=this,i=e.getAttribLocation(n,t);if(i<0)throw Error(`Attribute "${t}" not found!`);return i}getUniformLocation(t){const{uniformsLocations:e}=this,n=Object.keys(e);if(0===t.length)return console.warn(`Uniform "${t}" has not been found: there is no active uniform in this program!`),0;const i=e[t];return i||console.warn(`No active uniform found with name "${t}"!\nAvailable names are: ${n.join(", ")}.`),i}uniform1f(t,e){const{gl:n}=this;n.uniform1f(this.getUniformLocation(t),e)}uniform2f(t,e,n){const{gl:i}=this;i.uniform2f(this.getUniformLocation(t),e,n)}uniform3f(t,e,n,i){const{gl:r}=this;r.uniform3f(this.getUniformLocation(t),e,n,i)}uniform3fv(t,e){const{gl:n}=this;n.uniform3fv(this.getUniformLocation(t),e)}uniform4f(t,e,n,i,r){const{gl:s}=this;s.uniform4f(this.getUniformLocation(t),e,n,i,r)}uniform4fv(t,e){const{gl:n}=this;n.uniform4fv(this.getUniformLocation(t),e)}uniform1i(t,e){const{gl:n}=this;n.uniform1i(this.getUniformLocation(t),e)}uniform2i(t,e,n){const{gl:i}=this;i.uniform2i(this.getUniformLocation(t),e,n)}uniform3i(t,e,n,i){const{gl:r}=this;r.uniform3i(this.getUniformLocation(t),e,n,i)}uniform4i(t,e,n,i,r){const{gl:s}=this;s.uniform4i(this.getUniformLocation(t),e,n,i,r)}uniform1ui(t,e){const{gl:n}=this;n.uniform1ui(this.getUniformLocation(t),e)}uniform2ui(t,e,n){const{gl:i}=this;i.uniform2ui(this.getUniformLocation(t),e,n)}uniform3ui(t,e,n,i){const{gl:r}=this;r.uniform3ui(this.getUniformLocation(t),e,n,i)}uniform4ui(t,e,n,i,r){const{gl:s}=this;s.uniform4ui(this.getUniformLocation(t),e,n,i,r)}uniformMatrix4fv(t,e){const{gl:n}=this;n.uniformMatrix4fv(this.getUniformLocation(t),!1,e)}use(){const{gl:t,program:e}=this;t.useProgram(e)}delete(){const{gl:t}=this;this.shaders.forEach((e=>t.deleteShader(e))),t.deleteProgram(this.program)}createShader(t,e){const{gl:n}=this,i=n.createShader(n[t]);if(!i)throw Error(`Unable to create a WebGLShader of type "${t}"!`);n.shaderSource(i,e),n.compileShader(i);const r=n.getShaderInfoLog(i);if(r)throw console.error(`Error in ${t} code:`,r),o(t,e,s(r)),Error(`Unable to compile ${t}!`);return i}getUniformsLocations(){const{gl:t,program:e}=this,n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);if("number"!=typeof n)throw Error("Unable to get the number of uniforms in a WebGLProgram!");const i={};for(let r=0;r<n;r++){const n=t.getActiveUniform(e,r);if(!n)continue;const s=t.getUniformLocation(e,n.name);if(null===s)throw Error(`Unable to get location for uniform "${n.name}"!`);i[n.name]=s}return i}}const r=/^ERROR:[ \t]+([0-9]+):([0-9]+):/g;function s(t){const e=[],n=[];for(const i of t.split("\n")){r.lastIndex=-1;const t=r.exec(i);t&&(e.push(parseInt(t[2],10)),n.push(i.substring(t[0].length).trim()))}return{lines:e,messages:n}}function a(t,e=!1){return`color:#fff;background:${t};font-family:monospace;font-size:80%;font-weight:${e?"bolder":"100"}`}function o(t,e,n){console.log(`%c${t}`,"font-weight:bolder;font-size:120%"),e.split("\n").forEach(((t,e)=>{const i=e+1,r=(1e-4*i).toFixed(4).substring(2),s=n.lines.includes(i)?"#f00":"#000";console.log(`%c${r}  %c${t}`,a(s),a(s,!0)),n.lines.includes(i)&&console.error(n.messages[n.lines.indexOf(i)])}))}},"./src/resource/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdResource:()=>r.TgdResource,TgdResourceProgram:()=>i.TgdResourceProgram,TgdResourceTexture2D:()=>s.TgdResourceTexture2D,TgdResourceTextureCube:()=>a.TgdResourceTextureCube});var i=n("./src/resource/program.ts"),r=n("./src/resource/resource.ts"),s=n("./src/resource/texture2d.ts"),a=n("./src/resource/textureCube.ts")},"./src/resource/program.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdResourceProgram:()=>s});var i=n("./src/resource/resource.ts"),r=n("./src/program/index.ts");class s extends i.TgdResource{constructor(t){super(),this.gl=t}actualCreate(t){return new r.TgdProgramImpl(this.gl,t)}actualDelete(t){t instanceof r.TgdProgramImpl&&t.delete()}makeKeyFromInput(t){return JSON.stringify(t)}}},"./src/resource/resource.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdResource:()=>r});let i=1;class r{constructor(){this.keys=new Map,this.objects=new Map,this.references=new Map}create(t,e){var n,r;const s=null!==(n=null!=e?e:this.makeKeyFromInput(t))&&void 0!==n?n:"TgdResource:"+i++,a=null!==(r=this.references.get(s))&&void 0!==r?r:0;if(a<1){const e=this.actualCreate(t,s);return this.keys.set(e,s),this.objects.set(s,e),this.references.set(s,1),e}const o=this.objects.get(s);if(!o)throw Error("[TgdResource.create] Panic!");return this.references.set(s,a+1),o}delete(t){var e;const n=this.keys.get(t);if(!n)return;const i=null!==(e=this.references.get(n))&&void 0!==e?e:0;i<1||(i>1?this.references.set(n,i-1):(this.keys.delete(t),this.objects.delete(n),this.references.delete(n),this.actualDelete(t)))}makeKeyFromInput(t){return null}}},"./src/resource/texture2d.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdResourceTexture2D:()=>s});var i=n("./src/resource/resource.ts"),r=n("./src/texture/index.ts");class s extends i.TgdResource{constructor(t){super(),this.context=t}getDefaultEmpty(){return this.create({width:1,height:1},"@tgd/DefaultTexture2D")}actualCreate(t,e){return new r.TgdTexture2DImpl(this.context,e,t)}actualDelete(t){t instanceof r.TgdTexture2DImpl&&t.delete()}}},"./src/resource/textureCube.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdResourceTextureCube:()=>s});var i=n("./src/resource/resource.ts"),r=n("./src/texture/index.ts");class s extends i.TgdResource{constructor(t){super(),this.context=t}actualCreate(t){return new r.TgdTextureCubeImpl(this.context,t)}actualDelete(t){t instanceof r.TgdTextureCubeImpl&&t.delete()}}},"./src/texture/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdTexture2DImpl:()=>i.TgdTexture2DImpl,TgdTextureCubeImpl:()=>r.TgdTextureCubeImpl});var i=n("./src/texture/texture2d.ts"),r=n("./src/texture/textureCube.ts")},"./src/texture/texture2d.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdTexture2DImpl:()=>a});var i=n("./src/loader/index.ts"),r=n("./src/event/event.ts"),s=n("./src/utils/index.ts");class a{constructor(t,e,n={}){var i;this.context=t,this.id=e,this.eventImageUpdate=new r.TgdEvent,this._width=0,this._height=0,this._image=null;const{gl:s}=t;this.options=Object.assign({wrapS:"REPEAT",wrapT:"REPEAT",wrapR:"REPEAT",minFilter:"NEAREST_MIPMAP_LINEAR",magFilter:"LINEAR",width:1,height:1,internalFormat:"RGBA"},n);const a=s.createTexture();if(!a)throw Error("Unable to create a WebGLTexture!");this.glTexture=a;const{wrapS:o="CLAMP_TO_EDGE",wrapT:c="CLAMP_TO_EDGE",wrapR:h="CLAMP_TO_EDGE",minFilter:u="LINEAR",magFilter:d="LINEAR",generateMipMap:l=!1,width:g=1,height:m=1,internalFormat:f="RGBA",data:p}=this.options,x=null!==(i=this.options.format)&&void 0!==i?i:f;s.bindTexture(s.TEXTURE_2D,a),s.texImage2D(s.TEXTURE_2D,0,s[f],g,m,0,s[x],s.UNSIGNED_BYTE,null!=p?p:null),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s[o]),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s[c]),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_R,s[h]),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s[u]),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s[d]),n.image?this.loadImage(n.image):l&&s.generateMipmap(s.TEXTURE_2D)}getParameter(t){const{context:e,glTexture:n}=this,{gl:i}=e;return i.bindTexture(i.TEXTURE_2D,n),i.getTexParameter(i.TEXTURE_2D,i[t])}makePalette(t,e=0){const n=e>0?e:t.length,i=Math.ceil(t.length/n),{canvas:r,ctx:a}=(0,s.tgdCanvasCreateWithContext2D)(n,i);let o=0;for(let e=0;e<i;e++)for(let i=0;i<n;i++)a.fillStyle=t[o++],a.fillRect(i,e,1,1);this.loadImage(r)}fillHorizontalGradient(t,...e){this.fillGradient(t,1,1,0,...e)}fillverticalGradient(t,...e){this.fillGradient(1,t,0,1,...e)}fillGradient(t,e,n,i,...r){const{canvas:a,ctx:o}=(0,s.tgdCanvasCreateWithContext2D)(t,e),c=o.createLinearGradient(0,0,t*n,e*i);for(let t=0;t<r.length;t++)c.addColorStop(t/(r.length-1),r[t]);o.fillStyle=c,o.fillRect(0,0,t,e),this.loadImage(a),a.style.position="fixed"}delete(){this.context.gl.deleteTexture(this.glTexture)}get image(){return this._image}get width(){return this._width}get height(){return this._height}bind(){const{gl:t}=this.context;t.bindTexture(t.TEXTURE_2D,this.glTexture)}activate(t,e,n=0){const{context:i,glTexture:r}=this,{gl:s}=i;s.activeTexture(s.TEXTURE0+n),s.bindTexture(s.TEXTURE_2D,r),t.uniform1i(e,n)}loadImage(t){if("string"==typeof t)return void i.TgdLoaderImage.image(t).then((e=>{e?(this.loadImage(e),this.context.paint()):console.error("[TgdTexture2D] Unable to load image:",t)})).catch(console.error);const{context:e,glTexture:n}=this,{gl:r}=e;r.bindTexture(r.TEXTURE_2D,n),t instanceof Image&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),r.generateMipmap(r.TEXTURE_2D),this._width=t.width,this._height=t.height,this._image=t,this.eventImageUpdate.dispatch(this)}}},"./src/texture/textureCube.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdTextureCubeImpl:()=>r});var i=n("./src/loader/index.ts");class r{constructor(t,e){this.context=t,this._width=0,this._height=0,this.numberOfImagesToLoad=6;const{gl:n}=t,i=n.createTexture();if(!i)throw Error("Unable to create a WebGLTexture!");this.texture=i,this.loadImage(n.TEXTURE_CUBE_MAP_POSITIVE_X,e.imagePosX),this.loadImage(n.TEXTURE_CUBE_MAP_NEGATIVE_X,e.imageNegX),this.loadImage(n.TEXTURE_CUBE_MAP_POSITIVE_Y,e.imagePosY),this.loadImage(n.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.imageNegY),this.loadImage(n.TEXTURE_CUBE_MAP_POSITIVE_Z,e.imagePosZ),this.loadImage(n.TEXTURE_CUBE_MAP_NEGATIVE_Z,e.imageNegZ)}delete(){this.context.gl.deleteTexture(this.texture)}get ready(){return 0===this.numberOfImagesToLoad}get width(){return this._width}get height(){return this._height}bind(){const{gl:t}=this.context;t.bindTexture(t.TEXTURE_CUBE_MAP,this.texture)}activate(t,e,n=0){if(!this.ready)return;const{context:i,texture:r}=this,{gl:s}=i;s.activeTexture(s.TEXTURE0+n),s.bindTexture(s.TEXTURE_CUBE_MAP,r),t.uniform1i(e,n)}loadImage(t,e){if("string"==typeof e)return void i.TgdLoaderImage.image(e).then((n=>{n?this.loadImage(t,n):console.error(`[TgdTextureCube] Unable to load image "${e}":`,e)})).catch((t=>{console.error(`[TgdTextureCube] Unable to load image "${e}":`,t)}));const{width:n,height:r}=e;if(n!==r)throw Error(`Images in a CubeMap must be squares, but we got ${n}×${r}!`);if(0===this._width)this._width=n,this._height=r;else if(this._width!==n||this._height!==r)throw Error(`Images in a CubeMap must all have the same size, but we got ${this._width}×${this._height} and ${n}×${r}!`);const{context:s,texture:a}=this,{gl:o}=s;o.bindTexture(o.TEXTURE_CUBE_MAP,a),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,e instanceof Image),o.texImage2D(t,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,e),this.numberOfImagesToLoad--,0===this.numberOfImagesToLoad&&(o.generateMipmap(o.TEXTURE_CUBE_MAP),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR_MIPMAP_LINEAR),s.paint())}}},"./src/types/context.ts":(t,e,n)=>{n.r(e)},"./src/types/gltf.ts":(t,e,n)=>{n.r(e),n.d(e,{assertTgdFormatGltf:()=>r});var i=n("./src/types/guards.ts");function r(t){(0,i.assertType)(t,["partial",{accessors:["array",{bufferView:["?","number"],byteOffset:["?","number"],componentType:"number",normalized:["?","boolean"],count:"number",type:"string",name:["?","string"]}],meshes:["array",{name:"string",primitives:["array",{attributes:["map","number"],indices:["?","number"],mode:["?","number"]}]}],images:["array",{bufferView:"number",mimeType:"string",name:"string"}],bufferViews:["array",{buffer:"number",byteLength:"number",byteOffset:"number",byteStride:["?","number"],target:["?","number"]}]}])}},"./src/types/guards.ts":(t,e,n)=>{function i(t){return!!t&&!Array.isArray(t)&&"object"==typeof t}function r(t){return"string"==typeof t}function s(t){return"number"==typeof t}function a(t){return"boolean"==typeof t}function o(t){return!!t&&t instanceof ArrayBuffer}function c(t){if(!Array.isArray(t))return!1;for(const e of t)if(!r(e))return!1;return!0}function h(t,e="data"){if(!s(t))throw Error(`${e} was expected to be a number but we got ${typeof t}!`)}function u(t,e="data"){if(!r(t))throw Error(`${e} was expected to be a string but we got ${typeof t}!`)}function d(t,e="data"){if(t&&!r(t))throw Error(`${e} was expected to be a string but we got ${typeof t}!`)}function l(t,e="data"){if(!a(t))throw Error(`${e} was expected to be a boolean but we got ${typeof t}!`)}function g(t,e="data"){if(!i(t))throw Error(`${e} was expected to be an object but we got ${typeof t}!`)}function m(t,e="data"){if(!Array.isArray(t))throw Error(`${e} was expected to be an Array but we got ${typeof t}!`)}function f(t,e="data"){if(!o(t))throw Error(`${e} was expected to be an ArrayBuffer but we got ${typeof t}!`)}function p(t,e="data"){if(t&&!o(t))throw Error(`${e} was expected to be an ArrayBuffer but we got ${typeof t}!`)}function x(t,e){try{return v(t,e),!0}catch(t){return!1}}function v(t,e,n="data"){if("unknown"===e)return;if("null"===e){if(null!==t)throw Error(`Expected ${n} to be null and not a ${typeof t}!`);return}if("string"==typeof e){if(typeof t!==e)throw Error(`Expected ${n} to be a ${e} and not a ${typeof t}!`);return}if(Array.isArray(e)){const[r]=e;switch(r){case"array":return void function(t,e,n){if(!Array.isArray(t))throw Error(`Expected ${e} to be an array and not a ${typeof t}!`);const[,i]=n;for(let n=0;n<t.length;n+=1)v(t[n],i,`${e}[${n}]`)}(t,n,e);case"map":return void function(t,e,n){if(!i(t))throw Error(`Expected ${e} to be an object and not a ${typeof t}!`);const[,r]=n;for(const n of Object.keys(t))"string"==typeof n&&v(t[n],r,`${e}[${n}]`)}(t,n,e);case"?":return void function(t,e,n){if(void 0===t)return;const[,i]=n;v(t,i,e)}(t,n,e);case"|":return void function(t,e,n){const[,...i]=n;let r=Error(`No type has been defined for this alternative: ${JSON.stringify(n)}!`);for(const n of i)try{return void v(t,n,e)}catch(t){t instanceof Error&&(r=t)}throw r}(t,n,e);case"tuple":return void function(t,e,[,...n]){if(m(t),n.length!==t.length)throw Error(`Expected ${e} to have ${n.length} elements, not ${t.length}!`);for(let i=0;i<n.length;i++){const r=n[i];v(t[i],r,`${e}[$i]`)}}(t,n,e);case"partial":return void function(t,e,[,n]){g(t,e);for(const i of Object.keys(n)){if("string"!=typeof i)continue;const r=t[i];void 0!==r&&v(r,n[i],`${e}.${i}`)}}(t,n,e);case"literal":return void function(t,e,n){const[,...i]=n;for(const e of i)if(t===e)return;throw Error(`Expected ${e} to be a literal (${i.map((t=>`"${t}"`)).join(" | ")})!`)}(t,n,e);default:if(r.startsWith("array("))return void function(t,e,n,i){if(!Array.isArray(t))throw Error(`Expected ${e} to be an array and not a ${typeof t}!`);if(t.length!==i)throw Error(`${e} was expected to have a length of ${i}, but we got ${t.length}!`);const[,r]=n;for(let n=0;n<t.length;n+=1)v(t[n],r,`${e}[${n}]`)}(t,n,e,parseInt(r.substring(6,r.length-1),10));throw Error(`Don't know how to create a type guard for this kind of type: ${JSON.stringify(e)}`)}}if("object"!=typeof t)throw Error(`Expected ${n} to be an object and not a ${typeof t}!`);const r=t;for(const t of Object.keys(e))"string"==typeof t&&v(r[t],e[t],`${n}.${t}`)}n.r(e),n.d(e,{assertArray:()=>m,assertArrayBuffer:()=>f,assertBoolean:()=>l,assertNumber:()=>h,assertObject:()=>g,assertOptionalArrayBuffer:()=>p,assertOptionalString:()=>d,assertString:()=>u,assertType:()=>v,isArrayBuffer:()=>o,isBoolean:()=>a,isNumber:()=>s,isObject:()=>i,isString:()=>r,isStringArray:()=>c,isType:()=>x})},"./src/types/index.ts":(t,e,n)=>{n.r(e),n("./src/types/context.ts"),n("./src/types/input-keyboard.ts"),n("./src/types/input-pointer.ts"),n("./src/types/mesh.ts"),n("./src/types/program.ts"),n("./src/types/texture2d.ts"),n("./src/types/textureCube.ts"),n("./src/types/webgl.ts")},"./src/types/input-keyboard.ts":(t,e,n)=>{n.r(e)},"./src/types/input-pointer.ts":(t,e,n)=>{n.r(e)},"./src/types/mesh.ts":(t,e,n)=>{n.r(e)},"./src/types/program.ts":(t,e,n)=>{n.r(e)},"./src/types/texture2d.ts":(t,e,n)=>{n.r(e)},"./src/types/textureCube.ts":(t,e,n)=>{n.r(e)},"./src/types/webgl.ts":(t,e,n)=>{n.r(e)},"./src/utils/animation/camera.ts":(t,e,n)=>{n.r(e),n.d(e,{tgdAnimCreateCameraInterpolation:()=>s});var i=n("./src/math/index.ts"),r=n("./src/utils/math.ts");function s(t,e){var n,s,a,o,c,h;const u=t.spaceHeightAtTarget,d=t.distance,l=t.zoom,g=new i.TgdQuat(t.orientation),m=new i.TgdVec3(t.target),f=new i.TgdVec3(t.shift),p=null!==(n=e.spaceHeightAtTarget)&&void 0!==n?n:u,x=null!==(s=e.distance)&&void 0!==s?s:d,v=null!==(a=e.zoom)&&void 0!==a?a:l,y=new i.TgdQuat(null!==(o=e.orientation)&&void 0!==o?o:g),T=new i.TgdVec3(null!==(c=e.target)&&void 0!==c?c:m),b=new i.TgdVec3(null!==(h=e.shift)&&void 0!==h?h:f),E=new i.TgdQuat,w=new i.TgdVec3,A=new i.TgdVec3;return e=>{t.spaceHeightAtTarget=(0,r.mix)(u,p,e),t.distance=(0,r.mix)(d,x,e),t.zoom=(0,r.mix)(l,v,e),t.orientation=E.fromSlerp(g,y,e).normalize(),t.target=w.fromMix(m,T,e),t.shift=A.fromMix(f,b,e)}}},"./src/utils/animation/index.ts":(t,e,n)=>{n.r(e),n.d(e,{tgdAnimCreateCameraInterpolation:()=>i.tgdAnimCreateCameraInterpolation});var i=n("./src/utils/animation/camera.ts")},"./src/utils/canvas.ts":(t,e,n)=>{function i(t,e){const n=document.createElement("canvas");return n.width=t,n.height=e,n}function r(t,e,n){const i=document.createElement("canvas");i.width=t,i.height=e;const r=i.getContext("2d",n);if(!r)throw Error("Unable to create 2D context!");return{canvas:i,ctx:r}}n.r(e),n.d(e,{tgdCanvasCreate:()=>i,tgdCanvasCreateWithContext2D:()=>r})},"./src/utils/ease-func/ease-func.ts":(t,e,n)=>{function i(t){return t}function r(t){return 1-Math.cos(t*Math.PI/2)}function s(t){return Math.sin(t*Math.PI/2)}function a(t){return-(Math.cos(Math.PI*t)-1)/2}function o(t){return t*t}function c(t){return 1-(1-t)*(1-t)}function h(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}function u(t){return t*t*t}function d(t){return 1-Math.pow(1-t,3)}function l(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}function g(t){return t*t*t*t}function m(t){return 1-Math.pow(1-t,4)}function f(t){return t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2}function p(t){return t*t*t*t*t}function x(t){return 1-Math.pow(1-t,5)}function v(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2}function y(t){return 0===t?0:Math.pow(2,10*t-10)}function T(t){return 1===t?1:1-Math.pow(2,-10*t)}function b(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}function E(t){return 1-Math.sqrt(1-Math.pow(t,2))}function w(t){return Math.sqrt(1-Math.pow(t-1,2))}function A(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2}function P(t){return 2.70158*t*t*t-1.70158*t*t}function M(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}function I(t){const e=2.5949095;return t<.5?Math.pow(2*t,2)*(7.189819*t-e)/2:(Math.pow(2*t-2,2)*((e+1)*(2*t-2)+e)+2)/2}function F(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*e)}function _(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1}function C(t){const e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1}function O(t){return 1-S(1-t)}function S(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375}function R(t){return t<.5?(1-S(1-2*t))/2:(1+S(2*t-1))/2}n.r(e),n.d(e,{tgdEasingFunctionInBack:()=>P,tgdEasingFunctionInBounce:()=>O,tgdEasingFunctionInCirc:()=>E,tgdEasingFunctionInCubic:()=>u,tgdEasingFunctionInElastic:()=>F,tgdEasingFunctionInExpo:()=>y,tgdEasingFunctionInOutBack:()=>I,tgdEasingFunctionInOutBounce:()=>R,tgdEasingFunctionInOutCirc:()=>A,tgdEasingFunctionInOutCubic:()=>l,tgdEasingFunctionInOutElastic:()=>C,tgdEasingFunctionInOutExpo:()=>b,tgdEasingFunctionInOutQuad:()=>h,tgdEasingFunctionInOutQuart:()=>f,tgdEasingFunctionInOutQuint:()=>v,tgdEasingFunctionInOutSine:()=>a,tgdEasingFunctionInQuad:()=>o,tgdEasingFunctionInQuart:()=>g,tgdEasingFunctionInQuint:()=>p,tgdEasingFunctionInSine:()=>r,tgdEasingFunctionLinear:()=>i,tgdEasingFunctionOutBack:()=>M,tgdEasingFunctionOutBounce:()=>S,tgdEasingFunctionOutCirc:()=>w,tgdEasingFunctionOutCubic:()=>d,tgdEasingFunctionOutElastic:()=>_,tgdEasingFunctionOutExpo:()=>T,tgdEasingFunctionOutQuad:()=>c,tgdEasingFunctionOutQuart:()=>m,tgdEasingFunctionOutQuint:()=>x,tgdEasingFunctionOutSine:()=>s})},"./src/utils/ease-func/index.ts":(t,e,n)=>{n.r(e),n.d(e,{tgdEasingFunctionInBack:()=>i.tgdEasingFunctionInBack,tgdEasingFunctionInBounce:()=>i.tgdEasingFunctionInBounce,tgdEasingFunctionInCirc:()=>i.tgdEasingFunctionInCirc,tgdEasingFunctionInCubic:()=>i.tgdEasingFunctionInCubic,tgdEasingFunctionInElastic:()=>i.tgdEasingFunctionInElastic,tgdEasingFunctionInExpo:()=>i.tgdEasingFunctionInExpo,tgdEasingFunctionInOutBack:()=>i.tgdEasingFunctionInOutBack,tgdEasingFunctionInOutBounce:()=>i.tgdEasingFunctionInOutBounce,tgdEasingFunctionInOutCirc:()=>i.tgdEasingFunctionInOutCirc,tgdEasingFunctionInOutCubic:()=>i.tgdEasingFunctionInOutCubic,tgdEasingFunctionInOutElastic:()=>i.tgdEasingFunctionInOutElastic,tgdEasingFunctionInOutExpo:()=>i.tgdEasingFunctionInOutExpo,tgdEasingFunctionInOutQuad:()=>i.tgdEasingFunctionInOutQuad,tgdEasingFunctionInOutQuart:()=>i.tgdEasingFunctionInOutQuart,tgdEasingFunctionInOutQuint:()=>i.tgdEasingFunctionInOutQuint,tgdEasingFunctionInOutSine:()=>i.tgdEasingFunctionInOutSine,tgdEasingFunctionInQuad:()=>i.tgdEasingFunctionInQuad,tgdEasingFunctionInQuart:()=>i.tgdEasingFunctionInQuart,tgdEasingFunctionInQuint:()=>i.tgdEasingFunctionInQuint,tgdEasingFunctionInSine:()=>i.tgdEasingFunctionInSine,tgdEasingFunctionLinear:()=>i.tgdEasingFunctionLinear,tgdEasingFunctionOutBack:()=>i.tgdEasingFunctionOutBack,tgdEasingFunctionOutBounce:()=>i.tgdEasingFunctionOutBounce,tgdEasingFunctionOutCirc:()=>i.tgdEasingFunctionOutCirc,tgdEasingFunctionOutCubic:()=>i.tgdEasingFunctionOutCubic,tgdEasingFunctionOutElastic:()=>i.tgdEasingFunctionOutElastic,tgdEasingFunctionOutExpo:()=>i.tgdEasingFunctionOutExpo,tgdEasingFunctionOutQuad:()=>i.tgdEasingFunctionOutQuad,tgdEasingFunctionOutQuart:()=>i.tgdEasingFunctionOutQuart,tgdEasingFunctionOutQuint:()=>i.tgdEasingFunctionOutQuint,tgdEasingFunctionOutSine:()=>i.tgdEasingFunctionOutSine});var i=n("./src/utils/ease-func/ease-func.ts")},"./src/utils/fetch/fetch.ts":(t,e,n)=>{n.r(e),n.d(e,{tgdFetchArrayBuffer:()=>r});var i=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function a(t){try{c(i.next(t))}catch(t){s(t)}}function o(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}c((i=i.apply(t,e||[])).next())}))};function r(t){return i(this,void 0,void 0,(function*(){return(yield fetch(t)).arrayBuffer()}))}},"./src/utils/fetch/index.ts":(t,e,n)=>{n.r(e),n.d(e,{tgdFetchArrayBuffer:()=>i.tgdFetchArrayBuffer});var i=n("./src/utils/fetch/fetch.ts")},"./src/utils/fullscreen.ts":(t,e,n)=>{n.r(e),n.d(e,{tgdFullscreenExit:()=>a,tgdFullscreenRequest:()=>s,tgdFullscreenTest:()=>r,tgdFullscreenToggle:()=>o});var i=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function a(t){try{c(i.next(t))}catch(t){s(t)}}function o(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}c((i=i.apply(t,e||[])).next())}))};function r(t){const e=document.fullscreenElement;if(!t||!e)return!1;let n=t.parentElement;for(;n;){if(n===document.fullscreenElement)return e.clientWidth===t.clientWidth&&e.clientHeight===t.clientHeight;n=n.parentElement}return document.fullscreenElement===t}function s(t,e={navigationUI:"hide"}){return i(this,void 0,void 0,(function*(){if(!t)return!1;try{return yield t.requestFullscreen(e),!0}catch(t){return!1}}))}function a(){return i(this,void 0,void 0,(function*(){if(!document.fullscreenElement)return!1;try{return yield document.exitFullscreen(),!0}catch(t){return!1}}))}function o(t,e={navigationUI:"hide"}){return i(this,void 0,void 0,(function*(){return!!t&&(r(t)?a():s(t,e))}))}},"./src/utils/index.ts":(t,e,n)=>{n.r(e),n.d(e,{tgdAnimCreateCameraInterpolation:()=>i.tgdAnimCreateCameraInterpolation,tgdCanvasCreate:()=>r.tgdCanvasCreate,tgdCanvasCreateWithContext2D:()=>r.tgdCanvasCreateWithContext2D,tgdEasingFunctionInBack:()=>s.tgdEasingFunctionInBack,tgdEasingFunctionInBounce:()=>s.tgdEasingFunctionInBounce,tgdEasingFunctionInCirc:()=>s.tgdEasingFunctionInCirc,tgdEasingFunctionInCubic:()=>s.tgdEasingFunctionInCubic,tgdEasingFunctionInElastic:()=>s.tgdEasingFunctionInElastic,tgdEasingFunctionInExpo:()=>s.tgdEasingFunctionInExpo,tgdEasingFunctionInOutBack:()=>s.tgdEasingFunctionInOutBack,tgdEasingFunctionInOutBounce:()=>s.tgdEasingFunctionInOutBounce,tgdEasingFunctionInOutCirc:()=>s.tgdEasingFunctionInOutCirc,tgdEasingFunctionInOutCubic:()=>s.tgdEasingFunctionInOutCubic,tgdEasingFunctionInOutElastic:()=>s.tgdEasingFunctionInOutElastic,tgdEasingFunctionInOutExpo:()=>s.tgdEasingFunctionInOutExpo,tgdEasingFunctionInOutQuad:()=>s.tgdEasingFunctionInOutQuad,tgdEasingFunctionInOutQuart:()=>s.tgdEasingFunctionInOutQuart,tgdEasingFunctionInOutQuint:()=>s.tgdEasingFunctionInOutQuint,tgdEasingFunctionInOutSine:()=>s.tgdEasingFunctionInOutSine,tgdEasingFunctionInQuad:()=>s.tgdEasingFunctionInQuad,tgdEasingFunctionInQuart:()=>s.tgdEasingFunctionInQuart,tgdEasingFunctionInQuint:()=>s.tgdEasingFunctionInQuint,tgdEasingFunctionInSine:()=>s.tgdEasingFunctionInSine,tgdEasingFunctionLinear:()=>s.tgdEasingFunctionLinear,tgdEasingFunctionOutBack:()=>s.tgdEasingFunctionOutBack,tgdEasingFunctionOutBounce:()=>s.tgdEasingFunctionOutBounce,tgdEasingFunctionOutCirc:()=>s.tgdEasingFunctionOutCirc,tgdEasingFunctionOutCubic:()=>s.tgdEasingFunctionOutCubic,tgdEasingFunctionOutElastic:()=>s.tgdEasingFunctionOutElastic,tgdEasingFunctionOutExpo:()=>s.tgdEasingFunctionOutExpo,tgdEasingFunctionOutQuad:()=>s.tgdEasingFunctionOutQuad,tgdEasingFunctionOutQuart:()=>s.tgdEasingFunctionOutQuart,tgdEasingFunctionOutQuint:()=>s.tgdEasingFunctionOutQuint,tgdEasingFunctionOutSine:()=>s.tgdEasingFunctionOutSine,tgdFetchArrayBuffer:()=>a.tgdFetchArrayBuffer,tgdFullscreenExit:()=>o.tgdFullscreenExit,tgdFullscreenRequest:()=>o.tgdFullscreenRequest,tgdFullscreenTest:()=>o.tgdFullscreenTest,tgdFullscreenToggle:()=>o.tgdFullscreenToggle});var i=n("./src/utils/animation/index.ts"),r=n("./src/utils/canvas.ts"),s=n("./src/utils/ease-func/index.ts"),a=n("./src/utils/fetch/index.ts"),o=n("./src/utils/fullscreen.ts")},"./src/utils/math.ts":(t,e,n)=>{function i(t,e,n){return t<e?e:t>n?n:t}function r(t,e,n){return(1-n)*t+n*e}n.r(e),n.d(e,{clamp:()=>i,mix:()=>r})},"./src/vao/index.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdVertexArray:()=>i.TgdVertexArray});var i=n("./src/vao/vao.ts")},"./src/vao/vao.ts":(t,e,n)=>{n.r(e),n.d(e,{TgdVertexArray:()=>r});var i=n("./src/buffer/index.ts");class r{constructor(t,e,n,r){this.gl=t,this.datasets=n,this.elements=r,this.drawBuffers=[],this.elemBuffer=null;const s=t.createVertexArray();if(!s)throw Error("Unable to create VertexArrayObject!");if(this.vao=s,e&&n){if(t.bindVertexArray(s),this.drawBuffers=n.map((n=>{const r=new i.TgdBuffer(t,n.data,{target:n.target,usage:n.usage});return r.bind(),n.defineAttributes(t,e),r})),r){const e=new i.TgdBuffer(t,r,{target:"ELEMENT_ARRAY_BUFFER"});e.bind(),this.elemBuffer=e}t.bindVertexArray(null)}}toCode({indent:t=""}={}){var e,n;const i=["function createVAO(","  gl: WebGL2RenderingContext,",`  prg: WebGLProgram${null===(e=this.datasets)||void 0===e?void 0:e.map(((t,e)=>`, data${e}: ArrayBuffer`)).join("")}`,") {","  const vao = gl.createVertexArray()","  gl.bindVertexArray(vao)"];return null===(n=this.datasets)||void 0===n||n.forEach(((e,n)=>{i.push(`  const buff${n} = gl.createBuffer()`,`  gl.bindBuffer(gl.${e.target}, buff${n})`,`  gl.bufferData(gl.${e.target}, data${n}, gl.${e.usage})`,e.toCode({indent:`${t}  `}))})),i.push("  return vao","}"),i.map((e=>`${t}${e}`)).join("\n")}bind(){this.gl.bindVertexArray(this.vao)}unbind(){this.gl.bindVertexArray(null)}delete(){const{gl:t,vao:e,drawBuffers:n,elemBuffer:i}=this;t.deleteVertexArray(e),n.forEach((t=>t.delete())),i&&i.delete()}}},"./src/painter/axis/axis.frag":t=>{t.exports="#version 300 es\n\nprecision mediump float;\n\nin vec4 varColor;\n\nout vec4 FragColor;\n\nvoid main() {\n    FragColor = varColor;\n}"},"./src/painter/axis/axis.vert":t=>{t.exports="#version 300 es\n\nprecision mediump float;\n\nuniform vec4 uniTS;\nuniform mat4 uniModelViewMatrix;\nuniform mat4 uniProjectionMatrix;\n\nin vec3 attPos;\nin vec4 attColor;\n\nout vec4 varColor;\n\nvoid main() {\n    varColor = attColor;\n    vec3 translate = uniTS.xyz;\n    float scale = uniTS.w;\n    gl_Position = uniProjectionMatrix \n        * uniModelViewMatrix \n        * vec4(attPos * scale + translate, 1.0);\n}\n"},"./src/painter/background/background.frag":t=>{t.exports="#version 300 es\n\nprecision mediump float;\n\nuniform sampler2D uniTexture;\nin vec2 varUV;\nout vec4 FragColor;\n\nvoid main() {\n    FragColor = texture(uniTexture, varUV);\n}"},"./src/painter/background/background.vert":t=>{t.exports="#version 300 es\n\nuniform float uniZoom;\nuniform vec2 uniScale;\nuniform vec2 uniScroll;\nuniform float uniZ;\nin vec2 attPoint;\nin vec2 attUV;\nout vec2 varUV;\n\nvoid main() {\n    varUV = (attUV + uniScroll) * uniZoom;\n    float x = uniScale.x * attPoint.x;\n    float y = uniScale.y * attPoint.y;\n    gl_Position = vec4(x, y, uniZ, 1.0);\n}"},"./src/painter/mesh/gltf/shader.frag":t=>{t.exports="#version 300 es\n\nprecision highp float;\n\nin vec3 varNormal;\nout vec4 FragColor;\n\nconst vec3 SHIFT = vec3(1.0, 1.0, 1.0);\n\nvoid main() {\n    vec3 normal = normalize(varNormal);\n    vec3 color = (normal + SHIFT) * 0.5;\n    FragColor = vec4(color, 1.0);\n}\n"},"./src/painter/mesh/gltf/shader.vert":t=>{t.exports="#version 300 es\n\nprecision mediump float;\n\nuniform mat4 uniModelViewMatrix;\nuniform mat4 uniProjectionMatrix;\n/**\n * Positon and normal.\n */\nin vec4 POSITION;\nin vec3 NORMAL;\n\nout vec3 varNormal;\n\nvoid main() {\n    varNormal = NORMAL;\n    gl_Position = uniProjectionMatrix * uniModelViewMatrix * POSITION;\n}\n"},"./src/painter/mesh/normals/shader.frag":t=>{t.exports="#version 300 es\n\nprecision highp float;\n\nin vec3 varNormal;\nout vec4 FragColor;\n\nconst vec3 SHIFT = vec3(1.0, 1.0, 1.0);\n\nvoid main() {\n    vec3 normal = normalize(varNormal);\n    vec3 color = (normal + SHIFT) * 0.5;\n    FragColor = vec4(color, 1.0);\n}\n"},"./src/painter/mesh/normals/shader.vert":t=>{t.exports="#version 300 es\n\nprecision mediump float;\n\nuniform mat4 uniModelViewMatrix;\nuniform mat4 uniProjectionMatrix;\n/**\n * Positon and normal.\n */\nin vec4 attPosition;\nin vec3 attNormal;\n\nout vec3 varNormal;\n\nvoid main() {\n    varNormal = attNormal;\n    gl_Position = uniProjectionMatrix * uniModelViewMatrix * attPosition;\n}\n"},"./src/painter/segments/segments.frag":t=>{t.exports="#version 300 es\n\nprecision mediump float;\n\nin vec4 varColor;\nout vec4 FragColor;\n\n\nvoid main() {\n    if (varColor.a < 1.0) discard;\n    else FragColor = varColor;\n}\n"},"./src/painter/segments/segments.vert":t=>{t.exports="#version 300 es\n\nprecision mediump float;\n\nuniform sampler2D uniTexture;\nuniform mat4 uniModelViewMatrix;\nuniform mat4 uniProjectionMatrix;\n// Minimal value for the radius.\nuniform float uniMinRadius;\n// Multiply all radii by this value.\nuniform float uniRadiusMultiplier;\n// When uniRadiusSwitch == 1.0,\n// we use uniRadiusConstant as radius. \nuniform float uniRadiusConstant;\n// 0.0 means we will use the radius defined\n// in the attribute attAxyzr or attBaxyz.\n// 1.0 means we use uniRadiusConstant for\n// all vertices.\nuniform float uniRadiusSwitch;\n// Multiply the color by this value;\nuniform float uniLight;\n// Push the segments away from camera of `uniShiftZ`.\n// This can be used if you want contours on the segments:\n// just increase `uniRadiusMultiplier`, set a low `uniLight`,\n// and set a small positive `uniShiftZ`.\nuniform float uniShiftZ;\n\n//===================\n// Vertex attributes\n//-------------------\n\n// Position of the vertex, relative to\n// the current center and assuming a\n// radius of 1.\n// Z tells you what tip is your center: 0 for A and 1 for B.\nin vec3 attOffset;\n\n//=====================\n// Instance attributes\n//---------------------\n\n// Coords and radious of tip A.\nin vec4 attAxyzr;\n// Coords and radious of tip B.\nin vec4 attBxyzr;\n// The color is taken from a texture.\nin vec2 attAuv;\nin vec2 attBuv;\n// 0 means that nothing modifies the initial radius,\n// except the minRadius.\nin float attAinfluence;\nin float attBinfluence;\n\n\nout vec4 varColor;\n\n\nvec3 worldToCamera(vec3 v);\nfloat getRadius(float tip);\nmat3 getTransfoMatrix(float tip, vec3 camA, vec3 camB);\n\nvoid main() {\n    vec3 camA = worldToCamera(attAxyzr.xyz);\n    vec3 camB = worldToCamera(attBxyzr.xyz);\n    float tip = attOffset.z;\n    vec2 uv = mix(attAuv, attBuv, tip);\n    varColor = texture(uniTexture, uv)\n        *   vec4(uniLight, uniLight, uniLight, 1.0);\n    float radius = getRadius(tip);\n    mat3 transfo = getTransfoMatrix(tip, camA, camB);\n    vec3 point = transfo * vec3(attOffset.xy * radius, 1.0);\n    point.z -= uniShiftZ;\n    gl_Position = \n        uniProjectionMatrix \n        * vec4(point, 1);\n}\n\nfloat getRadius(float tip) {\n    float influence = mix(attAinfluence, attBinfluence, tip);\n    float originalRadius = mix(\n        attAxyzr.w,\n        attBxyzr.w,\n        tip\n    );\n    float modifiedRadius = mix(\n        originalRadius,\n        uniRadiusConstant,\n        uniRadiusSwitch\n    ) * uniRadiusMultiplier;\n    float radius = mix(\n        originalRadius,\n        modifiedRadius,\n        influence\n    );\n    return max(uniMinRadius, radius);\n}\n\nvec3 worldToCamera(vec3 v) {\n    vec4 result = uniModelViewMatrix * vec4(v, 1.0);\n    return result.xyz;\n}\n\nmat3 getTransfoMatrix(float tip, vec3 camA, vec3 camB) {\n    // What is the current tip?\n    vec3 camO = mix(camA, camB, tip);\n    vec2 A = camA.xy;\n    vec2 B = camB.xy;\n    vec3 Y = vec3(\n        A == B ? vec2(0, 1) : normalize(A - B),\n        0\n    );\n    vec3 X = vec3(Y.y, -Y.x, 0);\n    return mat3(X, Y, camO);\n}"},"./src/painter/skybox/skybox.frag":t=>{t.exports="#version 300 es\n\nprecision highp float;\n\nuniform samplerCube uniTexture;\nuniform mat4 uniMatrix;\n\nin vec4 varPoint;\n\nout vec4 FragColor;\n\nvoid main() {\n    vec4 t = uniMatrix * varPoint;\n    FragColor = texture(uniTexture, normalize(t.xyz / t.w));\n}"},"./src/painter/skybox/skybox.vert":t=>{t.exports="#version 300 es\n\nin vec4 attPoint;\n\nout vec4 varPoint;\n\nvoid main() {\n    varPoint = attPoint;\n    gl_Position = vec4(attPoint.xy, 0.99999, 1.0);\n}"}},r={};function s(t){var e=r[t];if(void 0!==e)return e.exports;var n=r[t]={exports:{}};return i[t](n,n.exports,s),n.exports}s.d=(t,e)=>{for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};(()=>{s.r(a),s.d(a,{TgdCamera:()=>t.TgdCamera,TgdCameraOrthographic:()=>t.TgdCameraOrthographic,TgdCameraPerspective:()=>t.TgdCameraPerspective,TgdColor:()=>e.TgdColor,TgdContext:()=>n.TgdContext,TgdControllerCameraOrbit:()=>i.TgdControllerCameraOrbit,TgdDataset:()=>r.TgdDataset,TgdEvent:()=>o.TgdEvent,TgdInputKeyboardImpl:()=>c.TgdInputKeyboardImpl,TgdInputPointerImpl:()=>c.TgdInputPointerImpl,TgdInputs:()=>c.TgdInputs,TgdMat4:()=>h.TgdMat4,TgdPainter:()=>d.TgdPainter,TgdPainterAxis:()=>u.TgdPainterAxis,TgdPainterBackground:()=>u.TgdPainterBackground,TgdPainterClear:()=>u.TgdPainterClear,TgdPainterDepth:()=>u.TgdPainterDepth,TgdPainterGroup:()=>u.TgdPainterGroup,TgdPainterLogic:()=>u.TgdPainterLogic,TgdPainterMeshGltf:()=>u.TgdPainterMeshGltf,TgdPainterMeshNormals:()=>u.TgdPainterMeshNormals,TgdPainterSegments:()=>u.TgdPainterSegments,TgdPainterSegmentsData:()=>u.TgdPainterSegmentsData,TgdPainterSkybox:()=>u.TgdPainterSkybox,TgdParserGLTransfertFormatBinary:()=>l.TgdParserGLTransfertFormatBinary,TgdParserMeshWavefront:()=>l.TgdParserMeshWavefront,TgdQuat:()=>h.TgdQuat,TgdResource:()=>g.TgdResource,TgdResourceProgram:()=>g.TgdResourceProgram,TgdResourceTexture2D:()=>g.TgdResourceTexture2D,TgdResourceTextureCube:()=>g.TgdResourceTextureCube,TgdVec3:()=>h.TgdVec3,TgdVec4:()=>h.TgdVec4,TgdVertexArray:()=>f.TgdVertexArray,tgdAnimCreateCameraInterpolation:()=>m.tgdAnimCreateCameraInterpolation,tgdCanvasCreate:()=>m.tgdCanvasCreate,tgdCanvasCreateWithContext2D:()=>m.tgdCanvasCreateWithContext2D,tgdEasingFunctionInBack:()=>m.tgdEasingFunctionInBack,tgdEasingFunctionInBounce:()=>m.tgdEasingFunctionInBounce,tgdEasingFunctionInCirc:()=>m.tgdEasingFunctionInCirc,tgdEasingFunctionInCubic:()=>m.tgdEasingFunctionInCubic,tgdEasingFunctionInElastic:()=>m.tgdEasingFunctionInElastic,tgdEasingFunctionInExpo:()=>m.tgdEasingFunctionInExpo,tgdEasingFunctionInOutBack:()=>m.tgdEasingFunctionInOutBack,tgdEasingFunctionInOutBounce:()=>m.tgdEasingFunctionInOutBounce,tgdEasingFunctionInOutCirc:()=>m.tgdEasingFunctionInOutCirc,tgdEasingFunctionInOutCubic:()=>m.tgdEasingFunctionInOutCubic,tgdEasingFunctionInOutElastic:()=>m.tgdEasingFunctionInOutElastic,tgdEasingFunctionInOutExpo:()=>m.tgdEasingFunctionInOutExpo,tgdEasingFunctionInOutQuad:()=>m.tgdEasingFunctionInOutQuad,tgdEasingFunctionInOutQuart:()=>m.tgdEasingFunctionInOutQuart,tgdEasingFunctionInOutQuint:()=>m.tgdEasingFunctionInOutQuint,tgdEasingFunctionInOutSine:()=>m.tgdEasingFunctionInOutSine,tgdEasingFunctionInQuad:()=>m.tgdEasingFunctionInQuad,tgdEasingFunctionInQuart:()=>m.tgdEasingFunctionInQuart,tgdEasingFunctionInQuint:()=>m.tgdEasingFunctionInQuint,tgdEasingFunctionInSine:()=>m.tgdEasingFunctionInSine,tgdEasingFunctionLinear:()=>m.tgdEasingFunctionLinear,tgdEasingFunctionOutBack:()=>m.tgdEasingFunctionOutBack,tgdEasingFunctionOutBounce:()=>m.tgdEasingFunctionOutBounce,tgdEasingFunctionOutCirc:()=>m.tgdEasingFunctionOutCirc,tgdEasingFunctionOutCubic:()=>m.tgdEasingFunctionOutCubic,tgdEasingFunctionOutElastic:()=>m.tgdEasingFunctionOutElastic,tgdEasingFunctionOutExpo:()=>m.tgdEasingFunctionOutExpo,tgdEasingFunctionOutQuad:()=>m.tgdEasingFunctionOutQuad,tgdEasingFunctionOutQuart:()=>m.tgdEasingFunctionOutQuart,tgdEasingFunctionOutQuint:()=>m.tgdEasingFunctionOutQuint,tgdEasingFunctionOutSine:()=>m.tgdEasingFunctionOutSine,tgdFetchArrayBuffer:()=>m.tgdFetchArrayBuffer,tgdFullscreenExit:()=>m.tgdFullscreenExit,tgdFullscreenRequest:()=>m.tgdFullscreenRequest,tgdFullscreenTest:()=>m.tgdFullscreenTest,tgdFullscreenToggle:()=>m.tgdFullscreenToggle});var t=s("./src/camera/index.ts"),e=s("./src/color/index.ts"),n=s("./src/context/index.ts"),i=s("./src/controller/index.ts"),r=s("./src/dataset/index.ts"),o=s("./src/event/index.ts"),c=s("./src/input/index.ts"),h=s("./src/math/index.ts"),u=s("./src/painter/index.ts"),d=s("./src/painter/painter.ts"),l=s("./src/parser/index.ts"),g=s("./src/resource/index.ts"),m=s("./src/utils/index.ts"),f=s("./src/vao/index.ts");s("./src/types/index.ts")})();var o=a.TgdCameraOrthographic,c=a.TgdCameraPerspective,h=a.TgdContext,u=a.TgdControllerCameraOrbit,d=a.TgdDataset,l=a.TgdPainter,g=a.TgdPainterAxis,m=a.TgdPainterBackground,f=a.TgdPainterClear,p=a.TgdPainterDepth,x=a.TgdPainterLogic,v=a.TgdPainterMeshGltf,y=a.TgdPainterSegments,T=a.TgdPainterSegmentsData,b=a.TgdPainterSkybox,E=a.TgdParserGLTransfertFormatBinary,w=a.TgdParserMeshWavefront,A=a.TgdQuat,P=a.TgdVec3,M=a.tgdAnimCreateCameraInterpolation,I=a.tgdEasingFunctionOutBack,F=a.tgdFetchArrayBuffer}},r={};function s(t){var e=r[t];if(void 0!==e)return e.exports;var n=r[t]={id:t,exports:{}};return i[t](n,n.exports,s),n.exports}s.m=i,t=[],s.O=(e,n,i,r)=>{if(!n){var a=1/0;for(u=0;u<t.length;u++){for(var[n,i,r]=t[u],o=!0,c=0;c<n.length;c++)(!1&r||a>=r)&&Object.keys(s.O).every((t=>s.O[t](n[c])))?n.splice(c--,1):(o=!1,r<a&&(a=r));if(o){t.splice(u--,1);var h=i();void 0!==h&&(e=h)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[n,i,r]},s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},s.f={},s.e=t=>Promise.all(Object.keys(s.f).reduce(((e,n)=>(s.f[n](t,e),e)),[])),s.u=t=>"scr/"+t+"."+{20:"adbc2b2a38ec709a37f8",49:"b32df044a3a31672ef4b",91:"4edc6fef511e249ec952",179:"ee687fe143de4c51ac54",193:"ae779beeeb9262fcb727",196:"a16c2b2839a93999ccb6",264:"db5096e6dd9b0ab7fede",440:"e1df3ef8a9ec20707995",450:"02c218610a727bc5a706",616:"35404951c4ea98cd133b",675:"faa968d058cfd9fd2d21",875:"5a5986ff19d9ec46d7fa"}[t]+".js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),e={},n="@tolokoban/tgd:",s.l=(t,i,r,a)=>{if(e[t])e[t].push(i);else{var o,c;if(void 0!==r)for(var h=document.getElementsByTagName("script"),u=0;u<h.length;u++){var d=h[u];if(d.getAttribute("src")==t||d.getAttribute("data-webpack")==n+r){o=d;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",n+r),o.src=t),e[t]=[i];var l=(n,i)=>{o.onerror=o.onload=null,clearTimeout(g);var r=e[t];if(delete e[t],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((t=>t(i))),n)return n(i)},g=setTimeout(l.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=l.bind(null,o.onerror),o.onload=l.bind(null,o.onload),c&&document.head.appendChild(o)}},s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=n[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t+"../"})(),(()=>{var t={524:0};s.f.j=(e,n)=>{var i=s.o(t,e)?t[e]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise(((n,r)=>i=t[e]=[n,r]));n.push(i[2]=r);var a=s.p+s.u(e),o=new Error;s.l(a,(n=>{if(s.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;o.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",o.name="ChunkLoadError",o.type=r,o.request=a,i[1](o)}}),"chunk-"+e,e)}},s.O.j=e=>0===t[e];var e=(e,n)=>{var i,r,[a,o,c]=n,h=0;if(a.some((e=>0!==t[e]))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(c)var u=c(s)}for(e&&e(n);h<a.length;h++)r=a[h],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(u)},n=self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),s.nc=void 0;var a=s.O(void 0,[832],(()=>s(8367)));a=s.O(a)})();