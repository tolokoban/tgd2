"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[9504],{884:(a,n,e)=>{e.r(n),e.d(n,{default:()=>v});var s=e(4848),t=e(8453),r=e(6540),i=e(5968),l=e(2212),o=e(4444),c=e(6989),d=e(2197);const h=JSON.parse('{"Alpheratz, Sirrah":[-0.5731661263549379,1.9500563732532645],"Caph":[-0.05707226654021458,2.051110936943736],"Algenib":[-0.8147196948309531,1.909913800457395],"Ankaa":[-1.291194580625405,5.585402672232253],"Fulu":[-0.15550883635269477,2.108008670558751],"Schedar":[-0.10995574287564276,2.119178777771515],"Diphda":[-1.4081316405090252,1.9427259903948884],"Achird":[-0.08813912722571364,2.139773662945048],"Castula":[-0.06422811647339133,2.157226955464991],"MIRACH":[-0.47298422729046335,2.218313479284793],"Wurren":[-1.0770426814057008,5.198114111214712],"Revati":[-0.9578366934944881,2.313608456443683],"Adhil":[-0.29670597283903605,2.244144352214309],"Ruchbah":[-0.041015237421866746,2.2198842756115877],"Lodestar, North Star, Polaris":[0.4618141200776996,2.1516419018586097],"Alpherg":[-0.8103563717009672,2.391275608157431],"Titawin":[-0.3605850234620285,2.303834612632515],"Nembus":[-0.23614304779483278,2.2830651945337825],"Achernar":[-1.0260790672474662,5.0761155965003075],"Torcular":[-0.8976228343006837,2.523920631309],"Baten Kaitos":[-1.1876965559821413,2.8951521632081936],"Segin":[0.028797932657906436,2.2661355007894377],"Mothallah":[-0.5480333851262195,2.419724474964938],"Sheratan":[-0.69254664719135,2.4825563280367344],"Almach":[-0.32393310917014756,2.390402943531434],"Hamal":[-0.6318091892219474,2.523222499608202],"Mira, Mira A":[-1.0119419003063121,2.9277898202204877],"iot Cas AB":[0.10978120995044333,2.305929007734908],"Kaffaljidhma":[-0.8618435846347999,2.9482101724688214],"Lilii Borea":[-0.47298422729046335,2.6427775533698137],"Miram":[-0.05550147021341968,2.42845112122491],"Bharani":[-0.4993386989955777,2.6700046897009253],"Angetenar":[-1.0836749325632793,3.6093408931242736],"Azha":[-0.9653416092780637,3.266383695107388],"Gorgonea Secunda":[-0.2953097094374406,2.5837854246524055],"Menkar":[-0.7956956059842148,3.025004659556572],"Gorgonea Tertia":[-0.29688050576423547,2.611012560983517],"Algol, Algol A, Algol B, Algol C":[-0.26005405854715513,2.600191519621152],"Misam":[-0.19949113350295186,2.5677283955340577],"Gorgonea Quarta":[-0.27454029133870805,2.622008135271081],"Botein":[-0.5609488215909775,2.8379053637427796],"Dalim":[-1.0304423903774522,3.922627493857256],"Zibal":[-0.8955284391982905,3.343701780970737],"Mirfak":[-0.10227629416686772,2.5581290846480886],"Ran":[-0.8384561726580759,3.418401872956094],"Atik":[-0.30962140930379406,2.7988099884981072],"Rana":[-0.8028514559173916,3.4574972482007666],"Celaeno, Celeno":[-0.4141666314982544,2.8979446900113848],"Electra":[-0.4162610266006476,2.900388150964177],"Taygeta, Taygete":[-0.4106759729942658,2.896897492460188],"Maia":[-0.4103269071438669,2.9002136180389773],"Asterope":[-0.4077089132658754,2.898119222936584],"Merope":[-0.4145156973486533,2.9071949350469546],"MOAI 1":[0.12269664641520137,2.4687682269459787],"Alcyone":[-0.4092797095926703,2.908940264298949],"Atlas":[-0.4054399852382828,2.9148743837557296],"Pleione":[-0.4043927876870862,2.914001719129733],"Menkhib, Menkib":[-0.2288126649364566,2.7989845214233062],"Zaurak":[-0.7761479183618784,3.5807174933915666],"Beid":[-0.6700318998406232,3.4787902650750975],"Keid":[-0.6632251157578453,3.5032248746030183],"Prima Hyadum":[-0.4157374278250493,3.1255356244714454],"Secunda Hyadum":[-0.38414696836395196,3.106860601475106],"Beemim":[-0.7719591281570919,4.104490801915064],"Ain":[-0.34766958699727046,3.099704751541929],"Chamukuy":[-0.38414696836395196,3.1477013059717733],"Aldebaran":[-0.3534291735288517,3.158522347334138],"Theemin":[-0.7209955139988575,4.0318851050321],"Sceptrum":[-0.6263986685407649,3.688229775314417],"Tabit":[-0.4026474584350918,3.341432852943144],"Hassaleh":[-0.1075122819228507,2.9773571709771267],"Almaaz":[0.020594885173533087,2.841221489321569],"Saclateni":[-0.007504915783575617,2.880142331641043],"Mago":[0.2988003679414292,2.4804619329343414],"Haedus":[0.00471238898038469,2.8859019181726238],"Cursa":[-0.4417428336797648,3.5838590860451562],"Capella":[0.07976154681614087,2.837556297892381],"Rigel":[-0.4406956361285682,3.6519269268729353],"Bellatrix":[-0.27838001569309556,3.4370768959524334],"Elnath":[-0.06527531402458793,3.1065115356247075],"Nihal":[-0.47472955654245763,3.9018580757585233],"Mintaka":[-0.30962140930379406,3.5580282131156404],"Arneb":[-0.43877577395137446,3.856304982281471],"lambda Ori X-5":[-0.21450096507010308,3.41037335839692],"lambda Ori X-3":[-0.20943951023931956,3.40426470601494],"Hatysa":[-0.34173546754048967,3.6568138487785196],"Alnilam":[-0.3008947630438224,3.5815901580175638],"Tianguan":[-0.09843656981248018,3.2409018880282705],"Phact":[-0.5037020221255635,4.168020786687658],"Saiph":[-0.32288591161895097,3.743905778453036],"Wazn":[-0.47228609558966556,4.212352149688314],"Betelgeuse":[-0.15638150097869194,3.4869933125594708],"Gore\'s Nova":[-0.04345869837465881,3.2937853643636985],"Menkalinan":[0.1816887751326097,2.9227283653897045],"Mahasim":[0.11746065865921838,3.042807017926914],"Elkurud":[-0.42341687653382437,4.257556177314967],"Propus":[0.0439822971502571,3.2960542923912914],"Furud":[-0.3391174736624982,4.145506039336932],"Tejat":[0.07278022980816354,3.311238656883642],"Mirzam":[-0.24905848425959082,3.9454913070583815],"Canopus":[-0.4413937678293659,4.558974539134388],"23 H. Cam":[0.46094145545170245,2.349038640259168],"Alhena":[0.07766715171374766,3.4342843691492426],"Plaskett star, Plaskett\'s star":[-0.0054105206811824215,3.5931093310807265],"Mebsuta":[0.16807520696705394,3.308097064230052],"Alzirr":[0.07853981633974483,3.503573940453417],"Dog Star, Sirius, Sirius A":[-0.15498523757709648,3.9657371263815158],"Altaleban, Taleban":[-0.36407568196601714,4.540648581988449],"51 H. Cep":[0.48380526865282814,2.202954581867243],"Adhara":[-0.19774580425095753,4.185823145058],"Citala":[-0.008377580409572781,3.8173841399619977],"Unurgunite":[-0.17924531417981765,4.174303971994838],"Mekbuda":[0.20769418098732523,3.4164820107789002],"Muliphein":[-0.07696902001294993,3.983714017677057],"Wezen":[-0.14433872913993104,4.16121400260488],"Ahadi":[-0.19687313962496036,4.34604437039108],"Wasat":[0.277332818141899,3.420496268058487],"Aludra":[-0.11327186845443199,4.234517831188643],"Gomeisa":[0.2038544566329377,3.6568138487785196],"Hadir":[-0.20786871391252465,4.463505029050299],"Castor B":[0.3923500158483253,3.271445149938171],"Castor A":[0.3923500158483253,3.271445149938171],"Jishui":[0.42289327775822605,3.2283355174139112],"Procyon, Procyon A":[0.22741640153486112,3.7295940785866826],"Pollux":[0.40858157789187255,3.3550464211086997],"Asmidiske, Azmidi, Azmidiske":[0.009948376736367677,4.214272011865508],"Naos":[-0.08220500776893293,4.467693819255085],"Tureis":[0.07679448708775051,4.243768076224212],"Regor":[-0.13421581947836395,4.586725274241099],"Altarf, Tarf":[0.40229839258469297,3.739367922397851],"Piautos":[0.5164429256651221,3.4789647980002973],"Alsciaukat":[0.5993460651348528,3.096039560112741],"Muscida":[0.618370153981591,2.7221900343355556],"Minchir":[0.4417428336797648,3.8870227771165715],"Meleph":[0.56635934227216,3.5964254566595155],"Asellus Borealis":[0.5886995566976873,3.5634387337968225],"Asellus Australis":[0.5742133239061344,3.6306339099986045],"Ashlesha":[0.4979424355939822,3.8522907250018843],"Alsephina":[-0.12863076587198208,4.748691828826171],"Copernicus":[0.6581636609270617,3.434633434999641],"Talitha":[0.7127924665144842,2.9934142000954744],"Acubens":[0.5850343652684993,3.7788123634929227],"Alkaphrah":[0.7265805676052395,3.012961887717811],"Nahn":[0.6920230484157517,3.592934798155527],"Suhail":[0.04921828490624009,4.64152861275372],"Miaplacidus":[-0.2515019452123829,4.991292594853384],"Aspidiske":[-0.1223475805648025,4.86004383510341],"HD 80951AB":[-0.30700341542580256,5.065643620988342],"Intercrus":[0.8040731863937877,3.040712622824521],"Alphard":[0.5070181477043527,4.214795610641106],"Alterf":[0.7829547024446563,3.6074210309470796],"Ukdah":[0.6279694648675597,4.12752914804139],"Subra":[0.7340854833888151,3.920009499979264],"Zhang":[0.5138249317871306,4.384790679785354],"Rasalas":[0.8770279491271507,3.5613443386944295],"Felis":[0.4728096943652639,4.454778382790327],"Regulus":[0.8541641359260248,3.9519490252907605],"Adhafera":[0.9590584239708841,3.669205686467679],"Tania Borealis":[0.9615018849236762,3.0695105554824273],"Tania Australis":[0.9836675664240041,3.1049407392979123],"Praecipua":[1.112298332295986,3.3161255787892263],"Chalawan":[1.1060151469888067,3.0679397591556326],"Alkes":[0.6478662183402951,4.695982885415943],"Merak":[0.9564404300928926,2.603507645199941],"Dubhe":[0.8902924514423075,2.4932028364738996],"Zosma":[1.1664035391078105,3.9133772488216856],"Chertan":[1.1273081638631375,4.107981460419054],"Alula Borealis":[1.2056734472776829,3.3288664823287846],"Giausar":[0.8063421144213803,2.3209388393020594],"Formosa":[1.2447688225223557,4.010766621082969],"Alkafzah, Taiyangshou":[1.1470303844106733,2.623578931597876],"Denebola":[1.2358676433371847,4.3746677701237875],"Zavijava":[1.0602875205865552,4.721115626644662],"Phecda":[1.0712830948741194,2.458121718508814],"Tonatiuh":[0.6967354373961364,2.204699911119237],"Alchiba":[0.6478662183402951,5.072974003846719],"Minkar":[0.6852162643329738,5.071752273370322],"Imai":[0.0661479786505851,5.205095428222689],"Megrez":[1.0370746415350307,2.3137829893688826],"Gienah":[0.7766715171374766,5.0787335903783],"Zaniah":[1.0679669692953302,4.99862297771176],"Ginan":[0.039269908169872414,5.222548720742632],"** STFA 21":[1.4803882715415901,3.930830541341629],"Algorab":[0.8037241205433887,5.157098873792846],"Gacrux":[0.09861110273767963,5.238954815711379],"Chara":[1.314581992602129,2.3753931119642826],"Kraz":[0.686088928958971,5.198812242915509],"Porrima":[1.0704104302481223,5.198463177065111],"La Superba":[1.2505284090539373,2.2069688391468296],"Mimosa":[0.05550147021341968,5.278922855582048],"Tianyi":[0.878424212528746,2.1560052249885953],"Alioth":[1.067443370519732,2.132443280086672],"Minelauva":[1.1562806294462433,5.332504463618275],"Cor Caroli":[1.3747958517959333,2.0645499721840928],"Taiyi":[0.9019861574306695,2.1338395434882673],"Vindemiatrix":[1.2850859282434248,5.451361385679088],"Mizar A":[1.074773753378108,1.9741419169307861],"Mizar B":[1.074773753378108,1.9741419169307861],"Spica":[0.8873253917139172,5.517160298479276],"Alcor":[1.0728538912009145,1.9682077974740053],"Heze":[1.0540043352793755,5.676683392111557],"HD 119361AB":[0.34487706019407954,5.46637121724624],"Alcaid, Alkaid":[1.140049067402696,1.7573720238330903],"Muphrid":[1.2746139527314588,0.09250245035569947],"Agena, Hadar":[0.02181661564992912,5.441413008942721],"Menkent":[0.42027528388023455,5.575628828421085],"Thuban":[0.8894197868163104,1.928937889304133],"Kang":[0.8325220532012952,5.820847588326289],"Syrma":[0.8913396489935042,5.894849548610848],"Arcturus":[1.2061970460532812,0.2642428487519415],"Xuange":[1.1287044272647329,1.5179128504594683],"Khambalia":[0.7723081940074908,5.818927726149094],"Elgafar":[0.9164723902222224,6.025225643734825],"Seginus":[1.154884366044648,1.173908454891386],"Rigel Kentaurus, Rigil Kentaurus":[-0.012391837689159739,5.511400711947694],"Toliman":[-0.012391837689159739,5.511400711947694],"Izar":[1.1306242894419267,0.6873106594353671],"Zubenelgenubi":[0.6633996486830446,5.939879043312302],"Merga":[1.0466739524209994,1.3959143357450647],"Kochab":[0.7068583470577035,1.9661134023716123],"Nekkar":[1.0478956828973955,1.1801916401985657],"Brachium":[0.4995132319207771,5.885599303575279],"I Boo*":[0.9958848711879644,1.4025465869026432],"Zubeneschamali":[0.6846926655573754,6.1439080328704385],"Pherkad Minor":[0.7162831250184728,1.8975219627682351],"Alkalurops":[0.982794901798007,1.0540043352793755],"Pherkad":[0.7127924665144842,1.8929841067130497],"Edasich":[0.8487536152448425,1.6400858980990713],"Nusakan":[0.9705775970340467,0.7956956059842148],"Zubenelhakrabi":[0.5619960191421741,6.135006853685268],"Alphecca":[0.938463538797351,0.7307693578100257],"Unukalhai":[0.7693411342791004,0.24783675378319478],"Chow":[0.8354891129296855,0.4534365396681268],"Gudja":[0.8435176274888594,0.5253441048502933],"Iklil":[0.318871654339364,6.014928201148058],"Fang":[0.3530801076784529,6.0601322287747115],"Dschubba":[0.39252454877352466,6.110397711232148],"Jabbah":[0.3961897402027128,6.189112060497092],"Yed Prior":[0.5619960191421741,0.15446163880149816],"Yed Posterior":[0.5377359425394529,0.1494001839707146],"Alniyat":[0.29670597283903605,6.1315161951812795],"Cujam":[0.6742206900454095,0.5141739976375295],"Athebyne":[0.714712328691678,1.6158258214963503],"Antares":[0.26284658535034605,6.142686302394043],"Kornephoros":[0.7017968922269199,0.6808529412029879],"Marfik":[0.555887366760194,0.2988003679414292],"Paikauhale":[0.22357667718047364,6.135530452460866],"Atria":[-0.26633724385433466,5.611931676862568],"Larawag":[0.11449359893082801,6.08805749680662],"Xamidimura":[0.06824237375297829,6.040933607002773],"Pipirima":[0.06736970912698112,6.042329870404369],"OAO 1653-40":[0.02548180707911721,6.013182871896063],"Sabik":[0.24452062820440557,0.11728612573401895],"Aldhibah":[0.6115633698988131,1.675690614839756],"LSF 1":[-0.0019198621771937625,6.082821509050637],"Sarin":[0.5483824509766184,0.8173376887089445],"Lesath":[-0.032114058236695664,6.130818063480481],"Maasym":[0.49637163926718736,0.8635889138867942],"Shaula":[-0.038571776469074684,6.139021110964855],"Rastaban":[0.5813691738393112,1.3889330187370874],"Sargas":[-0.10437068926926091,6.058735965373115],"Rasalhague":[0.3939208121751202,0.6265732014659643],"Cervantes":[-0.2007128639793479,5.935166654331917],"Cebalrai":[0.3000220984178253,0.5098106745075437],"Alruba":[0.5473352534254218,1.422268807450179],"Fuyue":[-0.08621926504851989,6.169738905799955],"Dziban":[0.5415756668938405,1.797165530778561],"Grumium":[0.5276130328778859,1.4864969239235706],"Eltanin":[0.5099852074327431,1.379857306626717],"Alnasl":[-0.07923794804054256,0.016057029118347832],"Yildun":[0.49288098076319864,2.082003264704036],"Polis":[-0.027925268031909273,0.17453292519943295],"Kaus Media":[-0.12479104151759457,0.05235987755982989],"Kaus Australis":[-0.17121679962064373,6.269222673163632],"Alathfar":[0.38048177693476387,1.175130185367782],"Kaus Borealis":[-0.11379546723003028,0.13369222070276565],"Fafnir":[0.47350782606606157,1.6653931722529893],"Vega":[0.335801348083709,1.1770500475449759],"Xihe":[0.30054569719342356,1.1473794502610721],"Sheliak":[0.2579596634447619,1.1028735543352168],"Ainalrami":[-0.18709929581379214,0.2223549467040776],"Nunki":[-0.21694442602289515,0.1668534764906579],"Sulafat":[0.22357667718047364,1.1051424823628095],"Ascella":[-0.26790804018112957,0.11938052083641214],"Polaris Australis":[-0.4836307357276287,5.304230129735967],"Okab":[0.05672320068981571,0.8178612874845428],"Meridiana":[-0.34191000046568915,6.275156792620413],"Albaldah":[-0.23195425759004637,0.277332818141899],"Gumala":[-0.27541295596470516,0.23492131731843677],"Aladfar":[0.22252947962927702,1.2325515177583957],"Altais":[0.4014257279586958,1.7217673070924062],"Arkab Prior":[-0.41765729000224305,6.171658767977149],"Arkab Posterior":[-0.4207988826558328,6.165899181445567],"Rukbat":[-0.4029965242854907,6.243217267308916],"Anser":[0.059341194567807204,1.0295697257514551],"Alsafi":[0.3820525732615587,1.7683675981206546],"Sham":[-0.03735004599267865,0.9503317777109125],"Tarazed":[-0.12356931104119853,0.8504989444968367],"Fawaris":[0.17872171540421936,1.3737486542447366],"Altair":[-0.15550883635269477,0.8332201849020929],"Tyl":[0.3635520831904188,1.7877407528177918],"Libertas":[-0.17191493132144145,0.834441915378489],"Terebellum":[-0.4370304446993801,0.2593559268463574],"Alshain":[-0.19355701404617115,0.8051203839449843],"Prima Giedi":[-0.4310963252425994,0.542622864445037],"Algedi, Giedi":[-0.43301618741979314,0.5427973973702365],"Alshat":[-0.4447098934081552,0.5440191278466325],"Dabih Minor":[-0.45937065912490754,0.5082398781807488],"Dabih, Dabih Major":[-0.4602433237509047,0.508763476956347],"Peacock":[-0.6141813637768045,5.950001952973869],"SADR":[0.032637657012293965,1.3639748104335687],"Aldulfin":[-0.28955012290585924,0.9672614714552574],"Rotanev":[-0.27314402793711257,1.0276498635742612],"Sualocin, Svalocin":[-0.2673844414055313,1.0524335389525807],"Deneb":[0.03490658503988659,1.470963493580821],"Aljanah":[-0.09965830028887622,1.3254030339644938],"Albali":[-0.5253441048502933,0.6576400621514634],"Musica":[-0.38362336958835364,1.024333737995472],"PN Ou 4":[0.13945180723434694,1.7194983790648135],"Kitalpha":[-0.501084028247572,0.9840166322744031],"Alderamin":[0.16004669240788003,1.7627825445142729],"Sadalsuud":[-0.6611307206554521,0.8381071068076771],"Alfirk":[0.24486969405480444,1.876927077594702],"Bunda":[-0.7040658202545126,0.8107054375513661],"Nashira":[-0.779638576865867,0.6283185307179586],"Azelfafage":[-0.022689280275926284,1.6664403698041859],"Enif":[-0.5490805826774161,1.1444123905326817],"Erakis, Herschel\'s Garnet Star":[0.07539822368615504,1.7558012275062955],"Deneb Algedi":[-0.803025988842591,0.6562437987498679],"Aldhanab":[-0.8983209660014814,0.10663961729685355],"Sadalmelik":[-0.7342600163140145,1.0459758207202017],"Alnair":[-0.9157742585214247,6.1086523819801535],"Biham":[-0.675616953447005,1.1765264487693774],"Ancha":[-0.848579082319643,0.9339256827421657],"Sadachbia":[-0.8000589291142007,1.085245728890074],"Situla":[-0.8857545953871222,1.0939723751500459],"Homam":[-0.7096508738608943,1.3763666481227284],"Tiaki":[-1.011418301530714,6.043551600880765],"Matar":[-0.4354596483725852,1.6144295580947547],"Sadalbari":[-0.5333726194094671,1.5826645657084581],"sig Peg A":[-0.7522369076095561,1.4114477660878144],"Skat":[-1.0588912571849598,0.8653342431387886],"Fomalhaut B":[-1.1276572297135363,0.27820548276789614],"Fomalhaut":[-1.13271868454432,0.3576179637336381],"Helvetios":[-0.6061528492176306,1.5718435243460933],"Fumalsamakah":[-0.8658578419143869,1.3751449176463324],"Scheat":[-0.5070181477043527,1.670978225859371],"Markab":[-0.7047639519553103,1.5407766636605942],"Salm":[-0.6040584541152374,1.7018705536196708],"Alkarab":[-0.6171484235051949,1.7200219778404118],"Veritate":[-0.3673918075448064,1.857204857047166],"Errai":[0.2672099084803319,2.0767672769480527]}');class m extends o.tbm{constructor(a){super(),this.context=a,this.fixedCamera=new o.xNY({transfo:{distance:0,position:[0,0,0]},near:.1,far:2,fovy:Math.PI/3});const{canvas:n,attLatLng:e,attUV:s}=function(){const a=document.createElement("canvas"),n=a.getContext("2d");if(!n)throw Error("Unable to get Context 2D!");(0,d.j)(h,["map",["array","number",{min:2,max:2}]]);const e=[],s=[],t=2048,r=1024;a.width=t,a.height=r,n.clearRect(0,0,t,r),n.font="30px sans-serif",n.textBaseline="middle",n.fillStyle="#0f0";let i=1,l=16;for(const a of Object.keys(h)){const o=n.measureText(a);i+o.width>t-8&&(i=1,l+=32);const c=h[a];c&&(e.push(...c),s.push(i/t,(l-16)/r,(o.width+4)/t),n.fillText(a,i,l),i+=o.width+8)}return{canvas:a,attLatLng:e,attUV:s}}();this.count=e.length>>1,this.texture=new o.HTX(a).setParams({magFilter:"LINEAR",minFilter:"LINEAR_MIPMAP_LINEAR"}).loadBitmap(n).generateMipmap();const t=new o.I9j({attCorner:"vec2"});t.set("attCorner",new Float32Array([0,0,1,0,0,1,1,1]));const r=new o.I9j({attLatLng:"vec2",attUV:"vec3"},{divisor:1});r.set("attLatLng",new Float32Array(e)),r.set("attUV",new Float32Array(s));const i=new o.a6X(a.gl,{vert:"#version 300 es\n\nprecision mediump float;\n\nuniform float uniAspect;\nuniform float uniAspectInverse;\nuniform mat4 uniModelViewMatrix;\nuniform mat4 uniProjectionMatrix;\n\nin vec2 attCorner;\nin vec2 attLatLng;\nin vec3 attUV;\n\nout vec2 varUV;\nout float varAlpha;\n\nconst float H = 1.0 / 32.0;\n\nvoid main() {\n    varUV = attUV.xy + attCorner * vec2(attUV.z, H);\n    float longitude = attLatLng.x;\n    float latitude = attLatLng.y;\n    float r = cos(latitude);\n    float z = sin(latitude);\n    float x = cos(longitude) * r;\n    float y = sin(longitude) * r;\n    gl_Position = uniProjectionMatrix * uniModelViewMatrix * vec4(x, y, z, 1.0);\n    vec2 point = gl_Position.xy / max(1.0, gl_Position.w);\n    float size = pow(dot(point, point), 1.5);\n    varAlpha = size;\n    size *= max(uniAspect, uniAspectInverse) * 5.0;\n    gl_Position.xy += (attCorner * size * vec2(attUV.z, H) * gl_Position.w) * vec2(uniAspectInverse, -1.0);\n    gl_Position.z = gl_Position.w;\n}\n",frag:"#version 300 es\n\nprecision mediump float;\n\nuniform sampler2D uniTexture;\n\nin vec2 varUV;\nin float varAlpha;\n\nout vec4 FragColor;\n\nvoid main() {\n    FragColor = texture(uniTexture, varUV);\n    FragColor.a *= varAlpha;\n}"}),l=new o.ZV_(a.gl,i,[t,r]);this.prg=i,this.vao=l}delete(){this.vao.delete(),this.prg.delete(),this.texture.delete()}paint(){const{context:a,prg:n,vao:e,texture:s,fixedCamera:t}=this,{camera:r,gl:i}=a;t.transfo.orientation=r.transfo.orientation,n.use(),n.uniform1f("uniAspect",a.width/a.height),n.uniform1f("uniAspectInverse",a.height/a.width),n.uniformMatrix4fv("uniModelViewMatrix",t.matrixModelView),n.uniformMatrix4fv("uniProjectionMatrix",t.matrixProjection),s.activate(0,n,"uniTexture"),e.bind(),i.drawArraysInstanced(i.TRIANGLE_STRIP,0,4,this.count)}}const u=e.p+"bin/stars.d1fc1a12e73584fe11e2.dat";function p(a){return new o.pwt(a,{inertiaOrbit:1e3}),a.add(new o.o57(a,{color:[0,0,0,1]})),a.paint(),(0,o.vSU)(u).then((n=>{if(!n)return;const e=new Float32Array(n),s=new x(a,e);a.add(new o.Ipk(a,{blend:o.aMr.alpha,children:[new m(a),s]})),a.paint()})),a}function j(){return(0,s.jsx)(c.A,{onReady:p})}class x extends o.tbm{constructor(a,n){super(),this.context=a,this.fixedCamera=new o.xNY({transfo:{distance:0},near:.1,far:2,fovy:Math.PI/3}),this.count=n.length>>2,this.prg=new o.a6X(a.gl,{vert:"#version 300 es\n\nprecision mediump float;\n\nuniform mat4 uniModelViewMatrix;\nuniform mat4 uniProjectionMatrix;\nuniform float uniVegaSizeInPixels;\n\nin vec4 attStar;\n\nout vec4 varColor;\nout float varRadiusLimit;\n\nvoid main() {\n    float longitude = attStar.x;\n    float latitude = attStar.y;\n    float brightness = attStar.z;\n    float temperature = attStar.w;\n    \n    vec3 color = mix(\n        vec3(.5, .1, .1), \n        vec3(.1, .2, .5), \n        temperature\n    ) * (2.0 + brightness * 5.0);\n    varColor = vec4(color, 0.1 + 0.9 * brightness);\n\n    float r = cos(latitude);\n    float z = sin(latitude);\n    float x = cos(longitude) * r;\n    float y = sin(longitude) * r;\n    gl_Position = uniProjectionMatrix * uniModelViewMatrix * vec4(x, y, z, 1.0);\n    gl_Position.z = gl_Position.w;\n    \n    gl_PointSize = max(uniVegaSizeInPixels * brightness, 1.0);\n    float radiusLimit = clamp(sqrt(gl_PointSize), 0.2, 10.0);\n    varRadiusLimit = radiusLimit / gl_PointSize;\n}\n",frag:"#version 300 es\n\nprecision mediump float;\n\nin vec4 varColor;\nin float varRadiusLimit;\n\nout vec4 FragColor;\n\nvoid main() {\n    vec2 point = 2.0 * gl_PointCoord.xy - vec2(1.0);\n    float radius = length(point);\n    if (radius > 1.0) discard;\n    \n    float alpha = varColor.a;\n    alpha *= 1.0 - pow(radius, 2.0);\n    float fade = 1.0 - smoothstep(varRadiusLimit, varRadiusLimit * 2.0, radius) * 0.9;\n    alpha *= fade;\n    FragColor = vec4(varColor.rgb, alpha);\n}"});const e=new o.I9j({attStar:"vec4"});e.set("attStar",n),this.vao=new o.ZV_(a.gl,this.prg,[e])}paint(){const{context:a,prg:n,vao:e,fixedCamera:s}=this,{camera:t,gl:r}=a;s.transfo.orientation=t.transfo.orientation,n.use(),n.uniformMatrix4fv("uniModelViewMatrix",s.matrixModelView),n.uniformMatrix4fv("uniProjectionMatrix",s.matrixProjection),n.uniform1f("uniVegaSizeInPixels",.05*Math.max(a.width,a.height)),e.bind(),r.drawArrays(r.POINTS,0,this.count)}delete(){this.prg.delete(),this.vao.delete()}}const g={"Detail #1":"function init(ctx: TgdContext): TgdContext {\n    new TgdControllerCameraOrbit(ctx, {\n        inertiaOrbit: 1000,\n    })\n    ctx.add(new TgdPainterClear(ctx, { color: [0, 0, 0, 1] }))\n    ctx.paint()\n    tgdLoadArrayBuffer(dataURL).then(buff => {\n        if (!buff) return\n\n        const data = new Float32Array(buff)\n        const painter = new PainterStars(ctx, data)\n        ctx.add(\n            new TgdPainterState(ctx, {\n                blend: webglPresetBlend.alpha,\n                children: [new PainterNames(ctx), painter],\n            })\n        )\n        ctx.paint()\n    })\n    return ctx\n}","Class PainterStars":'export class PainterStars extends TgdPainter {\n    // Number of stars\n    private readonly count: number\n    private readonly prg: TgdProgram\n    private readonly vao: TgdVertexArray\n\n    private readonly fixedCamera = new TgdCameraPerspective({\n        transfo: { distance: 0 },\n        near: 0.1,\n        far: 2.0,\n        fovy: Math.PI / 3,\n    })\n\n    /**\n     *\n     * @param data A sequence of 4 floats: longitude, latitude, brightness and color.\n     */\n    constructor(private readonly context: TgdContext, data: Float32Array) {\n        super()\n        this.count = data.length >> 2\n        this.prg = new TgdProgram(context.gl, {\n            vert,\n            frag,\n        })\n        const dataset = new TgdDataset({\n            attStar: "vec4",\n        })\n        dataset.set("attStar", data)\n        this.vao = new TgdVertexArray(context.gl, this.prg, [dataset])\n    }\n\n    paint() {\n        const { context, prg, vao, fixedCamera } = this\n        const { camera, gl } = context\n        fixedCamera.transfo.orientation = camera.transfo.orientation\n        prg.use()\n        prg.uniformMatrix4fv("uniModelViewMatrix", fixedCamera.matrixModelView)\n        prg.uniformMatrix4fv(\n            "uniProjectionMatrix",\n            fixedCamera.matrixProjection\n        )\n        prg.uniform1f(\n            "uniVegaSizeInPixels",\n            Math.max(context.width, context.height) * 0.05\n        )\n        vao.bind()\n        gl.drawArrays(gl.POINTS, 0, this.count)\n    }\n\n    delete() {\n        this.prg.delete()\n        this.vao.delete()\n    }\n}','Vertex shader "./painter-stars.vert"':"#version 300 es\n\nprecision mediump float;\n\nuniform mat4 uniModelViewMatrix;\nuniform mat4 uniProjectionMatrix;\nuniform float uniVegaSizeInPixels;\n\nin vec4 attStar;\n\nout vec4 varColor;\nout float varRadiusLimit;\n\nvoid main() {\n    float longitude = attStar.x;\n    float latitude = attStar.y;\n    float brightness = attStar.z;\n    float temperature = attStar.w;\n    \n    vec3 color = mix(\n        vec3(.5, .1, .1), \n        vec3(.1, .2, .5), \n        temperature\n    ) * (2.0 + brightness * 5.0);\n    varColor = vec4(color, 0.1 + 0.9 * brightness);\n\n    float r = cos(latitude);\n    float z = sin(latitude);\n    float x = cos(longitude) * r;\n    float y = sin(longitude) * r;\n    gl_Position = uniProjectionMatrix * uniModelViewMatrix * vec4(x, y, z, 1.0);\n    gl_Position.z = gl_Position.w;\n    \n    gl_PointSize = max(uniVegaSizeInPixels * brightness, 1.0);\n    float radiusLimit = clamp(sqrt(gl_PointSize), 0.2, 10.0);\n    varRadiusLimit = radiusLimit / gl_PointSize;\n}\n",'Fragment shader "./painter-stars.frag"':"#version 300 es\n\nprecision mediump float;\n\nin vec4 varColor;\nin float varRadiusLimit;\n\nout vec4 FragColor;\n\nvoid main() {\n    vec2 point = 2.0 * gl_PointCoord.xy - vec2(1.0);\n    float radius = length(point);\n    if (radius > 1.0) discard;\n    \n    float alpha = varColor.a;\n    alpha *= 1.0 - pow(radius, 2.0);\n    float fade = 1.0 - smoothstep(varRadiusLimit, varRadiusLimit * 2.0, radius) * 0.9;\n    alpha *= fade;\n    FragColor = vec4(varColor.rgb, alpha);\n}"},f='import {\n    TgdPainter,\n    TgdContext,\n    TgdProgram,\n    TgdDataset,\n    TgdVertexArray,\n    TgdPainterClear,\n    tgdLoadArrayBuffer,\n    TgdControllerCameraOrbit,\n    TgdCameraPerspective,\n    TgdPainterState,\n    webglPresetBlend,\n} from "@tolokoban/tgd"\n\nimport View from "@/components/demo/Tgd"\nimport { PainterNames } from "./painter-names"\n\nimport dataURL from "../stars.dat"\nimport vert from "./painter-stars.vert"\nimport frag from "./painter-stars.frag"\n\nfunction init(ctx: TgdContext): TgdContext {\n    new TgdControllerCameraOrbit(ctx, {\n        inertiaOrbit: 1000,\n    })\n    ctx.add(new TgdPainterClear(ctx, { color: [0, 0, 0, 1] }))\n    ctx.paint()\n    tgdLoadArrayBuffer(dataURL).then(buff => {\n        if (!buff) return\n\n        const data = new Float32Array(buff)\n        const painter = new PainterStars(ctx, data)\n        ctx.add(\n            new TgdPainterState(ctx, {\n                blend: webglPresetBlend.alpha,\n                children: [new PainterNames(ctx), painter],\n            })\n        )\n        ctx.paint()\n    })\n    return ctx\n}\n\nexport default function Demo() {\n    return <View onReady={init} />\n}\n\nexport class PainterStars extends TgdPainter {\n    // Number of stars\n    private readonly count: number\n    private readonly prg: TgdProgram\n    private readonly vao: TgdVertexArray\n\n    private readonly fixedCamera = new TgdCameraPerspective({\n        transfo: { distance: 0 },\n        near: 0.1,\n        far: 2.0,\n        fovy: Math.PI / 3,\n    })\n\n    /**\n     *\n     * @param data A sequence of 4 floats: longitude, latitude, brightness and color.\n     */\n    constructor(private readonly context: TgdContext, data: Float32Array) {\n        super()\n        this.count = data.length >> 2\n        this.prg = new TgdProgram(context.gl, {\n            vert,\n            frag,\n        })\n        const dataset = new TgdDataset({\n            attStar: "vec4",\n        })\n        dataset.set("attStar", data)\n        this.vao = new TgdVertexArray(context.gl, this.prg, [dataset])\n    }\n\n    paint() {\n        const { context, prg, vao, fixedCamera } = this\n        const { camera, gl } = context\n        fixedCamera.transfo.orientation = camera.transfo.orientation\n        prg.use()\n        prg.uniformMatrix4fv("uniModelViewMatrix", fixedCamera.matrixModelView)\n        prg.uniformMatrix4fv(\n            "uniProjectionMatrix",\n            fixedCamera.matrixProjection\n        )\n        prg.uniform1f(\n            "uniVegaSizeInPixels",\n            Math.max(context.width, context.height) * 0.05\n        )\n        vao.bind()\n        gl.drawArrays(gl.POINTS, 0, this.count)\n    }\n\n    delete() {\n        this.prg.delete()\n        this.vao.delete()\n    }\n}\n';function N(){const[a,n]=r.useState(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"half-left",children:(0,s.jsx)(j,{})}),(0,s.jsxs)("div",{className:"half-right",children:[(0,s.jsx)("div",{children:(0,s.jsx)(i.yQN,{variant:"elevated",onClick:()=>n(!a),children:a?"Show code details":"Show full code"})}),(0,s.jsx)(l.A,{language:"tsx",value:a?f:g})]})]})}function b(a){const n={code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",span:"span",ul:"ul",...(0,t.R)(),...a.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{children:"Create a custom painter"}),"\n",(0,s.jsx)(N,{}),"\n",(0,s.jsx)(n.h2,{children:"How to do it"}),"\n",(0,s.jsx)(n.p,{children:"Let's see how to create a custom painter by studying an example."}),"\n",(0,s.jsxs)(n.p,{children:["The Painter should paint the stars visible from earth with naked eyes. We use\n",(0,s.jsx)(n.code,{children:"gl.POINTS"})," of different colors, size and brightness. The attribute is a ",(0,s.jsx)(n.code,{children:"vec4"}),"\nvector with:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"x"}),": longitude (from 0.0 to 2 PI)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"y"}),": latitude (from -PI / 2 to +PI / 2)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"z"}),": brightness (from 0.02 to 2.0)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"w"}),": color (from 0.0 to 1.0, 0.0 is red and cold and 1.0 is blue and hot)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["We start by creating a class that extends ",(0,s.jsx)(n.code,{children:"TgdPainter"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsxs)(n.code,{className:"hljs language-ts",children:[(0,s.jsxs)(n.span,{className:"code-line numbered-code-line","data-line-number":"1",children:[(0,s.jsx)(n.span,{className:"hljs-keyword",children:"import"})," { ",(0,s.jsx)(n.span,{className:"hljs-title class_",children:"TgdPainter"}),", ",(0,s.jsx)(n.span,{className:"hljs-title class_",children:"TgdContext"})," } ",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"from"})," ",(0,s.jsx)(n.span,{className:"hljs-string",children:'"@tolokoban/tgd"'})]}),"\n",(0,s.jsx)(n.span,{className:"code-line numbered-code-line","data-line-number":"2"}),"\n",(0,s.jsxs)(n.span,{className:"code-line numbered-code-line","data-line-number":"3",children:[(0,s.jsx)(n.span,{className:"hljs-keyword",children:"export"})," ",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"class"})," ",(0,s.jsx)(n.span,{className:"hljs-title class_",children:"PainterStars"})," ",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"extends"})," ",(0,s.jsx)(n.span,{className:"hljs-title class_ inherited__",children:"TgdPainter"})," {"]}),"\n",(0,s.jsxs)(n.span,{className:"code-line numbered-code-line","data-line-number":"4",children:["    ",(0,s.jsx)(n.span,{className:"hljs-comment",children:"// Number of stars"})]}),"\n",(0,s.jsxs)(n.span,{className:"code-line numbered-code-line","data-line-number":"5",children:["    ",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"private"})," ",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"readonly"})," ",(0,s.jsx)(n.span,{className:"hljs-attr",children:"count"}),": ",(0,s.jsx)(n.span,{className:"hljs-built_in",children:"number"})]}),"\n",(0,s.jsx)(n.span,{className:"code-line numbered-code-line","data-line-number":"6"}),"\n",(0,s.jsxs)(n.span,{className:"code-line numbered-code-line","data-line-number":"7",children:["    ","/**"]}),"\n",(0,s.jsx)(n.span,{className:"code-line numbered-code-line","data-line-number":"8",children:"     *"}),"\n",(0,s.jsxs)(n.span,{className:"code-line numbered-code-line","data-line-number":"9",children:["     * ",(0,s.jsx)(n.span,{className:"hljs-comment hljs-doctag",children:"@param"})," data A sequence of 4 floats: longitude, latitude, brightness and color."]}),"\n",(0,s.jsx)(n.span,{className:"code-line numbered-code-line","data-line-number":"10",children:"     */"}),"\n",(0,s.jsxs)(n.span,{className:"code-line numbered-code-line","data-line-number":"11",children:["    ",(0,s.jsx)(n.span,{className:"hljs-title function_",children:"constructor"}),"(",(0,s.jsx)(n.span,{className:"hljs-params hljs-keyword",children:"private"})," ",(0,s.jsx)(n.span,{className:"hljs-params hljs-keyword",children:"readonly"})," ",(0,s.jsx)(n.span,{className:"hljs-params hljs-attr",children:"context"}),": ",(0,s.jsx)(n.span,{className:"hljs-params hljs-title class_",children:"TgdContext"}),", ",(0,s.jsx)(n.span,{className:"hljs-params hljs-attr",children:"data"}),": ",(0,s.jsx)(n.span,{className:"hljs-params hljs-title class_",children:"Float32Array"}),") {"]}),"\n",(0,s.jsxs)(n.span,{className:"code-line numbered-code-line","data-line-number":"12",children:["        ",(0,s.jsx)(n.span,{className:"hljs-variable language_",children:"super"}),"()"]}),"\n",(0,s.jsxs)(n.span,{className:"code-line numbered-code-line","data-line-number":"13",children:["        ",(0,s.jsx)(n.span,{className:"hljs-variable language_",children:"this"}),".",(0,s.jsx)(n.span,{className:"hljs-property",children:"count"})," = data.",(0,s.jsx)(n.span,{className:"hljs-property",children:"length"})," / ",(0,s.jsx)(n.span,{className:"hljs-number",children:"4"})]}),"\n",(0,s.jsx)(n.span,{className:"code-line numbered-code-line","data-line-number":"14",children:"    }"}),"\n",(0,s.jsx)(n.span,{className:"code-line numbered-code-line","data-line-number":"15"}),"\n",(0,s.jsxs)(n.span,{className:"code-line numbered-code-line","data-line-number":"16",children:["    ",(0,s.jsx)(n.span,{className:"hljs-title function_",children:"paint"}),"(",(0,s.jsx)(n.span,{className:"hljs-params hljs-attr",children:"time"}),": ",(0,s.jsx)(n.span,{className:"hljs-params hljs-built_in",children:"number"}),") {}"]}),"\n",(0,s.jsx)(n.span,{className:"code-line numbered-code-line","data-line-number":"17"}),"\n",(0,s.jsxs)(n.span,{className:"code-line numbered-code-line","data-line-number":"18",children:["    ",(0,s.jsx)(n.span,{className:"hljs-title function_",children:"delete"}),"(",") {}"]}),"\n",(0,s.jsx)(n.span,{className:"code-line numbered-code-line","data-line-number":"19",children:"}"}),"\n"]})}),"\n",(0,s.jsxs)(n.p,{children:["We need a vertex shader (",(0,s.jsx)(n.code,{children:"painter-stars.vert"}),"):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsxs)(n.code,{className:"hljs language-glsl",children:[(0,s.jsx)(n.span,{className:"hljs-meta",children:"#version 300 es"}),"\n\n",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"precision"})," ",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"mediump"})," ",(0,s.jsx)(n.span,{className:"hljs-type",children:"float"}),";\n\n",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"uniform"})," ",(0,s.jsx)(n.span,{className:"hljs-type",children:"mat4"})," uniModelViewMatrix;\n",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"uniform"})," ",(0,s.jsx)(n.span,{className:"hljs-type",children:"mat4"})," uniProjectionMatrix;\n\n",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"in"})," ",(0,s.jsx)(n.span,{className:"hljs-type",children:"vec4"})," attStar;\n\n",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"out"})," ",(0,s.jsx)(n.span,{className:"hljs-type",children:"vec4"})," varColor;\n\n",(0,s.jsx)(n.span,{className:"hljs-type",children:"void"})," main() {\n    ",(0,s.jsx)(n.span,{className:"hljs-type",children:"float"})," longitude = attStar.x;\n    ",(0,s.jsx)(n.span,{className:"hljs-type",children:"float"})," latitude = attStar.y;\n    ",(0,s.jsx)(n.span,{className:"hljs-type",children:"float"})," brightness = attStar.z;\n    ",(0,s.jsx)(n.span,{className:"hljs-type",children:"float"})," temperature = attStar.w;\n\n    ",(0,s.jsx)(n.span,{className:"hljs-type",children:"vec3"})," color = ",(0,s.jsx)(n.span,{className:"hljs-built_in",children:"mix"}),"(\n        ",(0,s.jsx)(n.span,{className:"hljs-type",children:"vec3"}),"(",(0,s.jsx)(n.span,{className:"hljs-number",children:".5"}),", ",(0,s.jsx)(n.span,{className:"hljs-number",children:".1"}),", ",(0,s.jsx)(n.span,{className:"hljs-number",children:".1"}),"),\n        ",(0,s.jsx)(n.span,{className:"hljs-type",children:"vec3"}),"(",(0,s.jsx)(n.span,{className:"hljs-number",children:".1"}),", ",(0,s.jsx)(n.span,{className:"hljs-number",children:".2"}),", ",(0,s.jsx)(n.span,{className:"hljs-number",children:".5"}),"),\n        temperature\n    ) * (",(0,s.jsx)(n.span,{className:"hljs-number",children:".5"})," + brightness);\n    varColor = ",(0,s.jsx)(n.span,{className:"hljs-type",children:"vec4"}),"(color, ",(0,s.jsx)(n.span,{className:"hljs-number",children:"1.0"}),");\n\n    ",(0,s.jsx)(n.span,{className:"hljs-type",children:"float"})," r = ",(0,s.jsx)(n.span,{className:"hljs-built_in",children:"cos"}),"(latitude);\n    ",(0,s.jsx)(n.span,{className:"hljs-type",children:"float"})," z = ",(0,s.jsx)(n.span,{className:"hljs-built_in",children:"sin"}),"(latitude);\n    ",(0,s.jsx)(n.span,{className:"hljs-type",children:"float"})," x = ",(0,s.jsx)(n.span,{className:"hljs-built_in",children:"cos"}),"(longitude) * r;\n    ",(0,s.jsx)(n.span,{className:"hljs-type",children:"float"})," y = ",(0,s.jsx)(n.span,{className:"hljs-built_in",children:"sin"}),"(longitude) * r;\n    ",(0,s.jsx)(n.span,{className:"hljs-built_in",children:"gl_Position"})," = uniProjectionMatrix\n        * uniModelViewMatrix\n        * ",(0,s.jsx)(n.span,{className:"hljs-type",children:"vec4"}),"(x, y, z, ",(0,s.jsx)(n.span,{className:"hljs-number",children:"1.0"}),");\n    ",(0,s.jsx)(n.span,{className:"hljs-built_in",children:"gl_Position"}),".z = ",(0,s.jsx)(n.span,{className:"hljs-built_in",children:"gl_Position"}),".w;\n\n    ",(0,s.jsx)(n.span,{className:"hljs-built_in",children:"gl_PointSize"})," = ",(0,s.jsx)(n.span,{className:"hljs-number",children:"50.0"})," * brightness;\n}\n"]})}),"\n",(0,s.jsx)(n.p,{children:"And a fragment one:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsxs)(n.code,{className:"hljs language-glsl",children:[(0,s.jsx)(n.span,{className:"hljs-meta",children:"#version 300 es"}),"\n\n",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"precision"})," ",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"mediump"})," ",(0,s.jsx)(n.span,{className:"hljs-type",children:"float"}),";\n\n",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"in"})," ",(0,s.jsx)(n.span,{className:"hljs-type",children:"vec4"})," varColor;\n\n",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"out"})," ",(0,s.jsx)(n.span,{className:"hljs-type",children:"vec4"})," FragColor;\n\n",(0,s.jsx)(n.span,{className:"hljs-type",children:"void"})," main() {\n    ",(0,s.jsx)(n.span,{className:"hljs-type",children:"vec2"})," point = ",(0,s.jsx)(n.span,{className:"hljs-number",children:"2.0"})," * ",(0,s.jsx)(n.span,{className:"hljs-built_in",children:"gl_PointCoord"}),".xy - ",(0,s.jsx)(n.span,{className:"hljs-type",children:"vec2"}),"(",(0,s.jsx)(n.span,{className:"hljs-number",children:"1.0"}),");\n    ",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"if"})," (",(0,s.jsx)(n.span,{className:"hljs-built_in",children:"dot"}),"(point, point) > ",(0,s.jsx)(n.span,{className:"hljs-number",children:"1.0"}),") ",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"discard"}),";\n\n    FragColor = varColor;\n}\n"]})}),"\n",(0,s.jsx)(n.p,{children:"Let's import the code of the shaders:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsxs)(n.code,{className:"hljs language-ts",children:[(0,s.jsx)(n.span,{className:"hljs-keyword",children:"import"})," vert ",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"from"})," ",(0,s.jsx)(n.span,{className:"hljs-string",children:'"./painter-stars.vert"'}),"\n",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"import"})," frag ",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"from"})," ",(0,s.jsx)(n.span,{className:"hljs-string",children:'"./painter-stars.frag"'}),"\n"]})}),"\n",(0,s.jsx)(n.p,{children:"And, in the constructor, we create the WebGL Program like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsxs)(n.code,{className:"hljs language-ts",children:[(0,s.jsx)(n.span,{className:"hljs-variable language_",children:"this"}),".",(0,s.jsx)(n.span,{className:"hljs-property",children:"prg"})," = context.",(0,s.jsx)(n.span,{className:"hljs-property",children:"programs"}),".",(0,s.jsx)(n.span,{className:"hljs-title function_",children:"create"}),"(\n    {\n        vert,\n        frag,\n    },\n    ",(0,s.jsx)(n.span,{className:"hljs-string",children:'"PainterStars"'}),"\n)\n"]})}),"\n",(0,s.jsx)(n.p,{children:"Now we need a VertexArrayObject:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsxs)(n.code,{className:"hljs language-ts",children:[(0,s.jsx)(n.span,{className:"hljs-keyword",children:"const"})," dataset = ",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"new"})," ",(0,s.jsx)(n.span,{className:"hljs-title class_",children:"TgdDataset"}),"({\n    ",(0,s.jsx)(n.span,{className:"hljs-attr",children:"attStar"}),": ",(0,s.jsx)(n.span,{className:"hljs-string",children:'"vec4"'}),",\n})\ndataset.",(0,s.jsx)(n.span,{className:"hljs-title function_",children:"set"}),"(",(0,s.jsx)(n.span,{className:"hljs-string",children:'"attStar"'}),", data)\n",(0,s.jsx)(n.span,{className:"hljs-variable language_",children:"this"}),".",(0,s.jsx)(n.span,{className:"hljs-property",children:"vao"})," = context.",(0,s.jsx)(n.span,{className:"hljs-title function_",children:"createVAO"}),"(",(0,s.jsx)(n.span,{className:"hljs-variable language_",children:"this"}),".",(0,s.jsx)(n.span,{className:"hljs-property",children:"prg"}),", [dataset])\n"]})}),"\n",(0,s.jsxs)(n.p,{children:["We are now ready to implement the ",(0,s.jsx)(n.code,{children:"paint()"})," method:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsxs)(n.code,{className:"hljs language-ts",children:[(0,s.jsx)(n.span,{className:"hljs-title function_",children:"paint"}),"(",(0,s.jsx)(n.span,{className:"hljs-params"}),") {\n    ",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"const"})," { context, prg, vao } = ",(0,s.jsx)(n.span,{className:"hljs-variable language_",children:"this"}),"\n    ",(0,s.jsx)(n.span,{className:"hljs-keyword",children:"const"})," { camera, gl } = context\n    prg.",(0,s.jsx)(n.span,{className:"hljs-title function_",children:"use"}),"()\n    prg.",(0,s.jsx)(n.span,{className:"hljs-title function_",children:"uniformMatrix4fv"}),"(",(0,s.jsx)(n.span,{className:"hljs-string",children:'"uniModelViewMatrix"'}),", camera.",(0,s.jsx)(n.span,{className:"hljs-property",children:"matrixModelView"}),")\n    prg.",(0,s.jsx)(n.span,{className:"hljs-title function_",children:"uniformMatrix4fv"}),"(",(0,s.jsx)(n.span,{className:"hljs-string",children:'"uniProjectionMatrix"'}),", camera.",(0,s.jsx)(n.span,{className:"hljs-property",children:"matrixProjection"}),")\n    vao.",(0,s.jsx)(n.span,{className:"hljs-title function_",children:"bind"}),"()\n    gl.",(0,s.jsx)(n.span,{className:"hljs-title function_",children:"drawArrays"}),"(gl.",(0,s.jsx)(n.span,{className:"hljs-property",children:"POINTS"}),", ",(0,s.jsx)(n.span,{className:"hljs-number",children:"0"}),", ",(0,s.jsx)(n.span,{className:"hljs-variable language_",children:"this"}),".",(0,s.jsx)(n.span,{className:"hljs-property",children:"count"}),")\n}\n"]})}),"\n",(0,s.jsx)(n.p,{children:"To finish properly, we need to implement the clean up function:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsxs)(n.code,{className:"hljs language-ts",children:[(0,s.jsx)(n.span,{className:"hljs-title function_",children:"delete"}),"(",(0,s.jsx)(n.span,{className:"hljs-params"}),") {\n    ",(0,s.jsx)(n.span,{className:"hljs-variable language_",children:"this"}),".",(0,s.jsx)(n.span,{className:"hljs-property",children:"context"}),".",(0,s.jsx)(n.span,{className:"hljs-property",children:"programs"}),".",(0,s.jsx)(n.span,{className:"hljs-title function_",children:"delete"}),"(",(0,s.jsx)(n.span,{className:"hljs-variable language_",children:"this"}),".",(0,s.jsx)(n.span,{className:"hljs-property",children:"prg"}),")\n    ",(0,s.jsx)(n.span,{className:"hljs-variable language_",children:"this"}),".",(0,s.jsx)(n.span,{className:"hljs-property",children:"vao"}),".",(0,s.jsx)(n.span,{className:"hljs-title function_",children:"delete"}),"()\n}\n"]})})]})}function v(a={}){const{wrapper:n}={...(0,t.R)(),...a.components};return n?(0,s.jsx)(n,{...a,children:(0,s.jsx)(b,{...a})}):b(a)}},8453:(a,n,e)=>{e.d(n,{R:()=>r});var s=e(6540);const t=s.createContext({});function r(a){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof a?a(n):{...n,...a}}),[n,a])}}}]);