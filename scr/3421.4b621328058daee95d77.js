"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[3421],{4912:(n,t,e)=>{e.r(t),e.d(t,{default:()=>x});var a=e(4848),i=e(8453),s=e(6540),o=e(7402),c=e(9074),r=e(9199),u=e(7289);function l(n){n.camera.transfo.distance=10;const t=new r.g6h(n,{transfo:{position:[-1,-1,0]}});n.add(new r.o57(n,{color:[.4,.2,0,1]}),new r.Ipk(n,{depth:r.Eg5.lessOrEqual,children:[t,new r.g6h(n,{material:new r.M3Z({color:[.5,.5,.5,1]}),transfo:{position:[0,0,-.1]}})]}));const e={duration:1,easingFunction:r.Wcc,action(n){t.transfo.setPosition(-1,2*n-1,0)}},a={duration:1,easingFunction:r.Wcc,action(n){t.transfo.setPosition(2*n-1,1,0)}},i={duration:1,easingFunction:r.Wcc,action(n){t.transfo.setPosition(1,1-2*n,0)}},s={duration:1,easingFunction:r.Wcc,action(n){t.transfo.setPosition(1-2*n,-1,0)}};n.animSchedule((0,r._b$)([e,a,i,s],{repeat:1/0})),n.animSchedule((0,r._b$)([{duration:.5,action(n){t.transfo.setScale(1-.5*n)}},{duration:.5,action(n){t.transfo.setScale(1-.5*(1-n))}}],{repeat:1/0})),n.paint()}function d(){return(0,a.jsx)(u.A,{onReady:l})}const g={"Detail #1":"    ctx.camera.transfo.distance = 10\n    const cube = new TgdPainterMesh(ctx, { transfo: { position: [-1, -1, 0] } })\n    ctx.add(\n        new TgdPainterClear(ctx, { color: [0.4, 0.2, 0, 1] }),\n        new TgdPainterState(ctx, {\n            depth: webglPresetDepth.lessOrEqual,\n            children: [\n                cube,\n                new TgdPainterMesh(ctx, {\n                    material: new TgdMaterialSolid({\n                        color: [0.5, 0.5, 0.5, 1],\n                    }),\n                    transfo: { position: [0, 0, -0.1] },\n                }),\n            ],\n        })\n    )\n    const anim1: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(-1, t * 2 - 1, 0)\n        },\n    }\n    const anim2: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(t * 2 - 1, 1, 0)\n        },\n    }\n    const anim3: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(+1, 1 - t * 2, 0)\n        },\n    }\n    const anim4: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(1 - t * 2, -1, 0)\n        },\n    }\n    ctx.animSchedule(\n        tgdAnimChain([anim1, anim2, anim3, anim4], {\n            repeat: Infinity,\n        })\n    )\n    ctx.animSchedule(\n        tgdAnimChain(\n            [\n                {\n                    duration: 0.5,\n                    action(t) {\n                        cube.transfo.setScale(1 - t * 0.5)\n                    },\n                },\n                {\n                    duration: 0.5,\n                    action(t) {\n                        cube.transfo.setScale(1 - (1 - t) * 0.5)\n                    },\n                },\n            ],\n            { repeat: Infinity }\n        )\n    )\n    ctx.paint()"},h='import {\n    TgdAnimation,\n    tgdAnimChain,\n    TgdContext,\n    tgdEasingFunctionInOutCubic,\n    TgdMaterialSolid,\n    TgdPainterClear,\n    TgdPainterMesh,\n    TgdPainterState,\n    webglPresetDepth,\n} from "@tolokoban/tgd"\nimport View from "@/components/demo/Tgd"\n\nfunction init(ctx: TgdContext) {\n    ctx.camera.transfo.distance = 10\n    const cube = new TgdPainterMesh(ctx, { transfo: { position: [-1, -1, 0] } })\n    ctx.add(\n        new TgdPainterClear(ctx, { color: [0.4, 0.2, 0, 1] }),\n        new TgdPainterState(ctx, {\n            depth: webglPresetDepth.lessOrEqual,\n            children: [\n                cube,\n                new TgdPainterMesh(ctx, {\n                    material: new TgdMaterialSolid({\n                        color: [0.5, 0.5, 0.5, 1],\n                    }),\n                    transfo: { position: [0, 0, -0.1] },\n                }),\n            ],\n        })\n    )\n    const anim1: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(-1, t * 2 - 1, 0)\n        },\n    }\n    const anim2: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(t * 2 - 1, 1, 0)\n        },\n    }\n    const anim3: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(+1, 1 - t * 2, 0)\n        },\n    }\n    const anim4: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(1 - t * 2, -1, 0)\n        },\n    }\n    ctx.animSchedule(\n        tgdAnimChain([anim1, anim2, anim3, anim4], {\n            repeat: Infinity,\n        })\n    )\n    ctx.animSchedule(\n        tgdAnimChain(\n            [\n                {\n                    duration: 0.5,\n                    action(t) {\n                        cube.transfo.setScale(1 - t * 0.5)\n                    },\n                },\n                {\n                    duration: 0.5,\n                    action(t) {\n                        cube.transfo.setScale(1 - (1 - t) * 0.5)\n                    },\n                },\n            ],\n            { repeat: Infinity }\n        )\n    )\n    ctx.paint()\n}\n\nexport default function Demo() {\n    return <View onReady={init} />\n}\n';function m(){const[n,t]=s.useState(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"half-left",children:(0,a.jsx)(d,{})}),(0,a.jsxs)("div",{className:"half-right",children:[(0,a.jsx)("div",{children:(0,a.jsx)(o.yQN,{variant:"elevated",onClick:()=>t(!n),children:n?"Show code details":"Show full code"})}),(0,a.jsx)(c.A,{language:"tsx",value:n?h:g})]})]})}function f(n){const t={a:"a",p:"p",...(0,i.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["You can chain animations with this utility:\n",(0,a.jsx)(t.a,{href:"docs/classes/tgdAnimChain.html",children:"tgdAnimChain"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"In this example, we start two chains in parallel: one for the translations, one\nfor the scales."}),"\n",(0,a.jsx)(m,{})]})}function x(n={}){const{wrapper:t}={...(0,i.R)(),...n.components};return t?(0,a.jsx)(t,{...n,children:(0,a.jsx)(f,{...n})}):f(n)}},7289:(n,t,e)=>{e.d(t,{A:()=>u});var a=e(4848),i=e(6540),s=e(9199),o=e(7402),c=e(3686);const r={Tgd:"hgIjhDQIuBCJEQ4ZgLXp",relative:"efOyHCihw9wfMB6AaAqw",overlay:"ywC8N0Uxbvm2Ug2DwPkE",loading:"PBWSRsbiwEqGpeL0hEfm",screen:"BErChOLWGtciKhh3IFud",canvas:"fT7FcYouYlPbElIAEXRP",gizmo:"uAPfWt_Dhe7RaRrnmIu0"};function u({className:n,options:t,onReady:e,gizmo:u=!1,width:l="640px",height:d="480px",noBorder:g=!1,assets:h,children:m}){const[f,x]=i.useState(!0),[p,b]=i.useState(!1),w=i.useRef(null),C=i.useRef(null),j=i.useRef(null),v=i.useRef(null),[F,P]=i.useState(!0);let T="auto";l.endsWith("px")&&d.endsWith("px")&&(l.substring(l.length-2),d.substring(d.length-2));const S=n=>{if(!n)return;if(C.current)return;C.current=n;const a=new s.tfp(n,t);w.current=a,P(!0),async function({glb:n,data:t,text:e,image:a}={}){console.log("ðŸš€ [Tgd] glb, data, text, image = ",n,t,e,a);const i={glb:{},data:{},text:{},image:{}},o=[];return a&&Object.keys(a).forEach((n=>{o.push((async()=>{const t=a[n];console.log("Loading image:",t);const e=await(0,s.V_9)(t);e&&(i.image[n]=e)}))})),n&&Object.keys(n).forEach((t=>{o.push((async()=>{const e=n[t];console.log("Loading GLB:",e);const a=await(0,s.TCe)(e);a&&(i.glb[t]=a)}))})),t&&Object.keys(t).forEach((n=>{o.push((async()=>{const e=t[n],a=await(0,s.vSU)(e);a&&(i.data[n]=a)}))})),e&&Object.keys(e).forEach((n=>{o.push((async()=>{const t=e[n],a=await(0,s.jWq)(t);a&&(i.text[n]=a)}))})),await Promise.all(o.map((n=>n()))),i}(h).then((n=>{console.log("Ready!"),e(a,n),a.paint(),P(!1)})).catch((n=>{console.error("Unable to initialize the scene!",n),P(!1)}));const i=j.current;i&&i.attachContext(a)},y=n=>{const t=new s.GbF({canvas:n});j.current=t,t.eventTipClick.addListener((({to:n})=>{const t=w.current;console.log("ðŸš€ [tgd] to, context =",n,t),t&&t.animSchedule({duration:.2,easingFunction:s.Wcc,action:(0,s.vRM)(t.camera,{orientation:n})})}));const e=w.current;e&&t.attachContext(e)};return i.useEffect((()=>{const n=C.current,t=w.current;if(!n||!t)return;const e=new ResizeObserver((()=>t.paint()));return e.observe(n),n.requestFullscreen||(n.requestFullscreen=n.webkitRequestFullscreen),b(Boolean(n.requestFullscreen)),()=>e.unobserve(n)}),[w.current,C.current]),g?(0,a.jsxs)("div",{ref:v,className:r.screen,style:{width:f?l:d,height:f?d:l},children:[(0,a.jsx)("canvas",{className:r.canvas,ref:S}),u&&(0,a.jsx)("canvas",{className:r.gizmo,ref:y})]}):(0,a.jsxs)("div",{className:o.Sxu.classNames.join(n,r.Tgd),children:[(0,a.jsxs)(o.sWC,{display:"flex",justifyContent:"space-between",children:[(0,a.jsx)(o.yQN,{variant:"elevated",onClick:()=>x(!f),enabled:!F,children:f?"Switch to Portrait":"Switch to Landscape"}),p&&(0,a.jsx)(o.yQN,{variant:"elevated",onClick:()=>{const n=v.current;n&&n.requestFullscreen()},enabled:!F,children:"Fullscreen"})]}),(0,a.jsxs)("div",{className:r.relative,children:[(0,a.jsxs)("div",{ref:v,className:r.screen,style:{width:f?l:d,height:f?d:l},children:[(0,a.jsx)("canvas",{className:r.canvas,ref:S}),u&&(0,a.jsx)("canvas",{className:r.gizmo,ref:y})]}),(0,a.jsx)("div",{className:o.Sxu.classNames.join(r.overlay,F&&r.loading),children:(0,a.jsx)(c.A,{})}),m]})]})}},8453:(n,t,e)=>{e.d(t,{R:()=>s});var a=e(6540);const i=a.createContext({});function s(n){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}}}]);