"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[499],{437:(n,t,e)=>{e.r(t),e.d(t,{default:()=>h});var r=e(893),a=e(155),i=e(990);const o=function(){function n(n,t,e){this.context=n,this.axisZ=new a.Ui,this.camera=new a.yr,this.cameraL=new a.yr,this.cameraR=new a.yr,this.keyboard=new a.Uj,this.radius=0,this.texture=e,this.program=n.programs.create({vert:"#version 300 es\n\nuniform sampler2D uniTexture;\nuniform mat4 uniCameraViewModelL;\nuniform mat4 uniCameraViewModelR;\nuniform mat4 uniCameraProjection;\n\nin vec4 attPosition;\nin vec3 attNormal;\nin vec2 attUV;\n\nout vec3 varColor;\nout vec3 varNormal;\n\nvoid main() {\n    varNormal = attNormal;\n    varColor = texture(uniTexture, attUV).rgb;\n    vec4 pointL = uniCameraViewModelL * attPosition;\n    vec4 pointR = uniCameraViewModelR * attPosition;\n    float L = dot(pointL, pointL);\n    float R = dot(pointR, pointR);\n    float T = L + R;\n    float a = T > 0.0 ? L / T : 0.5;\n    vec4 point = mix(pointR, pointL, a);\n    gl_Position = uniCameraProjection * point;\n}",frag:"#version 300 es\n\nprecision mediump float;\n\nuniform vec3 uniAxisZ;\n\nout vec4 FragColor;\n\nin vec3 varColor;\nin vec3 varNormal;\n\nconst vec3 SUN = normalize(vec3(1, 2, 4));\n\nfloat calcDiffuse(vec3 normal, vec3 lightVector, float lightIntensity);\nfloat calcSpecular(vec3 normal, vec3 cameraZ, vec3 lightVector, float lightIntensity, float sharpness);\n\nvoid main() {\n    vec3 normal = normalize(varNormal);\n    float ambient = 0.3;\n    float diffuse = calcDiffuse(\n        normal,\n        SUN,\n        1.5\n    );\n    float specular = calcSpecular(\n        normal,\n        uniAxisZ,\n        SUN,\n        2.0,\n        10.0\n    );\n    diffuse = dot(normal, uniAxisZ);\n    specular = 0.0;\n    FragColor = vec4(\n        varColor * (ambient + diffuse) + vec3(specular), \n        1\n    );\n}\n\nfloat calcDiffuse(\n    vec3 normal,\n    vec3 lightVector,\n    float lightIntensity\n) {\n    return lightIntensity * max(\n        0.0,\n        dot(normal, lightVector)\n    );\n}\n\nfloat calcSpecular(\n    vec3 normal,\n    vec3 cameraZ,\n    vec3 lightVector,\n    float lightIntensity,\n    float sharpness\n) {\n    if (dot(normal, lightVector) > 0.0) {\n        vec3 H = normalize(cameraZ + lightVector);\n        return lightIntensity * pow(\n            dot(normal, cameraZ),\n            sharpness\n        );\n    }\n    return 0.0;\n}\n"});var r=function(n){var t=(new a.a7).parse(n),e=t.type,r=t.count,i=t.elements,o=t.attPosition,s=t.attNormal,c=t.attUV;if(!s)throw Error("Missing attNormal!");if(!c)throw Error("Missing attUV!");var l=new a.Yp({attPosition:"vec3",attNormal:"vec3",attUV:"vec2"});return l.set("attNormal",new Float32Array(s)),l.set("attPosition",new Float32Array(o)),l.set("attUV",new Float32Array(c)),{dataset:l,elements:i,count:r,type:e}}(t),i=r.dataset,o=r.elements,s=r.type;this.type=s,this.vao=n.createVAO(this.program,[i],o),this.count=o.length,this.camera.distance=10,this.orbitControl=new a.tz(this.camera),this.orbitControl.attach(n.canvas)}return n.prototype.delete=function(){this.keyboard.detach(),this.context.programs.delete(this.program)},n.prototype.paint=function(n,t){var e=this.context.gl,r=this,a=r.texture,i=r.vao,o=r.program,s=r.type,c=r.count,l=r.cameraL,u=r.cameraR,h=r.axisZ;l.width=e.drawingBufferWidth,l.height=e.drawingBufferHeight,u.width=e.drawingBufferWidth,u.height=e.drawingBufferHeight,o.use(),a.activate(o,"uniTexture"),o.uniform3fv("uniAxisZ",h),o.uniformMatrix4fv("uniCameraViewModelL",l.matrixViewModel),o.uniformMatrix4fv("uniCameraViewModelR",u.matrixViewModel),o.uniformMatrix4fv("uniCameraProjection",l.matrixProjection),e.disable(e.CULL_FACE),e.cullFace(e.BACK),e.enable(e.DEPTH_TEST),e.clearDepth(1),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.clear(e.DEPTH_BUFFER_BIT),i.bind(),e.drawElements(e.TRIANGLES,c,e[s],0)},n.prototype.update=function(n,t){var e=this,r=e.keyboard,i=e.camera,o=e.cameraL,s=e.cameraR,c=e.axisZ;i.toAxisZ(c);var l=.001;r.isPressed("ArrowRight")?i.orbitAroundY(t*l):r.isPressed("ArrowLeft")&&i.orbitAroundY(-t*l),r.isPressed("ArrowUp")?i.orbitAroundX(t*l):r.isPressed("ArrowDown")&&i.orbitAroundX(-t*l),r.isPressed("0")&&i.setOrientation(new a.EK),r.isPressed("+")&&(this.radius=Math.min(.5*Math.PI,this.radius+.001*t)),r.isPressed("-")&&(this.radius=Math.max(0,this.radius-.001*t)),r.isPressed("Space")&&(this.radius=0);var u=this.radius;o.from(i),s.from(i),o.orbitAroundY(+u),s.orbitAroundY(-u)},n}(),s=e.p+"img/chest.a9fffcbb04f1bb136988.jpg";function c(){return(0,r.jsx)(i.Z,{onReady:l})}function l(n){var t=new a.Op(n,{color:[0,0,0,1]});n.add(t),n.paint(),fetch("mesh/test.obj").then((function(n){if(!n.ok)throw Error("Error #".concat(n.status,": ").concat(n.statusText,"!"));return n.text()})).then((function(t){var e=n.textures2D.create({image:s}),r=new o(n,t,e);n.add(r),n.paint(),n.play()}))}function u(n){const t=Object.assign({h1:"h1"},n.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{children:"Test"}),"\n",(0,r.jsx)(c,{})]})}const h=function(n={}){const{wrapper:t}=n.components||{};return t?(0,r.jsx)(t,Object.assign({},n,{children:(0,r.jsx)(u,n)})):u(n)}},325:(n,t,e)=>{e.d(t,{Z:()=>s});var r=e(81),a=e.n(r),i=e(645),o=e.n(i)()(a());o.push([n.id,".hgIjhDQIuBCJEQ4ZgLXp {\n    display: inline-block;\n    margin: 1em;\n}\n\n.hgIjhDQIuBCJEQ4ZgLXp canvas {\n    box-shadow: 0 0.25em 0.5em #000;\n    max-width: 100vw;\n    max-height: 100vh;\n}\n",""]),o.locals={Tgd:"hgIjhDQIuBCJEQ4ZgLXp"};const s=o},990:(n,t,e)=>{e.d(t,{Z:()=>A});var r=e(893),a=e(294),i=e(155),o=e(686),s=e(379),c=e.n(s),l=e(795),u=e.n(l),h=e(569),f=e.n(h),m=e(565),d=e.n(m),v=e(216),p=e.n(v),g=e(589),w=e.n(g),x=e(325),y={};y.styleTagTransform=w(),y.setAttributes=d(),y.insert=f().bind(null,"head"),y.domAPI=u(),y.insertStyleElement=p(),c()(x.Z,y);const b=x.Z&&x.Z.locals?x.Z.locals:void 0;var C=function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var r,a,i=e.call(n),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(n){a={error:n}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return o};function A(n){var t=n.className,e=n.options,s=n.onReady,c=n.width,l=void 0===c?"640px":c,u=n.height,h=void 0===u?"480px":u,f=n.noBorder,m=void 0!==f&&f,d=C(a.useState(!1),2),v=d[0],p=d[1],g=a.useRef(null),w=a.useRef(null),x=function(n){if(n){w.current=n;var t=new i.Zc(n,e);g.current=t,s&&s(t),t.paint()}};return a.useEffect((function(){var n=w.current,t=g.current;if(n&&t){var e=new ResizeObserver((function(){return t.paint()}));return e.observe(n),n.requestFullscreen||(n.requestFullscreen=n.webkitRequestFullscreen),p(Boolean(n.requestFullscreen)),function(){return e.unobserve(n)}}}),[g.current,w.current]),m?(0,r.jsx)("canvas",{className:t,style:{width:l,height:h},ref:x}):(0,r.jsxs)("div",{className:o.Q2.classNames.join(t,b.Tgd),children:[(0,r.jsx)(o.Rf,{display:"flex",justifyContent:"flex-end",children:v&&(0,r.jsx)(o.NA,{variant:"text",onClick:function(){var n=w.current;n&&n.requestFullscreen()},children:"Afficher en plein Ã©cran"})}),(0,r.jsx)("canvas",{style:{width:l,height:h},ref:x})]})}}}]);