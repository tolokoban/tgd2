"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[69],{6069:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},l=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(6540)),c="undefined"!=typeof window&&"navigator"in window&&/Win/i.test(navigator.platform),u="undefined"!=typeof window&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),f="npm__react-simple-code-editor__textarea",d="\n/**\n * Reset the text fill color so that placeholder is visible\n */\n.".concat(f,":empty {\n  -webkit-text-fill-color: inherit !important;\n}\n\n/**\n * Hack to apply on some CSS on IE10 and IE11\n */\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  /**\n    * IE doesn't support '-webkit-text-fill-color'\n    * So we use 'color: transparent' to make the text transparent on IE\n    * Unlike other browsers, it doesn't affect caret color in IE\n    */\n  .").concat(f," {\n    color: transparent !important;\n  }\n\n  .").concat(f,"::selection {\n    background-color: #accef7 !important;\n    color: transparent !important;\n  }\n}\n"),h=s.forwardRef((function(e,t){var n=e.autoFocus,i=e.disabled,o=e.form,a=e.highlight,h=e.ignoreTabKey,g=void 0!==h&&h,v=e.insertSpaces,y=void 0===v||v,m=e.maxLength,b=e.minLength,k=e.name,S=e.onBlur,w=e.onClick,C=e.onFocus,E=e.onKeyDown,x=e.onKeyUp,_=e.onValueChange,K=e.padding,O=void 0===K?0:K,j=e.placeholder,D=e.preClassName,P=e.readOnly,I=e.required,z=e.style,M=e.tabSize,T=void 0===M?2:M,F=e.textareaClassName,L=e.textareaId,W=e.value,B=l(e,["autoFocus","disabled","form","highlight","ignoreTabKey","insertSpaces","maxLength","minLength","name","onBlur","onClick","onFocus","onKeyDown","onKeyUp","onValueChange","padding","placeholder","preClassName","readOnly","required","style","tabSize","textareaClassName","textareaId","value"]),N=s.useRef({stack:[],offset:-1}),R=s.useRef(null),H=s.useState(!0),U=H[0],q=H[1],V={paddingTop:"object"==typeof O?O.top:O,paddingRight:"object"==typeof O?O.right:O,paddingBottom:"object"==typeof O?O.bottom:O,paddingLeft:"object"==typeof O?O.left:O},A=a(W),$=function(e,t){return e.substring(0,t).split("\n")},G=s.useCallback((function(e,t){var n,i,o;void 0===t&&(t=!1);var a=N.current,l=a.stack,s=a.offset;if(l.length&&s>-1){N.current.stack=l.slice(0,s+1);var c=N.current.stack.length;if(c>100){var u=c-100;N.current.stack=l.slice(u,c),N.current.offset=Math.max(N.current.offset-u,0)}}var f=Date.now();if(t){var d=N.current.stack[N.current.offset];if(d&&f-d.timestamp<3e3){var h=/[^a-z0-9]([a-z0-9]+)$/i,p=null===(n=$(d.value,d.selectionStart).pop())||void 0===n?void 0:n.match(h),g=null===(i=$(e.value,e.selectionStart).pop())||void 0===i?void 0:i.match(h);if((null==p?void 0:p[1])&&(null===(o=null==g?void 0:g[1])||void 0===o?void 0:o.startsWith(p[1])))return void(N.current.stack[N.current.offset]=r(r({},e),{timestamp:f}))}}N.current.stack.push(r(r({},e),{timestamp:f})),N.current.offset++}),[]),J=s.useCallback((function(){var e=R.current;if(e){var t=e.value,n=e.selectionStart,r=e.selectionEnd;G({value:t,selectionStart:n,selectionEnd:r})}}),[G]),Q=function(e){var t=R.current;t&&(t.value=e.value,t.selectionStart=e.selectionStart,t.selectionEnd=e.selectionEnd,null==_||_(e.value))},X=function(e){var t=R.current,n=N.current.stack[N.current.offset];n&&t&&(N.current.stack[N.current.offset]=r(r({},n),{selectionStart:t.selectionStart,selectionEnd:t.selectionEnd})),G(e),Q(e)};return s.useEffect((function(){J()}),[J]),s.useImperativeHandle(t,(function(){return{get session(){return{history:N.current}},set session(e){N.current=e.history}}}),[]),s.createElement("div",r({},B,{style:r(r({},p.container),z)}),s.createElement("pre",r({className:D,"aria-hidden":"true",style:r(r(r({},p.editor),p.highlight),V)},"string"==typeof A?{dangerouslySetInnerHTML:{__html:A+"<br />"}}:{children:A})),s.createElement("textarea",{ref:function(e){return R.current=e},style:r(r(r({},p.editor),p.textarea),V),className:f+(F?" ".concat(F):""),id:L,value:W,onChange:function(e){var t=e.currentTarget,n=t.value,r=t.selectionStart,i=t.selectionEnd;G({value:n,selectionStart:r,selectionEnd:i},!0),_(n)},onKeyDown:function(e){if(!E||(E(e),!e.defaultPrevented)){"Escape"===e.key&&e.currentTarget.blur();var t=e.currentTarget,n=t.value,r=t.selectionStart,i=t.selectionEnd,o=(y?" ":"\t").repeat(T);if("Tab"===e.key&&!g&&U)if(e.preventDefault(),e.shiftKey){var a=(d=$(n,r)).length-1,l=$(n,i).length-1,s=n.split("\n").map((function(e,t){return t>=a&&t<=l&&e.startsWith(o)?e.substring(o.length):e})).join("\n");if(n!==s){var f=d[a];X({value:s,selectionStart:(null==f?void 0:f.startsWith(o))?r-o.length:r,selectionEnd:i-(n.length-s.length)})}}else if(r!==i){var d,h=(d=$(n,r)).length-1,p=$(n,i).length-1;f=d[h],X({value:n.split("\n").map((function(e,t){return t>=h&&t<=p?o+e:e})).join("\n"),selectionStart:f&&/\S/.test(f)?r+o.length:r,selectionEnd:i+o.length*(p-h+1)})}else{var v=r+o.length;X({value:n.substring(0,r)+o+n.substring(i),selectionStart:v,selectionEnd:v})}else if("Backspace"===e.key){var m=r!==i;n.substring(0,r).endsWith(o)&&!m&&(e.preventDefault(),v=r-o.length,X({value:n.substring(0,r-o.length)+n.substring(i),selectionStart:v,selectionEnd:v}))}else if("Enter"===e.key){if(r===i){var b=$(n,r).pop(),k=null==b?void 0:b.match(/^\s+/);if(null==k?void 0:k[0]){e.preventDefault();var S="\n"+k[0];v=r+S.length,X({value:n.substring(0,r)+S+n.substring(i),selectionStart:v,selectionEnd:v})}}}else if(57===e.keyCode||219===e.keyCode||222===e.keyCode||192===e.keyCode){var w=void 0;57===e.keyCode&&e.shiftKey?w=["(",")"]:219===e.keyCode?w=e.shiftKey?["{","}"]:["[","]"]:222===e.keyCode?w=e.shiftKey?['"','"']:["'","'"]:192!==e.keyCode||e.shiftKey||(w=["`","`"]),r!==i&&w&&(e.preventDefault(),X({value:n.substring(0,r)+w[0]+n.substring(r,i)+w[1]+n.substring(i),selectionStart:r,selectionEnd:i+2}))}else!(u?e.metaKey&&90===e.keyCode:e.ctrlKey&&90===e.keyCode)||e.shiftKey||e.altKey?(u?e.metaKey&&90===e.keyCode&&e.shiftKey:c?e.ctrlKey&&89===e.keyCode:e.ctrlKey&&90===e.keyCode&&e.shiftKey)&&!e.altKey?(e.preventDefault(),function(){var e=N.current,t=e.stack,n=e.offset,r=t[n+1];r&&(Q(r),N.current.offset=Math.min(n+1,t.length-1))}()):77!==e.keyCode||!e.ctrlKey||u&&!e.shiftKey||(e.preventDefault(),q((function(e){return!e}))):(e.preventDefault(),function(){var e=N.current,t=e.stack,n=e.offset,r=t[n-1];r&&(Q(r),N.current.offset=Math.max(n-1,0))}())}},onClick:w,onKeyUp:x,onFocus:C,onBlur:S,disabled:i,form:o,maxLength:m,minLength:b,name:k,placeholder:j,readOnly:P,required:I,autoFocus:n,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),s.createElement("style",{dangerouslySetInnerHTML:{__html:d}}))})),p={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}};t.default=h}}]);