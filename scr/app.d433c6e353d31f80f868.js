(()=>{"use strict";var e,t,n,r={612:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(81),i=n.n(r),o=n(645),a=n.n(o)()(i());a.push([e.id,".ZsqJ5YIsPF7MMikIlONJ {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n    grid-template-rows: 1fr 1fr 1fr;\n    gap: 0;\n    padding: 0;\n    margin: 0;\n    margin-top: 1px;\n}\n\n.ZsqJ5YIsPF7MMikIlONJ > div {\n    display: flex;\n    box-shadow: 0 0 0px 1px #fff;\n}\n\n.V2Z3ajjB8SzDTtHGPsBO {\n    display: flex;\n    justify-content: center;\n    flex-wrap: wrap;\n    gap: 0;\n    padding: 0;\n    margin: 1em 0;\n}\n",""]),a.locals={Cell:"ZsqJ5YIsPF7MMikIlONJ",Ratio:"V2Z3ajjB8SzDTtHGPsBO"};const s=a},746:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(81),i=n.n(r),o=n(645),a=n.n(o)()(i());a.push([e.id,".yB7Qb4tp67Z1HVbY0QOR {\n    place-items: normal;\n}\n",""]),a.locals={placeItemsNormal:"yB7Qb4tp67Z1HVbY0QOR"};const s=a},259:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(81),i=n.n(r),o=n(645),a=n.n(o)()(i());a.push([e.id,'.rKe5kAdkLizAJtLE_kBA {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    overflow: auto;\n    background: var(--theme-color-neutral-5);\n    color: var(--theme-color-on-neutral-5);\n}\n\n.rKe5kAdkLizAJtLE_kBA > footer,\n.rKe5kAdkLizAJtLE_kBA > header {\n    position: fixed;\n    left: 0;\n    width: 100%;\n    height: 64px;\n    bottom: 0;\n    box-sizing: border-box;\n}\n\n.rKe5kAdkLizAJtLE_kBA > header {\n    top: 0;\n    background: linear-gradient(\n        to top,\n        var(--theme-color-primary-5-1),\n        var(--theme-color-primary-5-5)\n    );\n    backdrop-filter: blur(6px);\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    gap: 0.5em;\n    padding: 0 0.5em;\n    height: 3em;\n    z-index: 9999;\n}\n\n.rKe5kAdkLizAJtLE_kBA > header > * {\n    flex: 0 0 auto;\n}\n\n.rKe5kAdkLizAJtLE_kBA > header > div {\n    flex: 1 1 auto;\n    text-align: center;\n    font-weight: bolder;\n    font-size: 200%;\n    color: var(--theme-color-on-primary);\n    text-shadow: 0 2px 2px var(--theme-color-primary-9);\n}\n\n.rKe5kAdkLizAJtLE_kBA > header > button {\n    border: none;\n    background: linear-gradient(\n        to top,\n        var(--theme-color-primary-7),\n        var(--theme-color-primary-3)\n    );\n    box-shadow: 0 0 5px var(--theme-color-primary-1);\n    height: 2em;\n    width: 80px;\n    border-radius: 0.25em;\n    color: inherit;\n    font: inherit;\n    font-weight: bold;\n    font-size: 90%;\n    display: inline-block;\n    margin: 0;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    font-variant: small-caps;\n    cursor: pointer;\n    transition: all 0.3s;\n}\n\n.rKe5kAdkLizAJtLE_kBA > header > button:first-child,\n.rKe5kAdkLizAJtLE_kBA > header > button:nth-child(2) {\n    width: 2em;\n}\n\n.rKe5kAdkLizAJtLE_kBA > header > button:hover,\n.rKe5kAdkLizAJtLE_kBA > header > button:active {\n    background: linear-gradient(\n        to top,\n        var(--theme-color-primary-9),\n        var(--theme-color-primary-5)\n    );\n    box-shadow: 0 0 2px 0px var(--theme-color-primary-9) inset,\n        0 0 5px var(--theme-color-primary-5);\n}\n\n.rKe5kAdkLizAJtLE_kBA > header > button > svg {\n    height: 1.5em;\n    fill: currentColor;\n}\n\n.rKe5kAdkLizAJtLE_kBA > footer {\n    bottom: 0;\n    background: linear-gradient(to top, #ddd, transparent);\n}\n\n.rKe5kAdkLizAJtLE_kBA blockquote {\n    border-left: 0.25em solid #e82;\n    padding-left: 1em;\n    font-style: italic;\n}\n\n.FBbN_fEabLPcVIAAV74q {\n    display: grid;\n    grid-template-columns: 1fr 390px 390px 1fr;\n    margin: 64px 0;\n}\n\n.FBbN_fEabLPcVIAAV74q > * {\n    grid-column: 2/4;\n}\n\n.FBbN_fEabLPcVIAAV74q > *.full-width {\n    grid-column: 1/5;\n    padding: 0.5em;\n}\n\n.FBbN_fEabLPcVIAAV74q > *.margin-right {\n    grid-column: 4/5;\n    padding: 1em;\n}\n\n.FBbN_fEabLPcVIAAV74q > *.margin-left {\n    grid-column: 1/2;\n    padding: 1em;\n}\n\n@media (max-width: 1200px) {\n    .FBbN_fEabLPcVIAAV74q > *.margin-right {\n        grid-column: 2/4;\n    }\n\n    .FBbN_fEabLPcVIAAV74q > *.margin-left {\n        grid-column: 2/4;\n    }\n}\n\n@media (max-width: 800px) {\n    .FBbN_fEabLPcVIAAV74q {\n        grid-template-columns: 10px 1fr 1fr 10px;\n    }\n}\n\n.FBbN_fEabLPcVIAAV74q h1,\n.FBbN_fEabLPcVIAAV74q h2,\n.FBbN_fEabLPcVIAAV74q h3 {\n    display: block;\n    position: relative;\n    padding: 0 0 0 0.5em;\n}\n\n.FBbN_fEabLPcVIAAV74q h1::after,\n.FBbN_fEabLPcVIAAV74q h2::after,\n.FBbN_fEabLPcVIAAV74q h3::after {\n    content: "";\n    position: absolute;\n    left: 0;\n    bottom: -1px;\n    width: 100%;\n    height: 1px;\n    background: linear-gradient(to right, currentcolor, transparent);\n}\n\n.FBbN_fEabLPcVIAAV74q h1 {\n    font-size: 145%;\n}\n\n.FBbN_fEabLPcVIAAV74q h2 {\n    font-size: 130%;\n    margin-left: 1em;\n}\n\n.FBbN_fEabLPcVIAAV74q h3 {\n    font-size: 115%;\n    margin-left: 2em;\n}\n\n.rKe5kAdkLizAJtLE_kBA a,\n.rKe5kAdkLizAJtLE_kBA a:visited {\n    color: #850;\n    text-decoration-color: #8504;\n}\n',""]),a.locals={Article:"rKe5kAdkLizAJtLE_kBA",Grid:"FBbN_fEabLPcVIAAV74q"};const s=a},33:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(81),i=n.n(r),o=n(645),a=n.n(o)()(i());a.push([e.id,".yi8Nb0gnPsi2f6RLY_am {\n    grid-column: 1/2;\n}\n\n.hvgnJLXLBlFuu7nrY6Qs {\n    grid-column: 4/5;\n}\n\n.J1CRBwatHyvvjNHGXK8E {\n    grid-column: 2/4;\n}\n\n.kpe8CQMZPN9r0wtWolHR {\n    grid-column: 1/5;\n}\n\n.ogB3VBRp_JV7oE7kZk5V {\n    grid-column: 1/3;\n}\n\n.BGLfCPLGMlda62Mf2AlU {\n    grid-column: 3/5;\n}\n",""]),a.locals={marginLeft:"yi8Nb0gnPsi2f6RLY_am",marginRight:"hvgnJLXLBlFuu7nrY6Qs",center:"J1CRBwatHyvvjNHGXK8E",full:"kpe8CQMZPN9r0wtWolHR",halfLeft:"ogB3VBRp_JV7oE7kZk5V",halfRight:"BGLfCPLGMlda62Mf2AlU"};const s=a},390:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(81),i=n.n(r),o=n(645),a=n.n(o)()(i());a.push([e.id,".AdUtYyoKVmLvTQ4p2tnd {\n    display: inline-block;\n    margin: 1em;\n}\n\n.AdUtYyoKVmLvTQ4p2tnd canvas {\n    box-shadow: 0 0.25em 0.5em #000;\n}\n",""]),a.locals={Scene:"AdUtYyoKVmLvTQ4p2tnd"};const s=a},719:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(81),i=n.n(r),o=n(645),a=n.n(o)()(i());a.push([e.id,"html {\n    font-family: sans-serif;\n    font-size: 16px;\n}\n\nbody {\n    background-color: var(--theme-color-neutral);\n    color: var(--theme-color-on-neutral);\n}\n",""]);const s=a},838:(e,t,n)=>{var r=n(893),i=n(294),o=n(655),a=n(250),s=n(379),c=n.n(s),l=n(795),u=n.n(l),f=n(569),d=n.n(f),h=n(565),p=n.n(h),g=n(216),v=n.n(g),m=n(589),b=n.n(m),y=n(259),x={};x.styleTagTransform=b(),x.setAttributes=p(),x.insert=d().bind(null,"head"),x.domAPI=u(),x.insertStyleElement=v(),c()(y.Z,x);const w=y.Z&&y.Z.locals?y.Z.locals:void 0;function A(e){var t=e.className,n=e.children;return(0,r.jsxs)("div",{className:E(t,w.Article),children:[(0,r.jsx)("div",{className:w.Grid,children:n}),(0,r.jsxs)("header",{children:[(0,r.jsx)("button",{onClick:function(){return document.location.hash="#"},children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,r.jsx)("title",{children:"home"}),(0,r.jsx)("path",{d:"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"})]})}),(0,r.jsxs)("button",{onClick:function(){return window.history.back()},children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,r.jsx)("title",{children:"arrow-left-circle"}),(0,r.jsx)("path",{d:"M2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12M18,11H10L13.5,7.5L12.08,6.08L6.16,12L12.08,17.92L13.5,16.5L10,13H18V11Z"})]})," "]}),(0,r.jsx)("div",{children:"ToloGameDev Library"})]}),(0,r.jsx)("footer",{})]})}function E(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter((function(e){return"string"==typeof e})).join(" ")}function j(e){var t=e.children;return(0,r.jsx)(A,{children:t})}function k(e){const t=Object.assign({h1:"h1",p:"p",strong:"strong",code:"code",ul:"ul",li:"li",a:"a"},e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{children:"ToloGameDev Library for WebGL2"}),"\n",(0,r.jsxs)(t.p,{children:["Cette bibliotheque exporte des classes qui commencent toutes par le préfixe\n",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"Tgd"})})," (pour ToloGameDev)."]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"#/scene",children:"TgdScene"})," : Fournit le contexte WebGL2 ainsi qu'un gestionnaire de\nresources."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"#/painter",children:"TgdPainter"})," : Un Painter est responsable de peindre le canvas."]}),"\n"]})]})}function L(e){const t=Object.assign({h1:"h1",p:"p",strong:"strong",code:"code",ul:"ul",li:"li",a:"a"},e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{children:"Les Painters"}),"\n",(0,r.jsxs)(t.p,{children:["Un ",(0,r.jsx)(t.strong,{children:"Painter"})," est une class qui permet de dessiner sur le canvas WebGL2. Vous\npouvez créer le votre en héritant de la class abstraite ",(0,r.jsx)(t.code,{children:"TgdPainter"})," ou utiliser\nl'un de ceux fournis par la bibliotheque."]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"#/painter/background",children:"TgdPainterBackground"}),": Dessiner un arrière-plan."]}),"\n"]})]})}var P=n(33),T={};T.styleTagTransform=b(),T.setAttributes=p(),T.insert=d().bind(null,"head"),T.domAPI=u(),T.insertStyleElement=v(),c()(P.Z,T);const B=P.Z&&P.Z.locals?P.Z.locals:void 0;function _(e){var t=e.align,n=e.children;return(0,r.jsx)("div",{className:B[t],children:n})}var R=function(){function e(){}return e.load=function(e){return t=this,n=void 0,i=function(){return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(t){return[2,new Promise((function(t){var n=new Image;n.onload=function(){return t(n)},n.onerror=function(){return t(null)},n.src=e}))]}))},new((r=void 0)||(r=Promise))((function(e,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,s)}c((i=i.apply(t,n||[])).next())}));var t,n,r,i},e}(),V=function(){function e(e){void 0===e&&(e=[]),this.enabled=!0,this.painters=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],e,!0)}return e.prototype.add=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){var i=r[n];this.painters.push(i)}},e.prototype.destroy=function(){for(var e=0,t=this.painters;e<t.length;e++)t[e].destroy();this.painters.splice(0,this.painters.length)},e.prototype.paint=function(e,t){if(this.enabled)for(var n=0,r=this.painters;n<r.length;n++)r[n].paint(e,t)},e.prototype.update=function(e,t){if(this.enabled)for(var n=0,r=this.painters;n<r.length;n++)r[n].update(e,t)},e}();const S=function(){function e(){this.map=new Map,this.count=new Map}return e.prototype.add=function(e,t){var n,r=this.map,i=this.count;if(i.has(e)){i.set(e,1+(null!==(n=i.get(e))&&void 0!==n?n:0));var o=r.get(e);if(!o)throw Error("[CountMap] Map should not be empty!");return o}var a=t();return r.set(e,a),i.set(e,1),a},e.prototype.delete=function(e){var t,n=this.map,r=this.count;if(n.has(e)){var i=(null!==(t=r.get(e))&&void 0!==t?t:0)-1;if(!(i>0)){var o=n.get(e);return n.delete(e),r.delete(e),o}r.set(e,i)}},e}();var N=function(){function e(){this.images=new S}return e.prototype.createImage=function(e){var t=e;return this.images.add(t,(function(){var n=new Image;return n.loading="eager",{type:"TgdAssetImage",key:t,image:n,isSuccessfullyLoaded:new Promise((function(t){n.src=e,n.onload=function(){return t(!0)},n.onerror=function(){return t(!1)}}))}}))},e.prototype.destroyImage=function(e){this.images.delete(e.key)},e}();const I=N;const O=function(){function e(e){this.gl=e}return e.prototype.bindTexture2D=function(e,t,n){var r=n.image,i=n.placeholder,o=void 0===i?[0,0,0,1]:i;e.bindTexture(e.TEXTURE_2D,t);var a=e.RGBA,s=e.RGBA,c=e.UNSIGNED_BYTE,l=new Uint8Array(o);e.texImage2D(e.TEXTURE_2D,0,a,1,1,0,s,c,l),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT);var u=function(){e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)};u(),"function"==typeof r.addEventListener&&r.addEventListener("load",u)},e}();var F=function(){this.buffers=new S,this.shaders=new S,this.programs=new S,this.textures=new S},U=function(){function e(e,t){this.gl=e,this.bag=t}return e.make=function(t,n){var r=function(e,t){var n=e.get(t);if(n)return n;var r=new Map;return e.set(t,r),r}(e.resources,t),i=r.get(n);if(i)return new e(t,i);var o=new F;return r.set(n,o),new e(t,o)},e.prototype.createBuffer=function(e){void 0===e&&(e="default");var t=this.bag,n=this.gl;return t.buffers.add(e,(function(){var t=n.createBuffer();if(!t)throw Error('Unable to create WebGL2 buffer "'.concat(e,'"!'));return t}))},e.prototype.deleteBuffer=function(e){void 0===e&&(e="default");var t=this.bag,n=this.gl,r=t.buffers.delete(e);r&&n.deleteBuffer(r)},e.prototype.createShader=function(e,t,n){void 0===n&&(n="default");var r=this.bag,i=this.gl;return r.shaders.add("".concat(e,"\n").concat(n),(function(){var n=i.createShader("vertex"===e?i.VERTEX_SHADER:i.FRAGMENT_SHADER);if(console.log("🚀 [resources] newShader(".concat(e,") = "),n),!n)throw Error("Unable to create a Vertex Shader handle!");return i.shaderSource(n,t),i.compileShader(n),n}))},e.prototype.deleteShader=function(e,t){var n=this.bag,r=this.gl,i=n.shaders.delete("".concat(t,"\n").concat(e));i&&r.deleteShader(i)},e.prototype.createProgram=function(e,t){void 0===t&&(t="default");var n=this.bag,r=this.gl,i=n.programs.add(t,(function(){var e=r.createProgram();if(!e)throw Error('Unable to create a WebGL program "'.concat(t,'"!'));return e})),o=this.createShader("vertex",e.vert,t);console.log("🚀 [resources] vertShader = ",o),r.attachShader(i,o);var a=this.createShader("fragment",e.frag,t);if(r.attachShader(i,a),r.linkProgram(i),!r.getProgramParameter(i,r.LINK_STATUS)){var s=r.getProgramInfoLog(i);throw new Error("Could NOT link WebGL2 program!\n"+s)}return i},e.prototype.deleteProgram=function(e){void 0===e&&(e="default");var t=this.bag,n=this.gl,r=t.programs.delete(e);r&&n.deleteProgram(r)},e.prototype.createTexture=function(e){void 0===e&&(e="default");var t=this.bag,n=this.gl;return t.textures.add(e,(function(){var t=n.createTexture();if(!t)throw Error('Unable to create WebGL texture "'.concat(e,'"!'));return t}))},e.prototype.deteleTexture=function(e){void 0===e&&(e="default");var t=this.bag,n=this.gl,r=t.textures.delete(e);r&&n.deleteTexture(r)},e.resources=new Map,e}();const Z=U;var C=function(){function e(e,t){var n=this;this.canvas=e,this.painters=new V,this.isAnimated=!1,this.lastCanvasWidth=0,this.lastCanvasHeight=0,this.lastTime=-1,this._screenRatio=1,this.actualPaint=function(e){var t=n,r=t.gl,i=t.lastCanvasWidth,o=t.lastCanvasHeight;if(t.lastTime<0)return n.lastTime=e,void n.paint();var a=r.canvas,s=window.devicePixelRatio,c=Math.max(1,Math.round(a.clientWidth*s)),l=Math.max(1,Math.round(a.clientHeight*s));i===c&&o===l||(a.width=c,a.height=l,n.lastCanvasWidth=c,n.lastCanvasHeight=l,r.viewport(0,0,c,l),n.screenRatio=c/l);var u=e-n.lastTime;n.lastTime=e,n.painters.paint(e,u),n.painters.update(e,u),n.isAnimated&&n.paint()};var r=e.getContext("webgl2",t);if(!r)throw Error("Unable to create a WebGL2 context!");this.gl=r,this.asset=new I,this.texture=new O(r)}return e.prototype.getResources=function(e){return Z.make(this.gl,e)},e.prototype.getUniformLocation=function(e,t){var n=this.gl.getUniformLocation(e,t);if(!n)throw Error('Unable to get uniform location of "'.concat(t,'"!'));return n},Object.defineProperty(e.prototype,"screenRatio",{get:function(){return this._screenRatio},set:function(e){this._screenRatio=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.lastCanvasWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.lastCanvasHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animate",{get:function(){return this.isAnimated},set:function(e){this.isAnimated!==e&&(this.isAnimated=e,e&&this.paint())},enumerable:!1,configurable:!0}),e.prototype.addPainter=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n=this,r=void 0,o=function(){var t,n,r;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(i){for(t=0,n=e;t<n.length;t++)r=n[t],this.painters.add(r);return[2]}))},new((i=void 0)||(i=Promise))((function(e,t){function a(e){try{c(o.next(e))}catch(e){t(e)}}function s(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,s)}c((o=o.apply(n,r||[])).next())}));var n,r,i,o},e.prototype.paint=function(){window.requestAnimationFrame(this.actualPaint)},e.prototype.destroy=function(){this.painters.destroy()},e}(),M=function(){function e(e){this.buffer=void 0,this.data={};for(var t=0,n={},r={},i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];n[a]=new ArrayBuffer(0);var s=z(e[a]);r[a]=s,t+=s.bytesPerElement*s.dimension}this.data=n,this.definitions=r,this.stride=t}return e.prototype.get=function(e){var t=this.stride*e;if(!this.buffer||this.buffer.byteLength<t){this.checkIfWeHaveEnoughData(e),this.buffer=new ArrayBuffer(t);for(var n=new DataView(this.buffer),r=0,i=this.data,o=this.definitions,a=0;a<e;a++)for(var s=0,c=Object.keys(o);s<c.length;s++)for(var l=c[s],u=o[l],f=i[l],d=new DataView(f),h=u.bytesPerElement*u.dimension*a,p=0;p<u.dimension;p++)u.setter(n,r,u.getter(d,h)),h+=u.bytesPerElement,r+=u.bytesPerElement}return this.buffer},e.prototype.sendToArrayBuffer=function(e,t,n,r){var i=this.get(n);return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,i,r?e.DYNAMIC_DRAW:e.STATIC_DRAW),i},e.prototype.set=function(e,t){var n;(n=t)&&"object"==typeof n&&t.buffer instanceof ArrayBuffer&&(t=t.buffer),this.data[e]=t,this.buffer=void 0},e.prototype.checkIfWeHaveEnoughData=function(e){for(var t=this.data,n=this.definitions,r=0,i=Object.keys(n);r<i.length;r++){var o=i[r],a=t[o];if(!a)throw Error('No data has been set for attribute "'.concat(o,'"!\nPlease use something like this:\n    data.set("').concat(o,'", new Float32Array([4, 3]))'));var s=n[o],c=s.bytesPerElement*s.dimension*e;if(a.byteLength<c)throw Error('Attribute "'.concat(o,'" has only ').concat(a.byteLength," bytes, but we need at least ").concat(c,"!"))}},e}();function z(e){var t="number"==typeof e?{dimension:e,type:"float"}:e;if("float"===t.type)return function(e){var t=Float32Array.BYTES_PER_ELEMENT;return{dimension:e.dimension,bytesPerElement:t,getter:function(e,t){return e.getFloat32(t)},setter:function(e,t,n){e.setFloat32(t,n)}}}(t);throw Error('Unable to create a Data for an attribute of type "'.concat(t.type,'"!'))}var G=function(){return G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},G.apply(this,arguments)},D=function(){function e(e,t){this.scene=e,this.zoom=1,this.x=0,this.y=0,this.z=1,this.res=e.getResources("TgdPainterBackground"),this.options=G({placeholder:[0,0,0,1]},t);var n=this.options,r=n.image,i=n.placeholder;this.imageWidth=r.width,this.imageHeight=r.height,this.buffer=this.res.createBuffer(),this.texture=this.res.createTexture(),e.texture.bindTexture2D(e.gl,this.texture,{image:r,placeholder:i}),this.program=this.res.createProgram({vert:q,frag:J}),this.uniScale=e.getUniformLocation(this.program,"uniScale"),this.uniScroll=e.getUniformLocation(this.program,"uniScroll"),this.uniZ=e.getUniformLocation(this.program,"uniZ"),this.uniTexture=e.getUniformLocation(this.program,"uniTexture");var o=new M({attPoint:2,attUV:2});o.set("attPoint",new Float32Array([-1,1,1,1,-1,-1,1,-1])),o.set("attUV",new Float32Array([0,0,1,0,0,1,1,1])),o.sendToArrayBuffer(e.gl,this.buffer,4,!1),this.vao=function(e,t,n){var r=e.createVertexArray();if(!r)throw Error("Unable to create a WebGLVertexArrayObject!");e.bindVertexArray(r),e.bindBuffer(e.ARRAY_BUFFER,n);var i=e.getAttribLocation(t,"attPoint");e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,16,0),e.vertexAttribDivisor(i,0);var o=e.getAttribLocation(t,"attUV");return e.enableVertexAttribArray(o),e.vertexAttribPointer(o,2,e.FLOAT,!1,16,8),e.vertexAttribDivisor(o,0),e.bindVertexArray(null),r}(e.gl,this.program,this.buffer)}return e.prototype.destroy=function(){var e=this.res;e.deleteProgram(),e.deteleTexture(),e.deleteBuffer()},e.prototype.paint=function(e,t){var n=this.scene.gl,r=this,i=r.vao,o=r.program,a=r.texture,s=r.imageWidth,c=r.imageHeight,l=r.zoom,u=r.x,f=r.y,d=r.z;n.useProgram(o);var h=this.scene,p=h.width,g=h.height,v=s*g>c*p,m=v?s*g/(p*c):1,b=v?1:c*p/(g*s);n.uniform2f(this.uniScale,m*l,b*l),n.uniform2f(this.uniScroll,u,f),n.uniform1f(this.uniZ,d),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,a),n.uniform1i(this.uniTexture,0),n.bindVertexArray(i),n.drawArrays(n.TRIANGLE_STRIP,0,4)},e.prototype.update=function(e,t){},e}(),q="#version 300 es\n\nuniform vec2 uniScale;\nuniform vec2 uniScroll;\nuniform float uniZ;\nin vec2 attPoint;\nin vec2 attUV;\nout vec2 varUV;\n\nvoid main() {\n    varUV = attUV + uniScroll;\n    float x = uniScale.x * attPoint.x;\n    float y = uniScale.y * attPoint.y;\n    gl_Position = vec4(x, y, uniZ, 1.0);\n}",J="#version 300 es\n\nprecision mediump float;\n\nuniform sampler2D uniTexture;\nin vec2 varUV;\nout vec4 FragColor;\n\nvoid main() {\n    FragColor = texture(uniTexture, varUV);\n}",H=function(){return H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},H.apply(this,arguments)},W=(function(){function e(e,t){var n;this.scene=e,this.clearMask=0,this.options=H({color:[0,0,0,1]},t),this.clearMask|=e.gl.COLOR_BUFFER_BIT,(n=e.gl).clearColor.apply(n,this.options.color)}e.prototype.setClearColor=function(e,t,n,r){var i=this.options.color;i[0]=e,i[1]=t,i[2]=n,i[3]=r},e.prototype.destroy=function(){},e.prototype.paint=function(e,t){var n=this,r=n.clearMask,i=n.scene,o=n.options,a=i.gl;r>0&&(a.clearColor.apply(a,o.color),a.clear(r))},e.prototype.update=function(e,t){}}(),function(){function e(e){this.logicFunction=e}e.prototype.destroy=function(){},e.prototype.paint=function(e,t){},e.prototype.update=function(e,t){this.logicFunction(e,t)}}(),n(686)),K=n(390),Y={};Y.styleTagTransform=b(),Y.setAttributes=p(),Y.insert=d().bind(null,"head"),Y.domAPI=u(),Y.insertStyleElement=v(),c()(K.Z,Y);const X=K.Z&&K.Z.locals?K.Z.locals:void 0;function Q(e){var t=e.className,n=e.options,o=e.onReady,a=e.width,s=void 0===a?"640px":a,c=e.height,l=void 0===c?"480px":c,u=e.noBorder,f=void 0!==u&&u,d=i.useRef(null),h=i.useRef(null),p=function(e){if(e){h.current=e;var t=new C(e,n);d.current=t,t.paint(),o&&o(t)}};return i.useEffect((function(){var e=h.current,t=d.current;if(e&&t){var n=new ResizeObserver((function(){return t.paint()}));return n.observe(e),function(){return n.unobserve(e)}}}),[d.current,h.current]),f?(0,r.jsx)("canvas",{className:t,style:{width:s,height:l},ref:p}):(0,r.jsxs)("div",{className:W.Q2.classNames.join(t,X.Scene),children:[(0,r.jsx)(W.Rf,{display:"flex",justifyContent:"flex-end",children:(0,r.jsx)(W.NA,{variant:"text",onClick:function(){var e=h.current;e&&e.requestFullscreen()},children:"Afficher en plein écran"})}),(0,r.jsx)("canvas",{style:{width:s,height:l},ref:p})]})}const $=n.p+"img/background.17e71ee6b66132c0779e.webp";var ee=n(612),te={};te.styleTagTransform=b(),te.setAttributes=p(),te.insert=d().bind(null,"head"),te.domAPI=u(),te.insertStyleElement=v(),c()(ee.Z,te);const ne=ee.Z&&ee.Z.locals?ee.Z.locals:void 0;var re=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ie=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function oe(){return(0,r.jsxs)("div",{className:ne.Ratio,children:[(0,r.jsxs)("div",{className:ne.Cell,children:[(0,r.jsx)(ae,{cols:3,rows:2}),(0,r.jsx)(ae,{cols:3,rows:1})]}),(0,r.jsxs)("div",{className:ne.Cell,children:[(0,r.jsx)(ae,{cols:2,rows:3}),(0,r.jsx)(ae,{cols:1,rows:3})]}),(0,r.jsx)("div",{className:ne.Cell,children:(0,r.jsx)(ae,{cols:3,rows:3})})]})}function ae(e){var t=this,n=e.cols,i=e.rows,o=128*n,a=128*i;return(0,r.jsx)("div",{style:{gridColumn:"span ".concat(n),gridRow:"span ".concat(i)},children:(0,r.jsx)(Q,{noBorder:!0,width:"".concat(o,"px"),height:"".concat(a,"px"),onReady:function(e){return re(t,void 0,void 0,(function(){var t,n;return ie(this,(function(r){switch(r.label){case 0:return[4,R.load($)];case 1:return(t=r.sent())?(n=new D(e,{image:t}),e.addPainter(n),e.paint(),[2]):[2]}}))}))}})})}var se=n(746),ce={};ce.styleTagTransform=b(),ce.setAttributes=p(),ce.insert=d().bind(null,"head"),ce.domAPI=u(),ce.insertStyleElement=v(),c()(se.Z,ce);const le=se.Z&&se.Z.locals?se.Z.locals:void 0;var ue=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},fe=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},de=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};function he(){var e=this,t=i.useRef(null),n=i.useRef(null),o=de(i.useState(1),2),a=o[0],s=o[1],c=de(i.useState(0),2),l=c[0],u=c[1],f=de(i.useState(0),2),d=f[0],h=f[1];return i.useEffect((function(){var e=t.current,r=n.current;e&&r&&(r.zoom=a,r.x=l,r.y=d,e.paint())}),[a,l,d]),(0,r.jsxs)("div",{children:[(0,r.jsxs)(W.Rf,{className:le.placeItemsNormal,display:"grid",gridTemplateColumns:"auto 1fr",gap:[".5em","1em"],children:[(0,r.jsx)("div",{children:"zoom :"}),(0,r.jsx)(W.yu,{value:a,onChange:s,min:1,max:10,step:.1,wide:!0,text:"".concat(100*a,"%")}),(0,r.jsx)("div",{children:"x :"}),(0,r.jsx)(W.yu,{value:l,onChange:u,min:-1,max:1,step:.01,wide:!0,text:"".concat(l)}),(0,r.jsx)("div",{children:"y :"}),(0,r.jsx)(W.yu,{value:d,onChange:h,min:-1,max:1,step:.01,wide:!0,text:"".concat(d)})]}),(0,r.jsx)(W.Rf,{display:"grid",children:(0,r.jsx)(Q,{width:"100%",height:"50vh",onReady:function(r){return ue(e,void 0,void 0,(function(){var e,i,o;return fe(this,(function(a){switch(a.label){case 0:return[4,R.load($)];case 1:return(e=a.sent())?(t.current=r,i=null!==(o=n.current)&&void 0!==o?o:new D(r,{image:e}),n.current=i,r.addPainter(i),r.paint(),[2]):[2]}}))}))}})})]})}function pe(e){const t=Object.assign({h1:"h1",p:"p",ul:"ul",li:"li",strong:"strong",code:"code"},e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{children:"TgdPainterBackground"}),"\n",(0,r.jsx)(t.p,{children:"Ce painter dessine un arrière-plan en conservant son aspect ratio. Par defaut,\nl'image couvre l'écran. Exemples :"}),"\n",(0,r.jsx)(_,{align:"full",children:(0,r.jsx)(oe,{})}),"\n",(0,r.jsx)(t.p,{children:"Les paramètres suivants sont aussi disponibles :"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"zoom"})})," : La valeur ",(0,r.jsx)(t.strong,{children:"1"})," correspond à la plus petite image recouvrant\nentièrement la scène."]}),"\n"]}),"\n",(0,r.jsx)(he,{})]})}var ge=(0,o.cP)([{path:"/",element:(0,r.jsx)((function(e={}){const{wrapper:t}=e.components||{};return t?(0,r.jsx)(t,Object.assign({},e,{children:(0,r.jsx)(k,e)})):k(e)}),{})},{path:"painter",element:(0,r.jsx)((function(e={}){const{wrapper:t}=e.components||{};return t?(0,r.jsx)(t,Object.assign({},e,{children:(0,r.jsx)(L,e)})):L(e)}),{})},{path:"painter/background",element:(0,r.jsx)((function(e={}){const{wrapper:t}=e.components||{};return t?(0,r.jsx)(t,Object.assign({},e,{children:(0,r.jsx)(pe,e)})):pe(e)}),{})}],{basename:window.location.pathname.startsWith("/tgd2")?"/tgd2":""});function ve(){return(0,r.jsx)(i.StrictMode,{children:(0,r.jsx)(j,{children:(0,r.jsx)(a.pG,{router:ge})})})}console.log("🚀 [index] window.location.pathname = ",window.location.pathname);var me=n(745),be=n(719),ye={};ye.styleTagTransform=b(),ye.setAttributes=p(),ye.insert=d().bind(null,"head"),ye.domAPI=u(),ye.insertStyleElement=v(),c()(be.Z,ye),be.Z&&be.Z.locals&&be.Z.locals,function(){(new W.Q2).apply();var e=document.getElementById("app");if(!e)throw Error('No element with id "app"!');(0,me.s)(e).render((0,r.jsx)(ve,{}))}()}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,exports:{}};return r[e](n,n.exports,o),n.exports}o.m=r,e=[],o.O=(t,n,r,i)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,r,i]=e[u],s=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,r,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var i=Object.create(null);o.r(i);var a={};t=t||[null,n({}),n([]),n(n)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,o.d(i,a),i},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!e;)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e+"../"})(),(()=>{var e={143:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[a,s,c]=n,l=0;if(a.some((t=>0!==e[t]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(c)var u=c(o)}for(t&&t(n);l<a.length;l++)i=a[l],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),o.nc=void 0;var a=o.O(void 0,[495],(()=>o(838)));a=o.O(a)})();