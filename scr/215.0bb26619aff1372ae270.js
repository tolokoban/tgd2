"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[215],{5886:(n,e,t)=>{t.d(e,{j:()=>u});var a=t(4848),s=t(6540),i=t(7781);const o={palettePreviewHorizontal:"fYA6LcDYnb5BrP1uJbDP"};var c=t(4447);class r{constructor(){this.a=[.5,.5,.5],this.b=[.5,.5,.5],this.c=[.5,.5,.5],this.d=[.5,.5,.5],this.context=null,this.setCanvas=n=>{if(this.context&&(this.context.delete(),this.context=null),n){const e=new c.TgdContext(n,{antialias:!1});e.add(new c.TgdPainterFragmentShader(e,{shader:new c.TgdShaderFragment({uniforms:{uniA:"vec3",uniB:"vec3",uniC:"vec3",uniD:"vec3"},varying:{varUV:"vec2"},outputs:{FragColor:"vec4"},mainCode:["float t = varUV.x;","FragColor = vec4(",[`uniA + uniB*cos(${2*Math.PI}*(uniC * t + uniD)),`,"1"],");"]}),setUniforms:({program:n})=>{n.uniform3f("uniA",...this.a),n.uniform3f("uniB",...this.b),n.uniform3f("uniC",...this.c),n.uniform3f("uniD",...this.d)}})),e.paint(),this.context=e}}}paint(){const{context:n}=this;n&&n.paint()}}const l=i.Sxu.classNames;function u(n){const e=function(){const n=s.useRef(null);return n.current||(n.current=new r),n.current}(),t={...(0,i.$qi)(n)},{a:c,b:u,d:h,c:d}=n;return s.useEffect(()=>{e.a=c,e.b=u,e.c=d,e.d=h,e.paint()},[c,u,d,h]),(0,a.jsx)("canvas",{ref:e.setCanvas,className:l.join(n.className,o.palettePreviewHorizontal),style:t})}},5994:(n,e,t)=>{t.r(e),t.d(e,{default:()=>N});var a=t(4848),s=t(6540),i=t(9419),o=t(7781),c=t(9074);const r={sliders:"UJScs8cfO0OgQtcTq1_3",slider:"t9v488eerTGz2x1CLJwy"},l=o.Sxu.classNames;function u(n){const[e,t]=s.useState(!1),i={...(0,o.$qi)(n)},[c,u,d]=n.value;return(0,a.jsxs)("div",{className:l.join(n.className,r.sliders),style:i,children:[(0,a.jsxs)("header",{children:[(0,a.jsx)("div",{children:n.label}),e?(0,a.jsx)(o.BIK,{onClick:()=>t(!1)}):(0,a.jsx)(o.b4N,{onClick:()=>t(!0)})]}),e&&(0,a.jsx)(h,{label:"*",value:(c+u+d)/3,onChange:e=>n.onChange([e,e,e])}),!e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{label:"R",value:c,onChange:e=>n.onChange([e,u,d])}),(0,a.jsx)(h,{label:"G",value:u,onChange:e=>n.onChange([c,e,d])}),(0,a.jsx)(h,{label:"B",value:d,onChange:e=>n.onChange([c,u,e])})]})]})}function h({label:n,value:e,onChange:t}){return(0,a.jsxs)("div",{className:r.slider,children:[(0,a.jsx)("label",{children:n}),(0,a.jsx)(o.BAW,{min:0,max:1,step:.01,text:e.toFixed(2),value:e,onChange:t})]})}const d={palettePreviewDisk:"vNWd9fKh9gKo5lshKBua"};var v=t(4447);class x{constructor(){this.a=[.5,.5,.5],this.b=[.5,.5,.5],this.c=[.5,.5,.5],this.d=[.5,.5,.5],this.context=null,this.setCanvas=n=>{if(this.context&&(this.context.delete(),this.context=null),n){const e=new v.TgdContext(n,{antialias:!1});e.add(new v.TgdPainterFragmentShader(e,{shader:new v.TgdShaderFragment({uniforms:{uniA:"vec3",uniB:"vec3",uniC:"vec3",uniD:"vec3",uniAspectRatio:"float"},varying:{varUV:"vec2"},outputs:{FragColor:"vec4"},functions:{...(0,v.tgdCodeFunction_uv2polar)()},mainCode:["vec2 polar = uv2polar(varUV);","float r = polar.x;",`float t = fract(1.0 + (polar.y + ${Math.PI/2}) * ${.5/Math.PI});`,"float light = 1.0 - smoothstep(0.4, 0.42, abs(r - 0.5));","FragColor = vec4(",[`light * (uniA + uniB*cos(${2*Math.PI}*(uniC * t + uniD))),`,"1"],");","if (t < 0.0) FragColor = vec4(1);"]}),setUniforms:({program:n,context:e})=>{n.uniform3f("uniA",...this.a),n.uniform3f("uniB",...this.b),n.uniform3f("uniC",...this.c),n.uniform3f("uniD",...this.d),n.uniform1f("uniAspectRatio",e.aspectRatio)}})),e.paint(),this.context=e}}}paint(){const{context:n}=this;n&&n.paint()}}const f=o.Sxu.classNames;function g(n){const e=function(){const n=s.useRef(null);return n.current||(n.current=new x),n.current}(),t={...(0,o.$qi)(n)},{a:i,b:c,d:r,c:l}=n;return s.useEffect(()=>{e.a=i,e.b=c,e.c=l,e.d=r,e.paint()},[i,c,l,r]),(0,a.jsx)("canvas",{ref:e.setCanvas,className:f.join(n.className,d.palettePreviewDisk),style:t})}const m={paletteEditor:"iHx9sebnbXnykVFRD3aU",disk:"bTTCzpaTo1DKH4hlrLOA",horizontal:"v4iAdhEjRjwCPajO_Kp2",horizontalA:"euqVMPDzsAGhNpCZ9USA",horizontalB:"gTO9upIZO_K2yG2MITMA",scroll:"gTtVSyNSYktrFwiThVyz"};var j=t(5886);const b=o.Sxu.classNames;function C(n){const[e,t]=s.useState(n),i={...(0,o.$qi)(n)},{a:r,b:l,c:h,d}=e,v=n=>{t({...e,...n})};return(0,a.jsxs)("div",{className:b.join(n.className,m.paletteEditor),style:i,children:[(0,a.jsxs)("aside",{children:[(0,a.jsx)(g,{className:m.disk,a:r,b:l,c:h,d}),(0,a.jsx)(j.j,{className:m.horizontal,a:r,b:l,c:h,d}),(0,a.jsx)(j.j,{className:m.horizontalA,a:r,b:l,c:h,d}),(0,a.jsx)(j.j,{className:m.horizontalB,a:r,b:l,c:h,d})]}),(0,a.jsxs)(o.WET,{maxHeight:"100%",children:[(0,a.jsxs)(o.Zdo,{label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.VB5,{}),(0,a.jsx)("div",{children:"Config"})]}),className:m.scroll,children:[(0,a.jsx)(u,{label:"Luminance",value:r,onChange:n=>v({a:n})}),(0,a.jsx)(u,{label:"Saturation",value:l,onChange:n=>v({b:n})}),(0,a.jsx)(u,{label:"Spread",value:h,onChange:n=>v({c:n})}),(0,a.jsx)(u,{label:"Shift",value:d,onChange:n=>v({d:n})})]},"config"),(0,a.jsxs)(o.Zdo,{label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.VJ,{}),(0,a.jsx)("div",{children:"Share"})]}),children:[(0,a.jsx)(c.A,{language:"glsl",value:`vec3 palette(float t) {\n    return vec3(${p(r)})\n        + vec3(${p(l)}) * cos(\n            ${2*Math.PI} * (\n                t * vec3(${p(h)})\n                + vec3(${p(d)})\n            )\n        )\n}`}),(0,a.jsx)(c.A,{language:"ts",value:`{\n    name: "",\n    a: [${p(r)}],\n    b: [${p(l)}],\n    c: [${p(h)}],\n    d: [${p(d)}],\n}`})]},"share")]})]})}function p(n){return`${n.map(n=>n.toFixed(3)).join(", ")}`}function N(){const{a:n,b:e,d:t,c:o}=function(){const n=(0,i.fA)("value");return s.useMemo(()=>24===n.length?function(n){return 24!==n.length?$:{a:A(n,0),b:A(n,1),c:A(n,2),d:A(n,3)}}(n):$,[n])}();return(0,a.jsx)(C,{a:n,b:e,c:o,d:t})}function A(n,e){const t=Math.floor(n.length/4),a=Math.floor(t/3),s=Math.pow(16,a)-1;return[0,1,2].map(i=>{const o=e*t+a*i,c=`0x${n.slice(o,o+a)}`;return parseInt(c)/s})}const $={a:[.5,.5,.5],b:[.5,.5,.5],c:[1,1,1],d:[0,.33,.67]}}}]);