"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([["3384"],{6969:function(e,n,t){t.r(n),t.d(n,{default:()=>x});var r=t(4848),i=t(8453),o=t(6540),s=t(1818),a=t(385),l=t(2790),c=t(3172),d=t(7276);function u(e){let n={strength:1},t=new l.TgdTexture2D(e).loadBitmap((0,l.tgdLoadImage)(d)),r=new l.TgdFilterBlur({size:32,direction:0}),i=new l.TgdFilterBlur({size:32,direction:90}),o=new l.TgdPainterFilter(e,{texture:t,filters:[r,i]});return e.add(o,new l.TgdPainterLogic(e=>{r.strength=n.strength,i.strength=n.strength})),e.play(),n}function g(){var e;let n,t=(e=u,(n=o.useRef({init:(t,r)=>{n.current.params=e(t,r)},params:void 0})).current),[i,a]=function(e,n,t){let[r,i]=o.useState(1);return o.useEffect(()=>{let{params:t}=e;t&&(t[n]=r)},[r]),[r,i]}(t,"strength",1);return(0,r.jsx)(c.A,{onReady:t.init,width:"512px",height:"512px",children:(0,r.jsx)(s.xZ7,{color:"primary-1",content:(0,r.jsxs)("div",{children:["Strength of the blur: ",(0,r.jsx)("b",{children:i.toFixed(2)})]}),children:(0,r.jsx)(s.BAW,{value:i,onChange:a,min:0,max:2,step:.05})})})}let h={"Detail #1":"    const params = { strength: 1 }\n    const texture = new TgdTexture2D(context).loadBitmap(\n        tgdLoadImage(BackgroundURL)\n    )\n    const size = 32\n    const horizontalBlurFilter = new TgdFilterBlur({\n        size,\n        direction: 0,\n    })\n    const verticalBlurFilter = new TgdFilterBlur({\n        size,\n        direction: 90,\n    })\n    const filter = new TgdPainterFilter(context, {\n        texture,\n        filters: [horizontalBlurFilter, verticalBlurFilter],\n    })\n    context.add(\n        filter,\n        new TgdPainterLogic((time) => {\n            horizontalBlurFilter.strength = params.strength\n            verticalBlurFilter.strength = params.strength\n        })\n    )\n    context.play()\n    return params"};function p(){let[e,n]=o.useState(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"half-left",children:(0,r.jsx)(g,{})}),(0,r.jsxs)("div",{className:"half-right",children:[(0,r.jsx)("div",{children:(0,r.jsx)(s.yQN,{variant:"elevated",onClick:()=>n(!e),children:e?"Show code details":"Show full code"})}),(0,r.jsx)(a.A,{language:"tsx",value:e?'import {\n    TgdContext,\n    TgdFilterBlur,\n    tgdLoadImage,\n    TgdPainterFilter,\n    TgdPainterLogic,\n    TgdTexture2D,\n} from "@tolokoban/tgd"\nimport { ViewSlider, ViewTooltip } from "@tolokoban/ui"\n\nimport View, { Assets } from "@/components/demo/Tgd"\n\nimport BackgroundURL from "../../../marylin.webp"\nimport React from "react"\n\nfunction init(context: TgdContext) {\n    const params = { strength: 1 }\n    const texture = new TgdTexture2D(context).loadBitmap(\n        tgdLoadImage(BackgroundURL)\n    )\n    const size = 32\n    const horizontalBlurFilter = new TgdFilterBlur({\n        size,\n        direction: 0,\n    })\n    const verticalBlurFilter = new TgdFilterBlur({\n        size,\n        direction: 90,\n    })\n    const filter = new TgdPainterFilter(context, {\n        texture,\n        filters: [horizontalBlurFilter, verticalBlurFilter],\n    })\n    context.add(\n        filter,\n        new TgdPainterLogic((time) => {\n            horizontalBlurFilter.strength = params.strength\n            verticalBlurFilter.strength = params.strength\n        })\n    )\n    context.play()\n    return params\n}\n\nexport default function Demo() {\n    const tgd = useTgd(init)\n    const [strength, setStrength] = useUniform(tgd, "strength", 1)\n\n    return (\n        <View onReady={tgd.init} width="512px" height="512px">\n            <ViewTooltip\n                color="primary-1"\n                content={\n                    <div>\n                        Strength of the blur: <b>{strength.toFixed(2)}</b>\n                    </div>\n                }\n            >\n                <ViewSlider\n                    value={strength}\n                    onChange={setStrength}\n                    min={0}\n                    max={2}\n                    step={0.05}\n                />\n            </ViewTooltip>\n        </View>\n    )\n}\n\nfunction useTgd<T extends { [key: string]: number }>(\n    init: (context: TgdContext, assets: Assets) => T\n) {\n    const ref = React.useRef<{\n        init: (context: TgdContext, assets: Assets) => void\n        params: T | undefined\n    }>({\n        init: (context: TgdContext, assets: Assets) => {\n            ref.current.params = init(context, assets)\n        },\n        params: undefined,\n    })\n    return ref.current\n}\n\nfunction useUniform<T extends Record<string, number>, S extends keyof T>(\n    tgd: {\n        init: (context: TgdContext, assets: Assets) => void\n        params: T | undefined\n    },\n    param: S,\n    initialValue: number\n): [value: number, setValue: (value: number) => void] {\n    const [value, setValue] = React.useState(initialValue)\n    React.useEffect(() => {\n        const { params } = tgd\n        if (!params) return\n        ;(params as Record<S, number>)[param] = value\n    }, [value])\n    return [value, setValue]\n}\n':h})]})]})}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){var r;r=t[n],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return e}function m(e){var n=f({a:"a",h1:"h1",h2:"h2",p:"p"},(0,i.R)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{children:(0,r.jsx)(n.a,{href:"docs/classes/TgdPainterFilter.html",children:"TgdPainterFilter"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"#..",children:"Back to the list of available filters"})}),"\n",(0,r.jsx)(n.h2,{children:(0,r.jsx)(n.a,{href:"docs/classes/TgdFilterBlur.html",children:"TgdFilterBlur"})}),"\n",(0,r.jsx)(n.p,{children:"Horizontal and vertical blur of 16px."}),"\n",(0,r.jsx)(p,{})]})}function x(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=f({},(0,i.R)(),t.components).wrapper;return o?(0,r.jsx)(o,(e=f({},t),n=n={children:(0,r.jsx)(m,f({},t))},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):(function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t})(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e)):m(t)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyLzMzODQuZmMxNmVjYjFkY2VjNDliZi5qcyIsInNvdXJjZXMiOlsiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL2dhbWUvdGdkMi9kb2Mvc3JjL2FwcC9hcnRpY2xlcy9wYWludGVyL2ZpbHRlci9ibHVyL18vbWFyeWxpbi5kZW1vL21hcnlsaW4uZGVtby50c3giLCIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvZ2FtZS90Z2QyL2RvYy9zcmMvYXBwL2FydGljbGVzL3BhaW50ZXIvZmlsdGVyL2JsdXIvXy9tYXJ5bGluLmRlbW8vaW5kZXgudHN4IiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL2dhbWUvdGdkMi9kb2Mvc3JjL2FwcC9hcnRpY2xlcy9wYWludGVyL2ZpbHRlci9ibHVyL3BhZ2UubWR4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgVGdkQ29udGV4dCxcbiAgICBUZ2RGaWx0ZXJCbHVyLFxuICAgIHRnZExvYWRJbWFnZSxcbiAgICBUZ2RQYWludGVyRmlsdGVyLFxuICAgIFRnZFBhaW50ZXJMb2dpYyxcbiAgICBUZ2RUZXh0dXJlMkQsXG59IGZyb20gXCJAdG9sb2tvYmFuL3RnZFwiXG5pbXBvcnQgeyBWaWV3U2xpZGVyLCBWaWV3VG9vbHRpcCB9IGZyb20gXCJAdG9sb2tvYmFuL3VpXCJcblxuaW1wb3J0IFZpZXcsIHsgQXNzZXRzIH0gZnJvbSBcIkAvY29tcG9uZW50cy9kZW1vL1RnZFwiXG5cbmltcG9ydCBCYWNrZ3JvdW5kVVJMIGZyb20gXCIuLi8uLi8uLi9tYXJ5bGluLndlYnBcIlxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiXG5cbmZ1bmN0aW9uIGluaXQoY29udGV4dDogVGdkQ29udGV4dCkge1xuICAgIC8vICNiZWdpblxuICAgIGNvbnN0IHBhcmFtcyA9IHsgc3RyZW5ndGg6IDEgfVxuICAgIGNvbnN0IHRleHR1cmUgPSBuZXcgVGdkVGV4dHVyZTJEKGNvbnRleHQpLmxvYWRCaXRtYXAoXG4gICAgICAgIHRnZExvYWRJbWFnZShCYWNrZ3JvdW5kVVJMKVxuICAgIClcbiAgICBjb25zdCBzaXplID0gMzJcbiAgICBjb25zdCBob3Jpem9udGFsQmx1ckZpbHRlciA9IG5ldyBUZ2RGaWx0ZXJCbHVyKHtcbiAgICAgICAgc2l6ZSxcbiAgICAgICAgZGlyZWN0aW9uOiAwLFxuICAgIH0pXG4gICAgY29uc3QgdmVydGljYWxCbHVyRmlsdGVyID0gbmV3IFRnZEZpbHRlckJsdXIoe1xuICAgICAgICBzaXplLFxuICAgICAgICBkaXJlY3Rpb246IDkwLFxuICAgIH0pXG4gICAgY29uc3QgZmlsdGVyID0gbmV3IFRnZFBhaW50ZXJGaWx0ZXIoY29udGV4dCwge1xuICAgICAgICB0ZXh0dXJlLFxuICAgICAgICBmaWx0ZXJzOiBbaG9yaXpvbnRhbEJsdXJGaWx0ZXIsIHZlcnRpY2FsQmx1ckZpbHRlcl0sXG4gICAgfSlcbiAgICBjb250ZXh0LmFkZChcbiAgICAgICAgZmlsdGVyLFxuICAgICAgICBuZXcgVGdkUGFpbnRlckxvZ2ljKCh0aW1lKSA9PiB7XG4gICAgICAgICAgICBob3Jpem9udGFsQmx1ckZpbHRlci5zdHJlbmd0aCA9IHBhcmFtcy5zdHJlbmd0aFxuICAgICAgICAgICAgdmVydGljYWxCbHVyRmlsdGVyLnN0cmVuZ3RoID0gcGFyYW1zLnN0cmVuZ3RoXG4gICAgICAgIH0pXG4gICAgKVxuICAgIGNvbnRleHQucGxheSgpXG4gICAgcmV0dXJuIHBhcmFtc1xuICAgIC8vICNlbmRcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRGVtbygpIHtcbiAgICBjb25zdCB0Z2QgPSB1c2VUZ2QoaW5pdClcbiAgICBjb25zdCBbc3RyZW5ndGgsIHNldFN0cmVuZ3RoXSA9IHVzZVVuaWZvcm0odGdkLCBcInN0cmVuZ3RoXCIsIDEpXG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8VmlldyBvblJlYWR5PXt0Z2QuaW5pdH0gd2lkdGg9XCI1MTJweFwiIGhlaWdodD1cIjUxMnB4XCI+XG4gICAgICAgICAgICA8Vmlld1Rvb2x0aXBcbiAgICAgICAgICAgICAgICBjb2xvcj1cInByaW1hcnktMVwiXG4gICAgICAgICAgICAgICAgY29udGVudD17XG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICBTdHJlbmd0aCBvZiB0aGUgYmx1cjogPGI+e3N0cmVuZ3RoLnRvRml4ZWQoMil9PC9iPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFZpZXdTbGlkZXJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3N0cmVuZ3RofVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17c2V0U3RyZW5ndGh9XG4gICAgICAgICAgICAgICAgICAgIG1pbj17MH1cbiAgICAgICAgICAgICAgICAgICAgbWF4PXsyfVxuICAgICAgICAgICAgICAgICAgICBzdGVwPXswLjA1fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1ZpZXdUb29sdGlwPlxuICAgICAgICA8L1ZpZXc+XG4gICAgKVxufVxuXG5mdW5jdGlvbiB1c2VUZ2Q8VCBleHRlbmRzIHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0+KFxuICAgIGluaXQ6IChjb250ZXh0OiBUZ2RDb250ZXh0LCBhc3NldHM6IEFzc2V0cykgPT4gVFxuKSB7XG4gICAgY29uc3QgcmVmID0gUmVhY3QudXNlUmVmPHtcbiAgICAgICAgaW5pdDogKGNvbnRleHQ6IFRnZENvbnRleHQsIGFzc2V0czogQXNzZXRzKSA9PiB2b2lkXG4gICAgICAgIHBhcmFtczogVCB8IHVuZGVmaW5lZFxuICAgIH0+KHtcbiAgICAgICAgaW5pdDogKGNvbnRleHQ6IFRnZENvbnRleHQsIGFzc2V0czogQXNzZXRzKSA9PiB7XG4gICAgICAgICAgICByZWYuY3VycmVudC5wYXJhbXMgPSBpbml0KGNvbnRleHQsIGFzc2V0cylcbiAgICAgICAgfSxcbiAgICAgICAgcGFyYW1zOiB1bmRlZmluZWQsXG4gICAgfSlcbiAgICByZXR1cm4gcmVmLmN1cnJlbnRcbn1cblxuZnVuY3Rpb24gdXNlVW5pZm9ybTxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgbnVtYmVyPiwgUyBleHRlbmRzIGtleW9mIFQ+KFxuICAgIHRnZDoge1xuICAgICAgICBpbml0OiAoY29udGV4dDogVGdkQ29udGV4dCwgYXNzZXRzOiBBc3NldHMpID0+IHZvaWRcbiAgICAgICAgcGFyYW1zOiBUIHwgdW5kZWZpbmVkXG4gICAgfSxcbiAgICBwYXJhbTogUyxcbiAgICBpbml0aWFsVmFsdWU6IG51bWJlclxuKTogW3ZhbHVlOiBudW1iZXIsIHNldFZhbHVlOiAodmFsdWU6IG51bWJlcikgPT4gdm9pZF0ge1xuICAgIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVdID0gUmVhY3QudXNlU3RhdGUoaW5pdGlhbFZhbHVlKVxuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgcGFyYW1zIH0gPSB0Z2RcbiAgICAgICAgaWYgKCFwYXJhbXMpIHJldHVyblxuICAgICAgICA7KHBhcmFtcyBhcyBSZWNvcmQ8UywgbnVtYmVyPilbcGFyYW1dID0gdmFsdWVcbiAgICB9LCBbdmFsdWVdKVxuICAgIHJldHVybiBbdmFsdWUsIHNldFZhbHVlXVxufVxuIiwiLyoqXG4gKiBXYXJuaW5nISBUaGlzIGNvZGUgaGFzIGJlZW4gZ2VuZXJhdGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIlxuaW1wb3J0IHsgVmlld0J1dHRvbiB9IGZyb20gXCJAdG9sb2tvYmFuL3VpXCJcbmltcG9ydCBDb2RlVmlld2VyIGZyb20gXCJAL2NvbXBvbmVudHMvZGVtby9Db2RlVmlld2VyXCJcbmltcG9ydCBEZW1vIGZyb20gXCIuL21hcnlsaW4uZGVtb1wiXG5cbmNvbnN0IEZPQ1VTID0ge1wiRGV0YWlsICMxXCI6XCIgICAgY29uc3QgcGFyYW1zID0geyBzdHJlbmd0aDogMSB9XFxuICAgIGNvbnN0IHRleHR1cmUgPSBuZXcgVGdkVGV4dHVyZTJEKGNvbnRleHQpLmxvYWRCaXRtYXAoXFxuICAgICAgICB0Z2RMb2FkSW1hZ2UoQmFja2dyb3VuZFVSTClcXG4gICAgKVxcbiAgICBjb25zdCBzaXplID0gMzJcXG4gICAgY29uc3QgaG9yaXpvbnRhbEJsdXJGaWx0ZXIgPSBuZXcgVGdkRmlsdGVyQmx1cih7XFxuICAgICAgICBzaXplLFxcbiAgICAgICAgZGlyZWN0aW9uOiAwLFxcbiAgICB9KVxcbiAgICBjb25zdCB2ZXJ0aWNhbEJsdXJGaWx0ZXIgPSBuZXcgVGdkRmlsdGVyQmx1cih7XFxuICAgICAgICBzaXplLFxcbiAgICAgICAgZGlyZWN0aW9uOiA5MCxcXG4gICAgfSlcXG4gICAgY29uc3QgZmlsdGVyID0gbmV3IFRnZFBhaW50ZXJGaWx0ZXIoY29udGV4dCwge1xcbiAgICAgICAgdGV4dHVyZSxcXG4gICAgICAgIGZpbHRlcnM6IFtob3Jpem9udGFsQmx1ckZpbHRlciwgdmVydGljYWxCbHVyRmlsdGVyXSxcXG4gICAgfSlcXG4gICAgY29udGV4dC5hZGQoXFxuICAgICAgICBmaWx0ZXIsXFxuICAgICAgICBuZXcgVGdkUGFpbnRlckxvZ2ljKCh0aW1lKSA9PiB7XFxuICAgICAgICAgICAgaG9yaXpvbnRhbEJsdXJGaWx0ZXIuc3RyZW5ndGggPSBwYXJhbXMuc3RyZW5ndGhcXG4gICAgICAgICAgICB2ZXJ0aWNhbEJsdXJGaWx0ZXIuc3RyZW5ndGggPSBwYXJhbXMuc3RyZW5ndGhcXG4gICAgICAgIH0pXFxuICAgIClcXG4gICAgY29udGV4dC5wbGF5KClcXG4gICAgcmV0dXJuIHBhcmFtc1wifVxuY29uc3QgRlVMTCA9IFwiaW1wb3J0IHtcXG4gICAgVGdkQ29udGV4dCxcXG4gICAgVGdkRmlsdGVyQmx1cixcXG4gICAgdGdkTG9hZEltYWdlLFxcbiAgICBUZ2RQYWludGVyRmlsdGVyLFxcbiAgICBUZ2RQYWludGVyTG9naWMsXFxuICAgIFRnZFRleHR1cmUyRCxcXG59IGZyb20gXFxcIkB0b2xva29iYW4vdGdkXFxcIlxcbmltcG9ydCB7IFZpZXdTbGlkZXIsIFZpZXdUb29sdGlwIH0gZnJvbSBcXFwiQHRvbG9rb2Jhbi91aVxcXCJcXG5cXG5pbXBvcnQgVmlldywgeyBBc3NldHMgfSBmcm9tIFxcXCJAL2NvbXBvbmVudHMvZGVtby9UZ2RcXFwiXFxuXFxuaW1wb3J0IEJhY2tncm91bmRVUkwgZnJvbSBcXFwiLi4vLi4vLi4vbWFyeWxpbi53ZWJwXFxcIlxcbmltcG9ydCBSZWFjdCBmcm9tIFxcXCJyZWFjdFxcXCJcXG5cXG5mdW5jdGlvbiBpbml0KGNvbnRleHQ6IFRnZENvbnRleHQpIHtcXG4gICAgY29uc3QgcGFyYW1zID0geyBzdHJlbmd0aDogMSB9XFxuICAgIGNvbnN0IHRleHR1cmUgPSBuZXcgVGdkVGV4dHVyZTJEKGNvbnRleHQpLmxvYWRCaXRtYXAoXFxuICAgICAgICB0Z2RMb2FkSW1hZ2UoQmFja2dyb3VuZFVSTClcXG4gICAgKVxcbiAgICBjb25zdCBzaXplID0gMzJcXG4gICAgY29uc3QgaG9yaXpvbnRhbEJsdXJGaWx0ZXIgPSBuZXcgVGdkRmlsdGVyQmx1cih7XFxuICAgICAgICBzaXplLFxcbiAgICAgICAgZGlyZWN0aW9uOiAwLFxcbiAgICB9KVxcbiAgICBjb25zdCB2ZXJ0aWNhbEJsdXJGaWx0ZXIgPSBuZXcgVGdkRmlsdGVyQmx1cih7XFxuICAgICAgICBzaXplLFxcbiAgICAgICAgZGlyZWN0aW9uOiA5MCxcXG4gICAgfSlcXG4gICAgY29uc3QgZmlsdGVyID0gbmV3IFRnZFBhaW50ZXJGaWx0ZXIoY29udGV4dCwge1xcbiAgICAgICAgdGV4dHVyZSxcXG4gICAgICAgIGZpbHRlcnM6IFtob3Jpem9udGFsQmx1ckZpbHRlciwgdmVydGljYWxCbHVyRmlsdGVyXSxcXG4gICAgfSlcXG4gICAgY29udGV4dC5hZGQoXFxuICAgICAgICBmaWx0ZXIsXFxuICAgICAgICBuZXcgVGdkUGFpbnRlckxvZ2ljKCh0aW1lKSA9PiB7XFxuICAgICAgICAgICAgaG9yaXpvbnRhbEJsdXJGaWx0ZXIuc3RyZW5ndGggPSBwYXJhbXMuc3RyZW5ndGhcXG4gICAgICAgICAgICB2ZXJ0aWNhbEJsdXJGaWx0ZXIuc3RyZW5ndGggPSBwYXJhbXMuc3RyZW5ndGhcXG4gICAgICAgIH0pXFxuICAgIClcXG4gICAgY29udGV4dC5wbGF5KClcXG4gICAgcmV0dXJuIHBhcmFtc1xcbn1cXG5cXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEZW1vKCkge1xcbiAgICBjb25zdCB0Z2QgPSB1c2VUZ2QoaW5pdClcXG4gICAgY29uc3QgW3N0cmVuZ3RoLCBzZXRTdHJlbmd0aF0gPSB1c2VVbmlmb3JtKHRnZCwgXFxcInN0cmVuZ3RoXFxcIiwgMSlcXG5cXG4gICAgcmV0dXJuIChcXG4gICAgICAgIDxWaWV3IG9uUmVhZHk9e3RnZC5pbml0fSB3aWR0aD1cXFwiNTEycHhcXFwiIGhlaWdodD1cXFwiNTEycHhcXFwiPlxcbiAgICAgICAgICAgIDxWaWV3VG9vbHRpcFxcbiAgICAgICAgICAgICAgICBjb2xvcj1cXFwicHJpbWFyeS0xXFxcIlxcbiAgICAgICAgICAgICAgICBjb250ZW50PXtcXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgU3RyZW5ndGggb2YgdGhlIGJsdXI6IDxiPntzdHJlbmd0aC50b0ZpeGVkKDIpfTwvYj5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgPlxcbiAgICAgICAgICAgICAgICA8Vmlld1NsaWRlclxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3N0cmVuZ3RofVxcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3NldFN0cmVuZ3RofVxcbiAgICAgICAgICAgICAgICAgICAgbWluPXswfVxcbiAgICAgICAgICAgICAgICAgICAgbWF4PXsyfVxcbiAgICAgICAgICAgICAgICAgICAgc3RlcD17MC4wNX1cXG4gICAgICAgICAgICAgICAgLz5cXG4gICAgICAgICAgICA8L1ZpZXdUb29sdGlwPlxcbiAgICAgICAgPC9WaWV3PlxcbiAgICApXFxufVxcblxcbmZ1bmN0aW9uIHVzZVRnZDxUIGV4dGVuZHMgeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfT4oXFxuICAgIGluaXQ6IChjb250ZXh0OiBUZ2RDb250ZXh0LCBhc3NldHM6IEFzc2V0cykgPT4gVFxcbikge1xcbiAgICBjb25zdCByZWYgPSBSZWFjdC51c2VSZWY8e1xcbiAgICAgICAgaW5pdDogKGNvbnRleHQ6IFRnZENvbnRleHQsIGFzc2V0czogQXNzZXRzKSA9PiB2b2lkXFxuICAgICAgICBwYXJhbXM6IFQgfCB1bmRlZmluZWRcXG4gICAgfT4oe1xcbiAgICAgICAgaW5pdDogKGNvbnRleHQ6IFRnZENvbnRleHQsIGFzc2V0czogQXNzZXRzKSA9PiB7XFxuICAgICAgICAgICAgcmVmLmN1cnJlbnQucGFyYW1zID0gaW5pdChjb250ZXh0LCBhc3NldHMpXFxuICAgICAgICB9LFxcbiAgICAgICAgcGFyYW1zOiB1bmRlZmluZWQsXFxuICAgIH0pXFxuICAgIHJldHVybiByZWYuY3VycmVudFxcbn1cXG5cXG5mdW5jdGlvbiB1c2VVbmlmb3JtPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+LCBTIGV4dGVuZHMga2V5b2YgVD4oXFxuICAgIHRnZDoge1xcbiAgICAgICAgaW5pdDogKGNvbnRleHQ6IFRnZENvbnRleHQsIGFzc2V0czogQXNzZXRzKSA9PiB2b2lkXFxuICAgICAgICBwYXJhbXM6IFQgfCB1bmRlZmluZWRcXG4gICAgfSxcXG4gICAgcGFyYW06IFMsXFxuICAgIGluaXRpYWxWYWx1ZTogbnVtYmVyXFxuKTogW3ZhbHVlOiBudW1iZXIsIHNldFZhbHVlOiAodmFsdWU6IG51bWJlcikgPT4gdm9pZF0ge1xcbiAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IFJlYWN0LnVzZVN0YXRlKGluaXRpYWxWYWx1ZSlcXG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcXG4gICAgICAgIGNvbnN0IHsgcGFyYW1zIH0gPSB0Z2RcXG4gICAgICAgIGlmICghcGFyYW1zKSByZXR1cm5cXG4gICAgICAgIDsocGFyYW1zIGFzIFJlY29yZDxTLCBudW1iZXI+KVtwYXJhbV0gPSB2YWx1ZVxcbiAgICB9LCBbdmFsdWVdKVxcbiAgICByZXR1cm4gW3ZhbHVlLCBzZXRWYWx1ZV1cXG59XFxuXCJcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRGVtb0NvbnRhaW5lcigpIHtcbiAgICBjb25zdCBbZnVsbCwgc2V0RnVsbF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcbiAgICByZXR1cm4gPD5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoYWxmLWxlZnRcIj48RGVtbyAvPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhhbGYtcmlnaHRcIj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPFZpZXdCdXR0b24gdmFyaWFudD1cImVsZXZhdGVkXCIgb25DbGljaz17KCkgPT4gc2V0RnVsbCghZnVsbCl9PlxuICAgICAgICAgICAgICAgICAgICB7ZnVsbCA/IFwiU2hvdyBjb2RlIGRldGFpbHNcIiA6IFwiU2hvdyBmdWxsIGNvZGVcIn1cbiAgICAgICAgICAgICAgICA8L1ZpZXdCdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxDb2RlVmlld2VyIGxhbmd1YWdlPVwidHN4XCIgdmFsdWU9e2Z1bGwgPyBGVUxMIDogRk9DVVN9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvPlxufSIsIiJdLCJuYW1lcyI6WyJ0Il0sIm1hcHBpbmdzIjoieU9BZUEsU0FBUyxFQUFLLENBQW1CLEVBRTdCLElBQU0sRUFBUyxDQUFFLFNBQVUsQ0FBRSxFQUN2QkEsRUFBVSxJQUFJLGNBQVksQ0FBQyxHQUFTLFVBQVUsQ0FDaEQsbUJBQWEsSUFHWCxFQUF1QixJQUFJLGVBQWEsQ0FBQyxDQUMzQyxLQUZTLEdBR1QsVUFBVyxDLEdBRVQsRUFBcUIsSUFBSSxlQUFhLENBQUMsQ0FDekMsS0FOUyxHQU9ULFVBQVcsRSxHQUVULEVBQVMsSUFBSSxrQkFBZ0IsQ0FBQyxFQUFTLENBQ3pDQSxRQUFBQSxFQUNBLFFBQVMsQ0FBQyxFQUFzQixFQUFtQixBLEdBVXZELE9BUkEsRUFBUSxHQUFHLENBQ1AsRUFDQSxJQUFJLGlCQUFlLENBQUMsQUFBQyxJQUNqQixFQUFxQixRQUFRLENBQUcsRUFBTyxRQUFRLENBQy9DLEVBQW1CLFFBQVEsQ0FBRyxFQUFPLFFBQVEsQUFDakQsSUFFSixFQUFRLElBQUksR0FDTCxDQUVYLENBRWUsU0FBUyxRQTJCcEIsTUFFTSxFQTVCQUEsR0EwQk4sRUExQm1CLEVBcUNaLENBVEQsRUFBTSxRQUFZLENBR3JCLENBQ0MsS0FBTSxDQUFDLEVBQXFCLEtBQ3hCLEVBQUksT0FBTyxDQUFDLE1BQU0sQ0FBRyxFQUFLLEVBQVMsRUFDdkMsRUFDQSxPQUFRLE0sSUFFRCxPQUFPLEVBcENaLENBQUMsRUFBVSxFQUFZLENBQUcsQUF1Q3BDLFNBQ0ksQ0FHQyxDQUNELENBQVEsQ0FDUixDQUFvQixFQUVwQixHQUFNLENBQUMsRUFBTyxFQUFTLENBQUcsVUFBYyxDQS9Db0IsR0FxRDVELE9BTEEsV0FBZSxDQUFDLEtBQ1osR0FBTSxDQUFFLFFBQU0sQ0FBRSxDQUFHLEVBQ2QsR0FDSCxFQUE0QixDQUFDLEVBQU0sQ0FBRyxDQUFJLENBQ2hELEVBQUcsQ0FBQyxFQUFNLEVBQ0gsQ0FBQyxFQUFPLEVBQVMsQUFDNUIsRUF0RCtDQSxFQUFLLFdBQVksR0FFNUQsTUFDSSxVQUFDLEdBQUksRUFBQyxRQUFTQSxFQUFJLElBQUksQ0FBRSxNQUFNLFFBQVEsT0FBTyxRQUFPLFNBQ2pELFVBQUMsS0FBVyxFQUNSLE1BQU0sWUFDTixRQUNJLHFEQUMwQix3QkFBSSxFQUFTLE9BQU8sQ0FBQyxFQUFFLEdBQUssR0FDaEQsU0FHVixVQUFDLEtBQVUsRUFDUCxNQUFPLEVBQ1AsU0FBVSxFQUNWLElBQUssRUFDTCxJQUFLLEVBQ0wsS0FBTSxHQUFJLEVBQ1osRUFDUSxFQUcxQixDQzlEQSxJQUFNLEVBQVEsQ0FBQyxZQUFZLGl2QkFBaXZCLEVBRzd2QixTQUFTLElBQ3BCLEdBQU0sQ0FBQyxFQUFNLEVBQVEsQ0FBRyxVQUFjLENBQUMsSUFDdkMsTUFBTyxpQ0FDSCxpQkFBSyxVQUFVLFlBQVcsU0FBQyxVQUFDLEVBQUksR0FBRyxHQUNuQyxrQkFBSyxVQUFVLGFBQVksVUFDdkIsMEJBQ0ksVUFBQyxLQUFVLEVBQUMsUUFBUSxXQUFXLFFBQVMsSUFBTSxFQUFRLENBQUMsR0FBSyxTQUN2RCxFQUFPLG9CQUFzQixnQkFBZ0IsRUFDckMsR0FFakIsVUFBQyxHQUFVLEVBQUMsU0FBUyxNQUFNLE1BQU8sRUFaakMsd3pGQVkrQyxDQUFLLEdBQUksR0FDdkQsRUFFZCxDLGduQkN0Qkcsa0IscUVBRUYsdUMsa0dBRUcsZSxrQ0FFSix1QyJ9