"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([["9555"],{3172(e,t,n){n.d(t,{A:()=>h});var a=n(4848),r=n(6540),s=n(6671);function c({className:e,label:t,min:n,max:r,value:c,onChange:l}){return(0,a.jsxs)("div",{className:s.Sxu.classNames.join(e,"u8HaymDuvmcx5Xlm"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:t}),(0,a.jsx)("div",{children:(0,a.jsx)("strong",{children:c.toFixed(2)})})]}),(0,a.jsx)("input",{type:"range",step:(r-n)/100,min:n,max:r,value:c,onChange:e=>{l(parseFloat(e.target.value))}})]})}function l({className:e,values:t,onChange:n}){let[l,i]=r.useState(!1);return(0,a.jsxs)("div",{className:s.Sxu.classNames.join(e,"O3eUw2E6kJAY5Kzb",l?"fh6L2aMFrodrLYWv":"LFyaXnIfeqU4RizM"),children:[(0,a.jsx)("button",{type:"button",onClick:()=>i(!l),children:(0,a.jsx)("svg",{style:{width:"1.5em",height:"1.5em"},viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet","stroke-width":"1.5",children:(0,a.jsx)("path",{d:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",stroke:"none",fill:"#fff"})})}),(0,a.jsx)("div",{children:Object.keys(t).map(e=>{let r=t[e];if(!r)return null;let s=r.min??0,l=r.max??1;return(0,a.jsx)(c,{label:r.label,min:s,max:l,value:r.value,onChange:a=>{n({...t,[e]:{...t[e],value:a}})}},e)})})]})}var i=n(2155),o=n(3289);let u="NwIHvuh9THszhNCj",d="OvO7uXOT0RoimVco",m="r0e5CaWIlKI2oFZu",g="qgsDNUq3iYtpdR4I";function h({className:e,options:t,onReady:n,gizmo:c=!1,width:h="640px",height:b="480px",noBorder:p=!1,assets:x,controller:j,settings:v,children:C,disableDefaultDoubleTap:y=!1}){let w=r.useRef(null),[O,k]=r.useState(v),L=r.useCallback(()=>{if(!O)return{};let e={};for(let t of Object.keys(O))e[t]=O[t].value;return e},[O]);r.useEffect(()=>{if(O){let e={};for(let t of Object.keys(O))e[t]=O[t].value;w.current?.(L())}},[O,L]);let[P,S]=r.useState(null),[T,N]=r.useState(!0),[R,A]=r.useState(!1),E=r.useRef(null),D=r.useRef(null),M=r.useRef(null),z=r.useRef(null),I=r.useRef(null),[F,q]=r.useState(!0);h.endsWith("px")&&b.endsWith("px")&&(h.substring(h.length-2),b.substring(b.length-2));let Y=e=>{if(!e||D.current)return;D.current=e;let a=new i.TgdContext(e,t);console.log("Depht buffer bits:",a.gl.getParameter(a.gl.DEPTH_BITS)),E.current=a,q(!0),f(x).then(e=>{try{if(j){let e=new i.TgdControllerCameraOrbit(a,{debug:!0,inertiaOrbit:1e3,inertiaZoom:500,inertiaPanning:500,...j});I.current=e,a.inputs.pointer.eventTapMultiple.addListener(t=>{console.log("\uD83D\uDE80 [tgd] evt.tapsCount =",t.tapsCount),t.preventTap(),2!==t.tapsCount||y||e.reset((j.inertiaOrbit??500)*.001)})}w.current=n(a,e),w.current?.(L()),a.paint()}catch(e){S(e instanceof Error?e.message:JSON.stringify(e)),console.error(e)}q(!1)}).catch(e=>{console.error("Unable to initialize the scene!",e),q(!1)});let r=M.current;r&&r.attachContext(a)},H=e=>{let t=new i.TgdCanvasGizmo({canvas:e});M.current=t,t.eventTipClick.addListener(({to:e})=>{let t=E.current;t&&t.animSchedule({duration:.2,easingFunction:i.tgdEasingFunctionInOutCubic,action:(0,i.tgdActionCreateCameraInterpolation)(t.camera,{orientation:e})})});let n=E.current;n&&t.attachContext(n)};return(r.useEffect(()=>{let e=D.current,t=E.current;if(!e||!t)return;let n=new ResizeObserver(()=>t.paint());return n.observe(e),e.requestFullscreen||(e.requestFullscreen=e.webkitRequestFullscreen),A(!!e.requestFullscreen),()=>n.unobserve(e)},[E.current,D.current]),p)?(0,a.jsxs)("div",{ref:z,className:u,style:{width:T?h:b,height:T?b:h},children:[(0,a.jsx)("canvas",{className:d,ref:Y}),c&&(0,a.jsx)("canvas",{className:m,ref:H}),O&&(0,a.jsx)(l,{values:O,onChange:k}),P&&(0,a.jsx)("div",{className:g,children:P})]}):(0,a.jsxs)("div",{className:s.Sxu.classNames.join(e,"MESVmxyHbYMu0P0r"),children:[(0,a.jsxs)("div",{className:s.Sxu.classNames.join("OBhA17iAKaUaAbSS",!F&&"dxtnW6vkWWweMZbP"),children:[(0,a.jsx)("div",{children:(0,a.jsx)(s.I64,{onClick:()=>N(!T)})}),(0,a.jsx)("div",{children:(0,a.jsx)(s.kRc,{onClick:()=>{let e=E.current;e&&e.takeSnapshot().then(e=>{let t=document.createElement("a");document.body.appendChild(t),t.style.display="none",t.href=e.src,t.download="snapshot.png",t.click(),window.setTimeout(()=>document.body.removeChild(t),3e4)})}})}),R&&(0,a.jsx)("div",{children:(0,a.jsx)(s.L9n,{onClick:()=>{let e=z.current;e&&e.requestFullscreen()}})}),j&&(0,a.jsx)("div",{children:(0,a.jsx)(s.zgT,{onClick:()=>{let e=I.current,t=E.current;t&&e&&(e.cameraInitialState=t.camera.getCurrentState(),e.resetZoom())}})})]}),(0,a.jsxs)("div",{className:"IctJ7LNrbc0x_gIB",children:[(0,a.jsxs)("div",{ref:z,className:u,style:{width:T?h:b,height:T?b:h},children:[(0,a.jsx)("canvas",{className:d,ref:Y}),c&&(0,a.jsx)("canvas",{className:m,ref:H}),O&&(0,a.jsx)(l,{values:O,onChange:k}),P&&(0,a.jsx)("div",{className:g,children:P})]}),(0,a.jsx)("div",{className:s.Sxu.classNames.join("w7EXkaA82Y850o5V",F&&"c4TMDjqUWvQOmkt9"),children:(0,a.jsx)(o.A,{})}),C]})]})}async function f({glb:e,data:t,text:n,image:a}={}){let r={glb:{},data:{},text:{},image:{}},s=[];return a&&Object.keys(a).forEach(e=>{s.push(async()=>{let t=a[e];console.log("Loading image:",t);let n=await (0,i.tgdLoadImage)(t);n&&(r.image[e]=n)})}),e&&Object.keys(e).forEach(t=>{s.push(async()=>{let n=e[t];console.log("Loading GLB:",n);let a=await (0,i.tgdLoadGlb)(n);a&&(r.glb[t]=a)})}),t&&Object.keys(t).forEach(e=>{s.push(async()=>{let n=t[e],a=await (0,i.tgdLoadArrayBuffer)(n);a&&(r.data[e]=a)})}),n&&Object.keys(n).forEach(e=>{s.push(async()=>{let t=n[e],a=await (0,i.tgdLoadText)(t);a&&(r.text[e]=a)})}),await Promise.all(s.map(e=>e())),r}},1278(e,t,n){e.exports=n.p+"bin/suzanne.f1e9692cdd07ad81.glb"},1998(e,t,n){n.r(t),n.d(t,{default:()=>m});var a=n(4848),r=n(8453),s=n(2155),c=n(3172),l=n(1278);function i(){return(0,a.jsx)(c.A,{onReady:o,gizmo:!0})}function o(e){let t=new s.TgdCameraPerspective({transfo:{distance:5},far:100,near:.1,fovy:Math.PI/2,zoom:1});e.camera=t,t.transfo.orientation.face("+X+Y+Z"),t.transfo.setPosition(0,0,0),t.spaceHeightAtTarget=6,new s.TgdControllerCameraOrbit(e,{inertiaOrbit:900,geo:{lat:0,lng:0,minLat:(0,s.tgdCalcDegToRad)(-60),maxLat:(0,s.tgdCalcDegToRad)(60)}}),e.paint(),(async()=>{if(!await (0,s.tgdLoadGlb)(l))return;console.log("Suzanne has been loaded!");let t=new s.TgdPainterAxes(e,{scale:10}),n=new s.TgdPainterSegmentsData;for(let e=0;e<12;e++){let e=new s.TgdVec3(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize().scale((0,s.tgdCalcRandom)(1,3));n.add([0,0,0,.5],[e.x,e.y,e.z,(0,s.tgdCalcRandom)(0,.5)])}let a=new s.TgdPainterState(e,{depth:s.webglPresetDepth.less,cull:s.webglPresetCull.back,children:[new s.TgdPainterClear(e,{color:[.2,.1,0,1],depth:1}),t,new s.TgdPainterSegments(e,{dataset:n.makeDataset,roundness:4})]});e.add(a),e.paint(),document.addEventListener("keydown",t=>{let n=(0,s.tgdCalcDegToRad)(15),a=0,r=0;switch(t.key){case"0":e.camera.transfo.orientation.face("+X+Y+Z"),e.camera.zoom=1,e.camera.transfo.setPosition(0,0,0).setDistance(15);break;case".":e.camera.zoom=1;break;case"6":r=n;break;case"4":r=-n;break;case"8":a=-n;break;case"2":a=n;break;case" ":e.camera.transfo.debug("SPACE"),e.paint();return}e.camera.transfo.orbitAroundX(a),e.camera.transfo.orbitAroundY(r),e.camera.debug("Camera"),e.paint()})})()}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){var a;a=n[t],t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a})}return e}function d(e){var t=u({h1:"h1"},(0,r.R)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{children:"Test"}),"\n",(0,a.jsx)(i,{})]})}function m(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=u({},(0,r.R)(),n.components).wrapper;return s?(0,a.jsx)(s,(e=u({},n),t=t={children:(0,a.jsx)(d,u({},n))},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n.push.apply(n,a)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e)):d(n)}},8453(e,t,n){n.d(t,{R:()=>s});var a=n(6540);let r=a.createContext({});function s(e){let t=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}}}]);