"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([["3384"],{6969(e,n,t){t.r(n),t.d(n,{default:()=>x});var r=t(4848),i=t(8453),s=t(6540),o=t(6671),a=t(385),l=t(2155),c=t(3172),d=t(7276);function u(e){let n={strength:1},t=new l.TgdTexture2D(e).loadBitmap((0,l.tgdLoadImage)(d)),r=new l.TgdFilterBlur({size:32,direction:0}),i=new l.TgdFilterBlur({size:32,direction:90}),s=new l.TgdPainterFilter(e,{texture:t,filters:[r,i]});return e.add(s,new l.TgdPainterLogic(e=>{r.strength=n.strength,i.strength=n.strength})),e.play(),n}function g(){var e;let n,t=(e=u,(n=s.useRef({init:(t,r)=>{n.current.params=e(t,r)},params:void 0})).current),[i,a]=function(e,n,t){let[r,i]=s.useState(1);return s.useEffect(()=>{let{params:t}=e;t&&(t[n]=r)},[r]),[r,i]}(t,"strength",1);return(0,r.jsx)(c.A,{onReady:t.init,width:"512px",height:"512px",children:(0,r.jsx)(o.xZ7,{color:"primary-1",content:(0,r.jsxs)("div",{children:["Strength of the blur: ",(0,r.jsx)("b",{children:i.toFixed(2)})]}),children:(0,r.jsx)(o.BAW,{value:i,onChange:a,min:0,max:2,step:.05})})})}let h={"Detail #1":"    const params = { strength: 1 }\n    const texture = new TgdTexture2D(context).loadBitmap(\n        tgdLoadImage(BackgroundURL)\n    )\n    const size = 32\n    const horizontalBlurFilter = new TgdFilterBlur({\n        size,\n        direction: 0,\n    })\n    const verticalBlurFilter = new TgdFilterBlur({\n        size,\n        direction: 90,\n    })\n    const filter = new TgdPainterFilter(context, {\n        texture,\n        filters: [horizontalBlurFilter, verticalBlurFilter],\n    })\n    context.add(\n        filter,\n        new TgdPainterLogic((time) => {\n            horizontalBlurFilter.strength = params.strength\n            verticalBlurFilter.strength = params.strength\n        })\n    )\n    context.play()\n    return params"};function p(){let[e,n]=s.useState(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"half-left",children:(0,r.jsx)(g,{})}),(0,r.jsxs)("div",{className:"half-right",children:[(0,r.jsx)("div",{children:(0,r.jsx)(o.yQN,{variant:"elevated",onClick:()=>n(!e),children:e?"Show code details":"Show full code"})}),(0,r.jsx)(a.A,{language:"tsx",value:e?'import {\n    TgdContext,\n    TgdFilterBlur,\n    tgdLoadImage,\n    TgdPainterFilter,\n    TgdPainterLogic,\n    TgdTexture2D,\n} from "@tolokoban/tgd"\nimport { ViewSlider, ViewTooltip } from "@tolokoban/ui"\n\nimport View, { Assets } from "@/components/demo/Tgd"\n\nimport BackgroundURL from "../../../marylin.webp"\nimport React from "react"\n\nfunction init(context: TgdContext) {\n    const params = { strength: 1 }\n    const texture = new TgdTexture2D(context).loadBitmap(\n        tgdLoadImage(BackgroundURL)\n    )\n    const size = 32\n    const horizontalBlurFilter = new TgdFilterBlur({\n        size,\n        direction: 0,\n    })\n    const verticalBlurFilter = new TgdFilterBlur({\n        size,\n        direction: 90,\n    })\n    const filter = new TgdPainterFilter(context, {\n        texture,\n        filters: [horizontalBlurFilter, verticalBlurFilter],\n    })\n    context.add(\n        filter,\n        new TgdPainterLogic((time) => {\n            horizontalBlurFilter.strength = params.strength\n            verticalBlurFilter.strength = params.strength\n        })\n    )\n    context.play()\n    return params\n}\n\nexport default function Demo() {\n    const tgd = useTgd(init)\n    const [strength, setStrength] = useUniform(tgd, "strength", 1)\n\n    return (\n        <View onReady={tgd.init} width="512px" height="512px">\n            <ViewTooltip\n                color="primary-1"\n                content={\n                    <div>\n                        Strength of the blur: <b>{strength.toFixed(2)}</b>\n                    </div>\n                }\n            >\n                <ViewSlider\n                    value={strength}\n                    onChange={setStrength}\n                    min={0}\n                    max={2}\n                    step={0.05}\n                />\n            </ViewTooltip>\n        </View>\n    )\n}\n\nfunction useTgd<T extends { [key: string]: number }>(\n    init: (context: TgdContext, assets: Assets) => T\n) {\n    const ref = React.useRef<{\n        init: (context: TgdContext, assets: Assets) => void\n        params: T | undefined\n    }>({\n        init: (context: TgdContext, assets: Assets) => {\n            ref.current.params = init(context, assets)\n        },\n        params: undefined,\n    })\n    return ref.current\n}\n\nfunction useUniform<T extends Record<string, number>, S extends keyof T>(\n    tgd: {\n        init: (context: TgdContext, assets: Assets) => void\n        params: T | undefined\n    },\n    param: S,\n    initialValue: number\n): [value: number, setValue: (value: number) => void] {\n    const [value, setValue] = React.useState(initialValue)\n    React.useEffect(() => {\n        const { params } = tgd\n        if (!params) return\n        ;(params as Record<S, number>)[param] = value\n    }, [value])\n    return [value, setValue]\n}\n':h})]})]})}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){var r;r=t[n],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return e}function m(e){var n=f({a:"a",h1:"h1",h2:"h2",p:"p"},(0,i.R)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{children:(0,r.jsx)(n.a,{href:"docs/classes/TgdPainterFilter.html",children:"TgdPainterFilter"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"#..",children:"Back to the list of available filters"})}),"\n",(0,r.jsx)(n.h2,{children:(0,r.jsx)(n.a,{href:"docs/classes/TgdFilterBlur.html",children:"TgdFilterBlur"})}),"\n",(0,r.jsx)(n.p,{children:"Horizontal and vertical blur of 16px."}),"\n",(0,r.jsx)(p,{})]})}function x(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=f({},(0,i.R)(),t.components).wrapper;return s?(0,r.jsx)(s,(e=f({},t),n=n={children:(0,r.jsx)(m,f({},t))},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):(function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t})(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e)):m(t)}}}]);