"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[4912],{4912:(n,t,e)=>{e.r(t),e.d(t,{default:()=>p});var i=e(4848),a=e(8453),o=e(6540),s=e(5968),c=e(2212),r=e(4461),l=e(6989);function u(n){n.camera.transfo.distance=10;const t=new r.g6h(n,{transfo:{position:[-1,-1,0]}});n.add(new r.o57(n,{color:[.4,.2,0,1]}),new r.Ipk(n,{depth:r.Eg5.lessOrEqual,children:[t,new r.g6h(n,{material:new r.M3Z({color:[.5,.5,.5,1]}),transfo:{position:[0,0,-.1]}})]}));const e={duration:1,easingFunction:r.Wcc,action(n){t.transfo.setPosition(-1,2*n-1,0)}},i={duration:1,easingFunction:r.Wcc,action(n){t.transfo.setPosition(2*n-1,1,0)}},a={duration:1,easingFunction:r.Wcc,action(n){t.transfo.setPosition(1,1-2*n,0)}},o={duration:1,easingFunction:r.Wcc,action(n){t.transfo.setPosition(1-2*n,-1,0)}};n.animSchedule((0,r._b$)([e,i,a,o],{repeat:1/0})),n.animSchedule((0,r._b$)([{duration:.5,action(n){t.transfo.setScale(1-.5*n)}},{duration:.5,action(n){t.transfo.setScale(1-.5*(1-n))}}],{repeat:1/0})),n.paint()}function d(){return(0,i.jsx)(l.A,{onReady:u})}const h={"Detail #1":"    ctx.camera.transfo.distance = 10\n    const cube = new TgdPainterMesh(ctx, { transfo: { position: [-1, -1, 0] } })\n    ctx.add(\n        new TgdPainterClear(ctx, { color: [0.4, 0.2, 0, 1] }),\n        new TgdPainterState(ctx, {\n            depth: webglPresetDepth.lessOrEqual,\n            children: [\n                cube,\n                new TgdPainterMesh(ctx, {\n                    material: new TgdMaterialSolid({\n                        color: [0.5, 0.5, 0.5, 1],\n                    }),\n                    transfo: { position: [0, 0, -0.1] },\n                }),\n            ],\n        })\n    )\n    const anim1: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(-1, t * 2 - 1, 0)\n        },\n    }\n    const anim2: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(t * 2 - 1, 1, 0)\n        },\n    }\n    const anim3: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(+1, 1 - t * 2, 0)\n        },\n    }\n    const anim4: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(1 - t * 2, -1, 0)\n        },\n    }\n    ctx.animSchedule(\n        tgdAnimChain([anim1, anim2, anim3, anim4], {\n            repeat: Infinity,\n        })\n    )\n    ctx.animSchedule(\n        tgdAnimChain(\n            [\n                {\n                    duration: 0.5,\n                    action(t) {\n                        cube.transfo.setScale(1 - t * 0.5)\n                    },\n                },\n                {\n                    duration: 0.5,\n                    action(t) {\n                        cube.transfo.setScale(1 - (1 - t) * 0.5)\n                    },\n                },\n            ],\n            { repeat: Infinity }\n        )\n    )\n    ctx.paint()"},g='import {\n    TgdAnimation,\n    tgdAnimChain,\n    TgdContext,\n    tgdEasingFunctionInOutCubic,\n    TgdMaterialSolid,\n    TgdPainterClear,\n    TgdPainterMesh,\n    TgdPainterState,\n    webglPresetDepth,\n} from "@tolokoban/tgd"\nimport View from "@/components/demo/Tgd"\n\nfunction init(ctx: TgdContext) {\n    ctx.camera.transfo.distance = 10\n    const cube = new TgdPainterMesh(ctx, { transfo: { position: [-1, -1, 0] } })\n    ctx.add(\n        new TgdPainterClear(ctx, { color: [0.4, 0.2, 0, 1] }),\n        new TgdPainterState(ctx, {\n            depth: webglPresetDepth.lessOrEqual,\n            children: [\n                cube,\n                new TgdPainterMesh(ctx, {\n                    material: new TgdMaterialSolid({\n                        color: [0.5, 0.5, 0.5, 1],\n                    }),\n                    transfo: { position: [0, 0, -0.1] },\n                }),\n            ],\n        })\n    )\n    const anim1: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(-1, t * 2 - 1, 0)\n        },\n    }\n    const anim2: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(t * 2 - 1, 1, 0)\n        },\n    }\n    const anim3: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(+1, 1 - t * 2, 0)\n        },\n    }\n    const anim4: TgdAnimation = {\n        duration: 1,\n        easingFunction: tgdEasingFunctionInOutCubic,\n        action(t) {\n            cube.transfo.setPosition(1 - t * 2, -1, 0)\n        },\n    }\n    ctx.animSchedule(\n        tgdAnimChain([anim1, anim2, anim3, anim4], {\n            repeat: Infinity,\n        })\n    )\n    ctx.animSchedule(\n        tgdAnimChain(\n            [\n                {\n                    duration: 0.5,\n                    action(t) {\n                        cube.transfo.setScale(1 - t * 0.5)\n                    },\n                },\n                {\n                    duration: 0.5,\n                    action(t) {\n                        cube.transfo.setScale(1 - (1 - t) * 0.5)\n                    },\n                },\n            ],\n            { repeat: Infinity }\n        )\n    )\n    ctx.paint()\n}\n\nexport default function Demo() {\n    return <View onReady={init} />\n}\n';function m(){const[n,t]=o.useState(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"half-left",children:(0,i.jsx)(d,{})}),(0,i.jsxs)("div",{className:"half-right",children:[(0,i.jsx)("div",{children:(0,i.jsx)(s.yQN,{variant:"elevated",onClick:()=>t(!n),children:n?"Show code details":"Show full code"})}),(0,i.jsx)(c.A,{language:"tsx",value:n?g:h})]})]})}function f(n){const t={a:"a",p:"p",...(0,a.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["You can chain animations with this utility:\n",(0,i.jsx)(t.a,{href:"docs/classes/tgdAnimChain.html",children:"tgdAnimChain"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"In this example, we start two chains in parallel: one for the translations, one\nfor the scales."}),"\n",(0,i.jsx)(m,{})]})}function p(n={}){const{wrapper:t}={...(0,a.R)(),...n.components};return t?(0,i.jsx)(t,{...n,children:(0,i.jsx)(f,{...n})}):f(n)}},3469:(n,t,e)=>{e.d(t,{A:()=>c});var i=e(1601),a=e.n(i),o=e(6314),s=e.n(o)()(a());s.push([n.id,".hgIjhDQIuBCJEQ4ZgLXp {\n    display: inline-block;\n    margin: 1em;\n}\n\n.hgIjhDQIuBCJEQ4ZgLXp canvas {\n    box-shadow: 0 0.25em 0.5em #fff1;\n    max-width: 100vw;\n    max-height: 100vh;\n}\n\n.efOyHCihw9wfMB6AaAqw {\n    position: relative;\n}\n\n.ywC8N0Uxbvm2Ug2DwPkE {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    background-color: var(--theme-color-primary-1);\n    opacity: 0;\n    transition: opacity 0.3s;\n}\n\n.ywC8N0Uxbvm2Ug2DwPkE.PBWSRsbiwEqGpeL0hEfm {\n    opacity: 1;\n}\n\n.BErChOLWGtciKhh3IFud {\n    position: relative;    \n}\n\n.BErChOLWGtciKhh3IFud > canvas.fT7FcYouYlPbElIAEXRP {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}\n\n.BErChOLWGtciKhh3IFud > canvas.uAPfWt_Dhe7RaRrnmIu0 {\n    position: absolute;\n    right: 0;\n    top: 0;\n    width: 128px;\n    height: 128px;\n    box-shadow: none;\n    border: none;\n}",""]),s.locals={Tgd:"hgIjhDQIuBCJEQ4ZgLXp",relative:"efOyHCihw9wfMB6AaAqw",overlay:"ywC8N0Uxbvm2Ug2DwPkE",loading:"PBWSRsbiwEqGpeL0hEfm",screen:"BErChOLWGtciKhh3IFud",canvas:"fT7FcYouYlPbElIAEXRP",gizmo:"uAPfWt_Dhe7RaRrnmIu0"};const c=s},6989:(n,t,e)=>{e.d(t,{A:()=>P});var i=e(4848),a=e(6540),o=e(4461),s=e(5968),c=e(5670),r=e(5072),l=e.n(r),u=e(7825),d=e.n(u),h=e(7659),g=e.n(h),m=e(5056),f=e.n(m),p=e(540),x=e.n(p),b=e(1113),w=e.n(b),v=e(3469),C={};C.styleTagTransform=w(),C.setAttributes=f(),C.insert=g().bind(null,"head"),C.domAPI=d(),C.insertStyleElement=x(),l()(v.A,C);const y=v.A&&v.A.locals?v.A.locals:void 0;function P({className:n,options:t,onReady:e,gizmo:r=!1,width:l="640px",height:u="480px",noBorder:d=!1,assets:h,children:g}){const[m,f]=a.useState(!0),[p,x]=a.useState(!1),b=a.useRef(null),w=a.useRef(null),v=a.useRef(null),C=a.useRef(null),[P,j]=a.useState(!0);let E="auto";l.endsWith("px")&&u.endsWith("px")&&(l.substring(l.length-2),u.substring(u.length-2));const F=n=>{if(!n)return;if(w.current)return;w.current=n;const i=new o.tfp(n,t);b.current=i,j(!0),async function({glb:n,data:t,text:e,image:i}={}){console.log("ðŸš€ [Tgd] glb, data, text, image = ",n,t,e,i);const a={glb:{},data:{},text:{},image:{}},s=[];return i&&Object.keys(i).forEach((n=>{s.push((async()=>{const t=i[n];console.log("Loading image:",t);const e=await(0,o.V_9)(t);e&&(a.image[n]=e)}))})),n&&Object.keys(n).forEach((t=>{s.push((async()=>{const e=n[t];console.log("Loading GLB:",e);const i=await(0,o.TCe)(e);i&&(a.glb[t]=i)}))})),t&&Object.keys(t).forEach((n=>{s.push((async()=>{const e=t[n],i=await(0,o.vSU)(e);i&&(a.data[n]=i)}))})),e&&Object.keys(e).forEach((n=>{s.push((async()=>{const t=e[n],i=await(0,o.jWq)(t);i&&(a.text[n]=i)}))})),await Promise.all(s.map((n=>n()))),a}(h).then((n=>{console.log("Ready!"),e(i,n),i.paint(),j(!1)})).catch((n=>{console.error("Unable to initialize the scene!",n),j(!1)}));const a=v.current;a&&a.attachContext(i)},A=n=>{const t=new o.GbF({canvas:n});v.current=t,t.eventTipClick.addListener((({to:n})=>{const t=b.current;console.log("ðŸš€ [tgd] to, context =",n,t),t&&t.animSchedule({duration:.2,easingFunction:o.Wcc,action:(0,o.vRM)(t.camera,{orientation:n})})}));const e=b.current;e&&t.attachContext(e)};return a.useEffect((()=>{const n=w.current,t=b.current;if(!n||!t)return;const e=new ResizeObserver((()=>t.paint()));return e.observe(n),n.requestFullscreen||(n.requestFullscreen=n.webkitRequestFullscreen),x(Boolean(n.requestFullscreen)),()=>e.unobserve(n)}),[b.current,w.current]),d?(0,i.jsxs)("div",{ref:C,className:y.screen,style:{width:m?l:u,height:m?u:l},children:[(0,i.jsx)("canvas",{className:y.canvas,ref:F}),r&&(0,i.jsx)("canvas",{className:y.gizmo,ref:A})]}):(0,i.jsxs)("div",{className:s.Sxu.classNames.join(n,y.Tgd),children:[(0,i.jsxs)(s.sWC,{display:"flex",justifyContent:"space-between",children:[(0,i.jsx)(s.yQN,{variant:"elevated",onClick:()=>f(!m),enabled:!P,children:m?"Switch to Portrait":"Switch to Landscape"}),p&&(0,i.jsx)(s.yQN,{variant:"elevated",onClick:()=>{const n=C.current;n&&n.requestFullscreen()},enabled:!P,children:"Fullscreen"})]}),(0,i.jsxs)("div",{className:y.relative,children:[(0,i.jsxs)("div",{ref:C,className:y.screen,style:{width:m?l:u,height:m?u:l},children:[(0,i.jsx)("canvas",{className:y.canvas,ref:F}),r&&(0,i.jsx)("canvas",{className:y.gizmo,ref:A})]}),(0,i.jsx)("div",{className:s.Sxu.classNames.join(y.overlay,P&&y.loading),children:(0,i.jsx)(c.A,{})}),g]})]})}},8453:(n,t,e)=>{e.d(t,{R:()=>o});var i=e(6540);const a=i.createContext({});function o(n){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}}}]);