"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[1710],{1710:(t,e,r)=>{r.r(e),r.d(e,{default:()=>j});var n=r(4848),a=r(6540),o=r(7289),i=r(7402),s=r(1151);const c=new Uint8Array([0,1,0,2,0,4,1,3,1,5,2,3,2,6,3,7,4,5,4,6,5,7,6,7]),l=-1,u=new Float32Array([l,l,l,l,l,1,l,1,l,l,1,1,1,l,l,1,l,1,1,1,l,1,1,1]),d=[];for(let t=0;t<c.length;t+=2){const e=3*c[t],r=3*c[t+1],n=.5*(u[e+0]+u[r+0]),a=.5*(u[e+1]+u[r+1]),o=.5*(u[e+2]+u[r+2]);d.push(n,a,o)}const h=new Float32Array(d);function g(t){const e=[];for(const r of t.trim().toUpperCase())r<"A"||r>"L"||e.push(r.charCodeAt(0)-"A".charCodeAt(0));return e}function f(t){const e=[];for(let r=0;r<8;r++){const n=1<<r;e.push(t&n?1:0)}return e}class m extends s.TgdPainter{constructor(t){super(),this.context=t,this.dataset=this.createDataset(),this.program=this.createProgram();const e=c;this.vao=new s.TgdVertexArray(t.gl,this.program,[this.dataset],e)}delete(){this.program.delete(),this.vao.delete()}paint(){const{context:t,program:e,vao:r}=this,{gl:n,camera:a}=t;e.use(),e.uniformMatrix4fv("uniModelViewMatrix",a.matrixModelView),e.uniformMatrix4fv("uniProjectionMatrix",a.matrixProjection),r.bind(),n.drawElements(n.LINES,24,n.UNSIGNED_BYTE,0),r.unbind()}createDataset(){const t=new s.TgdDataset({attPoint:"vec3"});return t.set("attPoint",u),t}createProgram(){const t=new s.TgdShaderVertex({uniforms:{uniModelViewMatrix:"mat4",uniProjectionMatrix:"mat4"},attributes:{attPoint:"vec4"},varying:{varColor:"vec3"},mainCode:["varColor = abs(attPoint.xyz);","gl_Position = uniProjectionMatrix * uniModelViewMatrix * attPoint;"]}).code,e=new s.TgdShaderFragment({uniforms:{uniTexture:"sampler2D"},varying:{varColor:"vec3"},outputs:{FragColor:"vec4"},mainCode:["FragColor = vec4(varColor, 1.0);"]}).code;return new s.TgdProgram(this.context.gl,{vert:t,frag:e})}}class x extends s.TgdPainter{constructor(t){super(),this.context=t,this._caseNumber=0,this.dataset=this.createDataset(),this.program=this.createProgram(),this.vao=new s.TgdVertexArray(t.gl,this.program,[this.dataset]),this.texture=this.createTexture()}get caseNumber(){return this._caseNumber}set caseNumber(t){if(t===this._caseNumber)return;this._caseNumber=t;const e=f(t),r=[];for(let t=0;t<12;t++){const n=e[c[2*t]],a=e[c[2*t+1]];r.push(n===a?0:1)}this.dataset.set("attVisible",new Float32Array(r)),this.vao.updateDataset(this.dataset),this.context.paint()}delete(){this.texture.delete(),this.program.delete(),this.vao.delete()}paint(){const{context:t,program:e,vao:r,texture:n}=this,{gl:a,camera:o}=t;e.use(),n.activate(0,e,"uniTexture"),e.uniform1f("uniHalfScreenHeightInPixels",.5*t.height),e.uniformMatrix4fv("uniModelViewMatrix",o.matrixModelView),e.uniformMatrix4fv("uniProjectionMatrix",o.matrixProjection),r.bind(),a.drawArrays(a.POINTS,0,12),r.unbind()}createDataset(){const t=new s.TgdDataset({attPoint:"vec3",attVisible:"float"});return t.set("attPoint",h),t}createProgram(){const t=new s.TgdShaderVertex({uniforms:{uniModelViewMatrix:"mat4",uniProjectionMatrix:"mat4",uniHalfScreenHeightInPixels:"float"},attributes:{attPoint:"vec4",attVisible:"float"},varying:{varU:"float"},mainCode:["varU = float(gl_VertexID) / 12.0;","gl_Position = uniProjectionMatrix * uniModelViewMatrix * attPoint;","gl_PointSize = 0.2 * uniHalfScreenHeightInPixels / gl_Position.w;","gl_PointSize *= attVisible;"]}).code,e=new s.TgdShaderFragment({uniforms:{uniTexture:"sampler2D"},varying:{varU:"float"},outputs:{FragColor:"vec4"},mainCode:["vec2 uv = vec2(varU, 0.0) + gl_PointCoord.xy * vec2(1.0 / 12.0, 1.0);","FragColor = texture(uniTexture, uv);","if (FragColor.a < .1) discard;"]}).code;return new s.TgdProgram(this.context.gl,{vert:t,frag:e})}createTexture(){const t=new s.TgdTexture2D(this.context);t.setParams({magFilter:"LINEAR",minFilter:"LINEAR"});const{ctx:e,canvas:r}=(0,s.tgdCanvasCreateWithContext2D)(768,64);e.font="bold 64px sans-serif",e.textAlign="center",e.textBaseline="middle",e.fillStyle="#0f0";for(let t=0;t<12;t++){const r="ABCDEFGHIJKL".charAt(t),n=(t+.5)/12,a=.5;e.fillText(r,768*n,64*a)}return t.loadBitmap(r),t}}class p extends s.TgdPainter{constructor(t){super(),this.context=t,this._caseNumber=-1,this.dataset=this.createDataset(),this.program=this.createProgram(),this.vao=new s.TgdVertexArray(t.gl,this.program,[this.dataset]),this.texture=this.createTexture(),this.caseNumber=0}get caseNumber(){return this._caseNumber}set caseNumber(t){if(t===this._caseNumber)return;this._caseNumber=t;const e=f(t);this.dataset.set("attColor",new Float32Array(e)),this.vao.updateDataset(this.dataset),this.context.paint()}delete(){this.texture.delete(),this.program.delete(),this.vao.delete()}paint(){const{context:t,program:e,vao:r,texture:n}=this,{gl:a,camera:o}=t;e.use(),n.activate(0,e,"uniTexture"),e.uniform1f("uniHalfScreenHeightInPixels",.5*t.height),e.uniformMatrix4fv("uniModelViewMatrix",o.matrixModelView),e.uniformMatrix4fv("uniProjectionMatrix",o.matrixProjection),r.bind(),a.drawArrays(a.POINTS,0,8),r.unbind()}createDataset(){const t=new s.TgdDataset({attPoint:"vec3",attColor:"float"});return t.set("attPoint",u),t.set("attColor",new Float32Array(u.length)),t}createProgram(){const t=new s.TgdShaderVertex({uniforms:{uniModelViewMatrix:"mat4",uniProjectionMatrix:"mat4",uniHalfScreenHeightInPixels:"float"},attributes:{attPoint:"vec4",attColor:"float"},varying:{varColor:"float"},mainCode:["varColor = attColor;","gl_Position = uniProjectionMatrix * uniModelViewMatrix * attPoint;","gl_PointSize = 0.2 * uniHalfScreenHeightInPixels / gl_Position.w;"]}).code,e=new s.TgdShaderFragment({uniforms:{uniTexture:"sampler2D"},varying:{varColor:"float"},outputs:{FragColor:"vec4"},mainCode:["vec2 pos = 2.0 * (gl_PointCoord.xy - vec2(.5));","float radius = dot(pos, pos);","if (radius > 1.0) discard;","vec2 uv = vec2(varColor, .5);","FragColor = texture(uniTexture, uv);"]}).code;return new s.TgdProgram(this.context.gl,{vert:t,frag:e})}createTexture(){const t=new s.TgdTexture2D(this.context);return t.setParams({magFilter:"NEAREST",minFilter:"NEAREST",wrapS:"CLAMP_TO_EDGE",wrapT:"CLAMP_TO_EDGE"}),t.loadBitmap((0,s.tgdCanvasCreatePalette)(["#07f","#f00"])),t}}class v extends s.TgdPainter{constructor(t){super(),this.context=t,this.elementsCount=0,this._triangles="",this.dataset=this.createDataset(),this.program=this.createProgram();const e=new Uint8Array;this.vao=new s.TgdVertexArray(t.gl,this.program,[this.dataset],e)}set triangles(t){const e=g(t);this.vao.updateElements(e),this.elementsCount=e.length,this.context.paint()}delete(){this.program.delete(),this.vao.delete()}paint(){const{context:t,program:e,vao:r,elementsCount:n}=this,{gl:a,camera:o}=t;e.use(),e.uniformMatrix4fv("uniModelViewMatrix",o.matrixModelView),e.uniformMatrix4fv("uniProjectionMatrix",o.matrixProjection),r.bind(),a.drawElements(a.TRIANGLES,n,a.UNSIGNED_BYTE,0),r.unbind()}createDataset(){const t=new s.TgdDataset({attPoint:"vec3"});return t.set("attPoint",h),t}createProgram(){const t=new s.TgdShaderVertex({uniforms:{uniModelViewMatrix:"mat4",uniProjectionMatrix:"mat4",uniLight:"float"},attributes:{attPoint:"vec4"},mainCode:["gl_Position = uniProjectionMatrix * uniModelViewMatrix * attPoint;"]}).code,e=new s.TgdShaderFragment({uniforms:{uniTexture:"sampler2D"},outputs:{FragColor:"vec4"},mainCode:["float a = 1.0;","FragColor = vec4(","  .8 * (gl_FrontFacing ? vec3(0, .5, 1) : vec3(1, 0, 0)),","  a",");"]}).code;return new s.TgdProgram(this.context.gl,{vert:t,frag:e})}}class w extends s.TgdPainter{constructor(t){super(),this.context=t,this.elementsCount=0,this.dataset=this.createDataset(),this.program=this.createProgram();const e=new Uint8Array;this.vao=new s.TgdVertexArray(t.gl,this.program,[this.dataset],e)}set triangles(t){const e=g(t),r=[];for(let t=0;t<e.length;t+=3){const n=e[t],a=e[t+1],o=e[t+2];r.push(n,a,o,n)}this.vao.updateElements(r),this.elementsCount=r.length,this.context.paint()}delete(){this.program.delete(),this.vao.delete()}paint(){const{context:t,program:e,vao:r,elementsCount:n}=this,{gl:a,camera:o}=t;e.use(),e.uniformMatrix4fv("uniModelViewMatrix",o.matrixModelView),e.uniformMatrix4fv("uniProjectionMatrix",o.matrixProjection),r.bind(),a.drawElements(a.LINES,n,a.UNSIGNED_BYTE,0),r.unbind()}createDataset(){const t=new s.TgdDataset({attPoint:"vec3"});return t.set("attPoint",h),t}createProgram(){const t=new s.TgdShaderVertex({uniforms:{uniModelViewMatrix:"mat4",uniProjectionMatrix:"mat4",uniLight:"float"},attributes:{attPoint:"vec4"},mainCode:["gl_Position = uniProjectionMatrix * ","  (uniModelViewMatrix * attPoint + vec4(0, 0, 0.02, 0));"]}).code,e=new s.TgdShaderFragment({uniforms:{uniTexture:"sampler2D"},outputs:{FragColor:"vec4"},mainCode:["FragColor = vec4(0,0,0,1);"]}).code;return new s.TgdProgram(this.context.gl,{vert:t,frag:e})}}class b{constructor(){this._context=null,this.midPointsPainter=null,this.cornersPainter=null,this.trianglesPainter=null,this.wireframePainter=null}set context(t){const{camera:e}=t;e instanceof s.TgdCameraPerspective&&(e.fovy=(0,s.tgdCalcDegToRad)(90),e.transfo.distance=3),new s.TgdControllerCameraOrbit(t,{inertiaOrbit:1e3}),this._context&&this._context.delete(),this._context=t;const r=new s.TgdPainterClear(t,{color:[0,0,0,1],depth:1}),n=new s.TgdPainterState(t,{depth:s.webglPresetDepth.less,cull:s.webglPresetCull.off}),a=new w(t);this.wireframePainter=a;const o=new x(t);this.midPointsPainter=o;const i=new p(t);this.cornersPainter=i;const c=new v(t);this.trianglesPainter=c,n.add(new m(t),a,new s.TgdPainterState(t,{blend:s.webglPresetBlend.premultipliedAlpha,children:[o,i,c]})),t.add(r,n),t.paint()}set caseNumber(t){const{cornersPainter:e,midPointsPainter:r}=this;e&&(e.caseNumber=t),r&&(r.caseNumber=t)}get caseNumber(){return this.cornersPainter?.caseNumber??0}set triangles(t){const{trianglesPainter:e,wireframePainter:r}=this;e&&(e.triangles=t),r&&(r.triangles=t)}}var P=r(2197);const C={flex1:"Uy8T6WEsJrgBv6l3yOc5"},y=(0,s.tgdDataMarchingCubesConfigurations)().map((t=>t.map((t=>"ABCDEFGHIJKL".charAt(t))).join("")));function j(){const[t,e]=(0,i.Vcb)(0,"volume-to-mesh/caseNumber",(t=>(0,s.tgdCalcClamp)(Math.floor((0,P.GB)(t,0)),0,255))),[r,c]=a.useState(""),l=`volume-to-mesh/triangles/${t}`;a.useEffect((()=>{c(globalThis.localStorage.getItem(l)??y[t]),u.caseNumber=t}),[t]),a.useEffect((()=>{globalThis.localStorage.setItem(l,r.trim().toUpperCase()),u.triangles=r}),[r]);const u=function(){const t=a.useRef(null);return t.current||(t.current=new b),t.current}();return(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"Marching cubes"}),(0,n.jsxs)("p",{children:[(0,n.jsx)("a",{href:"https://en.wikipedia.org/wiki/Marching_cubes",children:"Marching cubes"})," ","is a technique to generate meshes from a volume.",(0,n.jsx)("br",{}),"A volume is a function that tells you, for each point in a box, it you are inside or outside an object."]}),(0,n.jsxs)("p",{children:["A voxel is a unit cube. Each corner of a voxel is either inside the volume (",(0,n.jsx)("b",{children:"red"}),") or outside (",(0,n.jsx)("b",{children:"blue"}),"). With triangles, touching the edges of the voxel, we need to separate the space between red and blue corners."]}),(0,n.jsx)("p",{children:"A voxel has 8 corners, so we have 256 configurations."}),(0,n.jsx)(o.A,{onReady:t=>u.context=t}),(0,n.jsx)(i.BAW,{className:C.flex1,wide:!0,text:`${t}`,value:t,onChange:e,min:0,max:255,step:1}),(0,n.jsx)("br",{}),(0,n.jsxs)(i.sWC,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsxs)(i.sWC,{display:"flex",alignItems:"center",fullwidth:!0,gap:"M",children:[(0,n.jsx)(i.Hqg,{label:"Triangles (from mid points ABCDEFGHIJKL)",value:r,onChange:c}),(0,n.jsx)(i.qxP,{icon:i.Gk,onClick:()=>{e(t+255&255)}}),(0,n.jsx)(i.qxP,{icon:i.hIg,onClick:()=>{e(t+1&255)}})]}),(0,n.jsx)(i.yQN,{onClick:T,icon:i.Pwl,children:"Reset"})]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("details",{children:[(0,n.jsx)("summary",{children:"List of triangles per configuration"}),(0,n.jsx)("pre",{children:E()})]})]})}function T(){const t=(0,s.tgdDataMarchingCubesConfigurations)();for(let e=0;e<t.length;e++){const r=t[e].map((t=>"ABCDEFGHIJKL".charAt(t))).join("");globalThis.localStorage.setItem(`volume-to-mesh/triangles/${e}`,r)}location.reload()}function E(){const t=[];for(let e=0;e<256;e++){const r=globalThis.localStorage.getItem(`volume-to-mesh/triangles/${e}`)??"?";if("?"===r)t.push("[ /* N/A /* ],");else{const e=g(r);t.push(`${JSON.stringify(e)},`)}}return t.join("\n")}},2197:(t,e,r)=>{function n(t){return!!t&&!Array.isArray(t)&&"object"==typeof t}function a(t){return"number"==typeof t}function o(t,e,r=null){try{return i(t,e),!0}catch(e){return r&&(console.error("[Invalid type]",r),console.error(t),console.debug(e)),!1}}function i(t,e,r="data"){if("function"==typeof e)return i(t,e(),r);if("unknown"===e)return;if("null"===e){if(null!==t)throw console.log("🚀 [index] data = ",t,typeof t),Error(`Expected ${r} to be a null and not a ${l(t)}!`);return}if("string"==typeof e){if(typeof t!==e)throw Error(`Expected ${r} to be a ${e} and not a ${l(t)}!`);return}if(Array.isArray(e)){const[o]=e;switch(o){case"array":return void function(t,e,r){if(!Array.isArray(t))throw Error(`Expected ${e} to be an array and not a ${l(t)}!`);const[,n,o]=r;if(o){const r=t.length;if(a(o)){if(r!==o)throw Error(`Expected ${e}'s length to be ${o} and not ${r}!`)}else{const{min:t,max:n}=o;if(a(t)&&r<t)throw Error(`Expected ${e}'s MIN length to be ${t} and not ${r}!`);if(a(n)&&r>n)throw Error(`Expected ${e}'s MAX length to be ${n} and not ${r}!`)}}for(let r=0;r<t.length;r+=1)i(t[r],n,`${e}[${r}]`)}(t,r,e);case"map":return void function(t,e,r){if(!n(t))throw Error(`Expected ${e} to be an object and not a ${l(t)}!`);const[,a]=r;for(const r of Object.keys(t))"string"==typeof r&&i(t[r],a,`${e}[${r}]`)}(t,r,e);case"?":return void function(t,e,r){if(void 0===t)return;const[,n]=r;i(t,n,e)}(t,r,e);case"|":return void function(t,e,r){const[,...n]=r;if(0===n.length)throw Error(`No type has been defined for this alternative: ${JSON.stringify(r)}!`);const a=[];for(const r of n)try{return void i(t,r,e)}catch(t){t instanceof Error&&a.push(t)}throw new Error(`All alternatives failed!${a.map((t=>`\n${t.message}`))}`)}(t,r,e);case"tuple":return void s(t,r,e);case"tuple...":return void function(t,e,[,...r]){const n=r.length-1;s(t,e,["tuple",...r.slice(0,n)]);const a=r[n];for(let r=n;r<t.length;r++)i(t[r],a,`${e}[${r}]`)}(t,r,e);case"partial":return void function(t,e,[,r]){!function(t,e="data"){if(!n(t))throw Error(`${e} was expected to be an object but we got ${typeof t}!`)}(t,e);for(const n of Object.keys(r)){if("string"!=typeof n)continue;const a=t[n];void 0!==a&&i(a,r[n],`${e}.${n}`)}}(t,r,e);case"literal":return void function(t,e,r){const[,...n]=r;for(const e of n)if(t===e)return;throw Error(`Expected ${e} to be a literal (${n.map((t=>`"${t}"`)).join(" | ")}) and not a ${l(t)}!`)}(t,r,e);case"custom":return void function(t,e,[,r]){if(!r(t))throw Error(`Expected ${r.name}(${e}) to return true!`)}(t,r,e);default:throw Error(`Don't know how to create a type guard for this kind of type: ${JSON.stringify(e)}`)}}if("object"!=typeof t)throw Error(`Expected ${r} to be an object and not a ${l(t)}!`);const o=t;for(const t of Object.keys(e))"string"==typeof t&&i(o[t],e[t],`${r}.${t}`)}function s(t,e,[,...r]){if(function(t,e="data"){if(!Array.isArray(t))throw Error(`${e} was expected to be an Array but we got ${typeof t}!`)}(t),r.length>t.length)throw Error(`Expected ${e}'s length to be at least ${r.length} and not ${t.length}!`);for(let n=0;n<r.length;n++){const a=r[n];i(t[n],a,`${e}[${n}]`)}}function c(t,e){return function(t,e,r){return o(t,e)?t:o(r,e)?r:r(t)}(t,"number",e)}function l(t){var e;return null===t?"null":"function"==typeof t?`function ${null!==(e=t.name)&&void 0!==e?e:""}()`:typeof t}r.d(e,{Et:()=>a,GB:()=>c,Xj:()=>o,j:()=>i})},7289:(t,e,r)=>{r.d(e,{A:()=>l});var n=r(4848),a=r(6540),o=r(1151),i=r(7402),s=r(3686);const c={Tgd:"hgIjhDQIuBCJEQ4ZgLXp",relative:"efOyHCihw9wfMB6AaAqw",overlay:"ywC8N0Uxbvm2Ug2DwPkE",loading:"PBWSRsbiwEqGpeL0hEfm",screen:"BErChOLWGtciKhh3IFud",canvas:"fT7FcYouYlPbElIAEXRP",gizmo:"uAPfWt_Dhe7RaRrnmIu0",actions:"Ia9jfUO3OevcIh2fV6R6",enabled:"dZYZScZBbWV2Pm3ftXcG"};function l({className:t,options:e,onReady:r,gizmo:l=!1,width:u="640px",height:d="480px",noBorder:h=!1,assets:g,children:f}){const[m,x]=a.useState(!0),[p,v]=a.useState(!1),w=a.useRef(null),b=a.useRef(null),P=a.useRef(null),C=a.useRef(null),[y,j]=a.useState(!0);let T="auto";u.endsWith("px")&&d.endsWith("px")&&(u.substring(u.length-2),d.substring(d.length-2));const E=t=>{if(!t)return;if(b.current)return;b.current=t;const n=new o.TgdContext(t,e),a=n.gl.getParameter(n.gl.DEPTH_BITS);console.log("Depht buffer bits:",a),w.current=n,j(!0),async function({glb:t,data:e,text:r,image:n}={}){console.log("🚀 [Tgd] glb, data, text, image = ",t,e,r,n);const a={glb:{},data:{},text:{},image:{}},i=[];return n&&Object.keys(n).forEach((t=>{i.push((async()=>{const e=n[t];console.log("Loading image:",e);const r=await(0,o.tgdLoadImage)(e);r&&(a.image[t]=r)}))})),t&&Object.keys(t).forEach((e=>{i.push((async()=>{const r=t[e];console.log("Loading GLB:",r);const n=await(0,o.tgdLoadGlb)(r);n&&(a.glb[e]=n)}))})),e&&Object.keys(e).forEach((t=>{i.push((async()=>{const r=e[t],n=await(0,o.tgdLoadArrayBuffer)(r);n&&(a.data[t]=n)}))})),r&&Object.keys(r).forEach((t=>{i.push((async()=>{const e=r[t],n=await(0,o.tgdLoadText)(e);n&&(a.text[t]=n)}))})),await Promise.all(i.map((t=>t()))),a}(g).then((t=>{console.log("Ready!"),r(n,t),n.paint(),j(!1)})).catch((t=>{console.error("Unable to initialize the scene!",t),j(!1)}));const i=P.current;i&&i.attachContext(n)},M=t=>{const e=new o.TgdCanvasGizmo({canvas:t});P.current=e,e.eventTipClick.addListener((({to:t})=>{const e=w.current;e&&e.animSchedule({duration:.2,easingFunction:o.tgdEasingFunctionInOutCubic,action:(0,o.tgdActionCreateCameraInterpolation)(e.camera,{orientation:t})})}));const r=w.current;r&&e.attachContext(r)};return a.useEffect((()=>{const t=b.current,e=w.current;if(!t||!e)return;const r=new ResizeObserver((()=>e.paint()));return r.observe(t),t.requestFullscreen||(t.requestFullscreen=t.webkitRequestFullscreen),v(Boolean(t.requestFullscreen)),()=>r.unobserve(t)}),[w.current,b.current]),h?(0,n.jsxs)("div",{ref:C,className:c.screen,style:{width:m?u:d,height:m?d:u},children:[(0,n.jsx)("canvas",{className:c.canvas,ref:E}),l&&(0,n.jsx)("canvas",{className:c.gizmo,ref:M})]}):(0,n.jsxs)("div",{className:i.Sxu.classNames.join(t,c.Tgd),children:[(0,n.jsxs)("div",{className:i.Sxu.classNames.join(c.actions,!y&&c.enabled),children:[(0,n.jsx)("div",{children:(0,n.jsx)(i.I64,{onClick:()=>x(!m)})}),(0,n.jsx)("div",{children:(0,n.jsx)(i.kRc,{onClick:()=>{const t=w.current;t&&t.takeSnapshot().then((t=>{const e=document.createElement("a");document.body.appendChild(e),e.style.display="none",e.href=t.src,e.download="snapshot.png",e.click(),window.setTimeout((()=>document.body.removeChild(e)),3e4)}))}})}),p&&(0,n.jsx)("div",{children:(0,n.jsx)(i.L9n,{onClick:()=>{const t=C.current;t&&t.requestFullscreen()}})})]}),(0,n.jsxs)("div",{className:c.relative,children:[(0,n.jsxs)("div",{ref:C,className:c.screen,style:{width:m?u:d,height:m?d:u},children:[(0,n.jsx)("canvas",{className:c.canvas,ref:E}),l&&(0,n.jsx)("canvas",{className:c.gizmo,ref:M})]}),(0,n.jsx)("div",{className:i.Sxu.classNames.join(c.overlay,y&&c.loading),children:(0,n.jsx)(s.A,{})}),f]})]})}}}]);