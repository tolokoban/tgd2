"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([[4487],{2858:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var r=n(4848),a=n(7402),i=n(3541),o=n(6069),s=n.n(o),l=n(8848),c=n.n(l);const u={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/g,lookbehind:!0,greedy:!0},{pattern:/"(^|[^\\:])\/\/.*"/g,lookbehind:!0,greedy:!0}],number:{pattern:/(^|[^\w$])(?:NaN|Infinity|0[bB][01]+(?:_[01]+)*n?|0[oO][0-7]+(?:_[0-7]+)*n?|0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?|\d+(?:_\d+)*n|(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?)(?![\w$])/,lookbehind:!0},type:d(["bvec2","bvec3","bvec4","dmat2","dmat2x2","dmat2x3","dmat2x4","dmat3","dmat3x2","dmat3x3","dmat3x4","dmat4","dmat4x2","dmat4x3","dmat4x4","dvec2","dvec3","dvec4","float","fvec2","fvec3","fvec4","isampler1D","isampler1DArray","isampler2D","isampler2DArray","isampler2DMS","isampler2DMSArray","isampler2DRect","isampler3D","isamplerBuffer","isamplerCube","isamplerCubeArray","ivec2","ivec3","ivec4","mat2","mat2x2","mat2x3","mat2x4","mat3","mat3x2","mat3x3","mat3x4","mat4","mat4x2","mat4x3","mat4x4","sample","sampler1D","sampler1DArray","sampler1DArrayShadow","sampler1DShadow","sampler2D","sampler2DArray","sampler2DArrayShadow","sampler2DMS","sampler2DMSArray","sampler2DRect","sampler2DRectShadow","sampler2DShadow","sampler3D","samplerBuffer","samplerCube","samplerCubeArray","samplerCubeArrayShadow","samplerCubeShadow","usampler1D","usampler1DArray","usampler2D","usampler2DArray","usampler2DMS","usampler2DMSArray","usampler2DRect","usampler3D","usamplerBuffer","usamplerCube","usamplerCubeArray","uvec2","uvec3","uvec4","vec2","vec3","vec4","void"]),keyword:d(["centroid","const","discard","else","flat","highp","if","in","inout","invariant","layout","lowp","mediump","noperspective","out","patch","precision","smooth","subroutine","uniform","active","asm","cast","class","common","enum","extern","external","filter","fixed","goto","half","hvec2","hvec3","hvec4","iimage1D","iimage1DArray","iimage2D","iimage2DArray","iimage3D","iimageBuffer","iimageCube","image1D","image1DArray","image1DArrayShadow","image1DShadow","image2D","image2DArray","image2DArrayShadow","image2DShadow","image3D","imageBuffer","imageCube","inline","input","interface","long","namespace","noinline","output","packed","partition","public","row_major","sampler3DRect","short","sizeof","static","superp","template","this","typedef","uimage1D","uimage1DArray","uimage2D","uimage2DArray","uimage3D","uimageBuffer","uimageCube","union","unsigned","using","volatile"]),global:d(["gl_DepthRange","gl_DepthRange.diff","gl_DepthRange.far","gl_DepthRange.near","gl_FragCoord","gl_FragDepth","gl_FrontFacing","gl_InstanceID","gl_PointCoord","gl_PointSize","gl_Position","gl_VertexID"]),function:d(["abs","acos","acosh","all","any","asin","asinh","atan","atanh","ceil","clamp","cos","cosh","cross","degrees","determinant","dFdx","dFdy","distance","dot","equal","exp","exp2","faceforward","floatBitsToInt","floatBitsToUint","floor","fract","fwidth","greaterThan","greaterThanEqual","intBitsToFloat","inverse","inversesqrt","isinf","isnan","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","modf","normalize","not","notEqual","outerProduct","packHalf2x16","packSnorm2x16","packUnorm2x16","pow","radians","reflect","refract","round","roundEven","sign","sin","sinh","smoothstep","sqrt","step","tan","tanh","texelFetch","texelFetchOffset","texture","textureGrad","textureGradOffset","textureLod","textureLodOffset","textureOffset","textureProj","textureProjGrad","textureProjGradOffset","textureProjLod","textureProjLodOffset","textureProjOffset","textureSize","transpose","trunc","uintBitsToFloat","unpackHalf2x16","unpackSnorm2x16","unpackUnorm2x16"])};function d(e){return new RegExp(`(?:[^a-zA-Z0-9_])(${e.join("|")})(?=[^a-zA-Z0-9_])`)}function f(e){return(0,r.jsx)("div",{className:h(e),children:(0,r.jsx)(s(),{value:e.value,onValueChange:e.onChange,highlight:t=>c().highlight(t,(e.language,u),e.language)})})}function h(e){const t=["custom","view-CodeEditorView"];return"string"==typeof e.className&&t.push(e.className),t.join(" ")}const p={vertexshadercodeeditor:"LzpyYTOcJZJzRd22cQCu"},m=a.Sxu.classNames;function g(e){return(0,r.jsx)(f,{className:m.join(e.className,p.vertexshadercodeeditor),language:"glsl",value:e.code,onChange:e.onChange})}var v=n(6540);const x=n.p+"img/background.e36d8bcea648aedea166.avif";class y{constructor(e,t){this.onError=t,this.uniEffectStrength=0,this.filter=null;const n=new i.tfp(e);this.context=n;const r=new i.HTX(n).loadBitmap(x).setParams({wrapR:"MIRRORED_REPEAT",wrapS:"MIRRORED_REPEAT",wrapT:"MIRRORED_REPEAT"});this.texture=r,this.destroy=()=>{r.delete(),n.delete()}}setCode(e,t=""){try{const{context:n,texture:r}=this,a=new i.D$w(n,{texture:r,filters:[new i.Eim({fragmentShaderCode:e,extraFunctions:t,uniforms:{uniTime:"float",uniEffectStrength:"float",uniAspectRatio:"float",uniAspectRatioInverse:"float"},setUniforms:({program:e,time:t})=>{e.uniform1f("uniTime",t),e.uniform1f("uniEffectStrength",this.uniEffectStrength),e.uniform1f("uniAspectRatio",n.width/n.height),e.uniform1f("uniAspectRatioInverse",n.height/n.width)}})]});this.filter&&this.context.remove(this.filter),this.filter=a,n.add(a),n.play(),this.onError(null)}catch(e){console.log("ðŸš€ [manager] ex = ",e),this.onError(e instanceof Error?e.message:JSON.stringify(e))}}}const b={filterresult:"rkDhSoMjifhuRueu54Nd"},S=a.Sxu.classNames;function w(e){const[t,n]=v.useState(null),i=v.useRef(null),[o,s]=v.useState(0);return v.useEffect((()=>{const t=i.current;t&&t.setCode(e.fragmentShader,e.functions)}),[e.fragmentShader,e.functions]),v.useEffect((()=>{const e=i.current;e&&(e.uniEffectStrength=o)}),[o]),v.useEffect((()=>()=>{i.current?.destroy()}),[]),(0,r.jsxs)(a.UkC,{className:S.join(e.className,b.filterresult),template:"*1*",orientation:"column",...e,children:[(0,r.jsx)(a.sWC,{color:"primary-5",height:"2em",display:"flex",justifyContent:"start",alignItems:"center",padding:"M",children:"Filter output"}),(0,r.jsx)("canvas",{ref:t=>{t&&(i.current||(i.current=new y(t,n)),i.current.setCode(e.fragmentShader,e.functions))}}),t&&(0,r.jsx)("pre",{children:t.split("\n").map((e=>e.startsWith("#####")?(0,r.jsxs)("span",{className:b.error,children:[e,"\n"]}):`${e}\n`))}),(0,r.jsx)(a.BAW,{min:0,max:1,step:.01,value:o,onChange:s})]})}var D=n(8453);function j(e){const t={a:"a",h2:"h2",li:"li",ul:"ul",...(0,D.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{children:"Useful resources for fragment shaders:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["GLSL ES 3.1: ",(0,r.jsx)(t.a,{href:"https://docs.gl/sl4/trunc",children:"https://docs.gl/sl4/trunc"})]}),"\n",(0,r.jsxs)(t.li,{children:["Shadertoy: ",(0,r.jsx)(t.a,{href:"https://www.shadertoy.com/",children:"https://www.shadertoy.com/"})]}),"\n",(0,r.jsxs)(t.li,{children:["Inigo Quilez website: ",(0,r.jsx)(t.a,{href:"https://iquilezles.org/articles/",children:"https://iquilezles.org/articles/"})]}),"\n",(0,r.jsxs)(t.li,{children:["2D signed distance functions:\n",(0,r.jsx)(t.a,{href:"https://iquilezles.org/articles/distfunctions2d/",children:"https://iquilezles.org/articles/distfunctions2d/"})]}),"\n",(0,r.jsxs)(t.li,{children:["Color palette article: ",(0,r.jsx)(t.a,{href:"https://iquilezles.org/articles/palettes/",children:"https://iquilezles.org/articles/palettes/"})]}),"\n",(0,r.jsxs)(t.li,{children:["Color palette webapp: ",(0,r.jsx)(t.a,{href:"http://dev.thi.ng/gradients/",children:"http://dev.thi.ng/gradients/"})]}),"\n",(0,r.jsxs)(t.li,{children:["Graphtoy: ",(0,r.jsx)(t.a,{href:"https://graphtoy.com/",children:"https://graphtoy.com/"})]}),"\n",(0,r.jsxs)(t.li,{children:["The Book of Shaders: ",(0,r.jsx)(t.a,{href:"https://thebookofshaders.com/",children:"https://thebookofshaders.com/"})]}),"\n",(0,r.jsxs)(t.li,{children:["Shadertoy Unofficial: ",(0,r.jsx)(t.a,{href:"https://shadertoyunofficial.wordpress.com/",children:"https://shadertoyunofficial.wordpress.com/"})]}),"\n"]})]})}function k(e={}){const{wrapper:t}={...(0,D.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(j,{...e})}):j(e)}const C={filter:"lReXzQflWun_9Q7_SNCV"};function E(){const[e,t]=(0,a.Vcb)(_,"Filter/FragementShader"),[n,i]=(0,a.Vcb)(R,"Filter/Functions");return(0,r.jsxs)(a.UkC,{className:C.filter,template:"12",orientation:"row",children:[(0,r.jsxs)(a.WET,{children:[(0,r.jsx)(a.Zdo,{label:"Fragment Shader",children:(0,r.jsx)(g,{code:e,onChange:t})},"shader"),(0,r.jsx)(a.Zdo,{label:"Extra functions",children:(0,r.jsx)(g,{code:n,onChange:i})},"functions"),(0,r.jsx)(a.Zdo,{label:"Documentation",children:(0,r.jsx)(k,{})},"doc")]}),(0,r.jsx)(w,{fragmentShader:e,functions:n})]})}a.Sxu.classNames;const _=(0,i.Cdl)(["vec2 polar = uv2polar(varUV);","polar.y += polar.x * cos(uniTime);","vec2 uv = polar2uv(polar);","vec4 color = texture(uniTexture, uv);","FragColor = vec4(",["shiftHue(color.rgb, polar.y + uniTime),","1.0"],");"]),R=(0,i.Cdl)([(0,i.koR)("PI","TAU","E"),(0,i.huU)(),(0,i.EPI)(),(0,i.PS_)(),(0,i.B1P)(),(0,i.bKO)(),(0,i.jw$)(),(0,i.SDv)(),(0,i.WLb)(),(0,i.OKh)(),"\nfloat dot2( in vec2 v ) { return dot(v,v); }\n"]);function O(){return(0,r.jsx)(E,{})}},6069:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var l=o(n(6540)),c="undefined"!=typeof window&&"navigator"in window&&/Win/i.test(navigator.platform),u="undefined"!=typeof window&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),d="npm__react-simple-code-editor__textarea",f="\n/**\n * Reset the text fill color so that placeholder is visible\n */\n.".concat(d,":empty {\n  -webkit-text-fill-color: inherit !important;\n}\n\n/**\n * Hack to apply on some CSS on IE10 and IE11\n */\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  /**\n    * IE doesn't support '-webkit-text-fill-color'\n    * So we use 'color: transparent' to make the text transparent on IE\n    * Unlike other browsers, it doesn't affect caret color in IE\n    */\n  .").concat(d," {\n    color: transparent !important;\n  }\n\n  .").concat(d,"::selection {\n    background-color: #accef7 !important;\n    color: transparent !important;\n  }\n}\n"),h=l.forwardRef((function(e,t){var n=e.autoFocus,a=e.disabled,i=e.form,o=e.highlight,h=e.ignoreTabKey,m=void 0!==h&&h,g=e.insertSpaces,v=void 0===g||g,x=e.maxLength,y=e.minLength,b=e.name,S=e.onBlur,w=e.onClick,D=e.onFocus,j=e.onKeyDown,k=e.onKeyUp,C=e.onValueChange,E=e.padding,_=void 0===E?0:E,R=e.placeholder,O=e.preClassName,A=e.readOnly,T=e.required,F=e.style,P=e.tabSize,z=void 0===P?2:P,K=e.textareaClassName,I=e.textareaId,M=e.value,N=s(e,["autoFocus","disabled","form","highlight","ignoreTabKey","insertSpaces","maxLength","minLength","name","onBlur","onClick","onFocus","onKeyDown","onKeyUp","onValueChange","padding","placeholder","preClassName","readOnly","required","style","tabSize","textareaClassName","textareaId","value"]),B=l.useRef({stack:[],offset:-1}),L=l.useRef(null),q=l.useState(!0),U=q[0],W=q[1],V={paddingTop:"object"==typeof _?_.top:_,paddingRight:"object"==typeof _?_.right:_,paddingBottom:"object"==typeof _?_.bottom:_,paddingLeft:"object"==typeof _?_.left:_},H=o(M),$=function(e,t){return e.substring(0,t).split("\n")},G=l.useCallback((function(e,t){var n,a,i;void 0===t&&(t=!1);var o=B.current,s=o.stack,l=o.offset;if(s.length&&l>-1){B.current.stack=s.slice(0,l+1);var c=B.current.stack.length;if(c>100){var u=c-100;B.current.stack=s.slice(u,c),B.current.offset=Math.max(B.current.offset-u,0)}}var d=Date.now();if(t){var f=B.current.stack[B.current.offset];if(f&&d-f.timestamp<3e3){var h=/[^a-z0-9]([a-z0-9]+)$/i,p=null===(n=$(f.value,f.selectionStart).pop())||void 0===n?void 0:n.match(h),m=null===(a=$(e.value,e.selectionStart).pop())||void 0===a?void 0:a.match(h);if((null==p?void 0:p[1])&&(null===(i=null==m?void 0:m[1])||void 0===i?void 0:i.startsWith(p[1])))return void(B.current.stack[B.current.offset]=r(r({},e),{timestamp:d}))}}B.current.stack.push(r(r({},e),{timestamp:d})),B.current.offset++}),[]),Z=l.useCallback((function(){var e=L.current;if(e){var t=e.value,n=e.selectionStart,r=e.selectionEnd;G({value:t,selectionStart:n,selectionEnd:r})}}),[G]),Q=function(e){var t=L.current;t&&(t.value=e.value,t.selectionStart=e.selectionStart,t.selectionEnd=e.selectionEnd,null==C||C(e.value))},J=function(e){var t=L.current,n=B.current.stack[B.current.offset];n&&t&&(B.current.stack[B.current.offset]=r(r({},n),{selectionStart:t.selectionStart,selectionEnd:t.selectionEnd})),G(e),Q(e)};return l.useEffect((function(){Z()}),[Z]),l.useImperativeHandle(t,(function(){return{get session(){return{history:B.current}},set session(e){B.current=e.history}}}),[]),l.createElement("div",r({},N,{style:r(r({},p.container),F)}),l.createElement("pre",r({className:O,"aria-hidden":"true",style:r(r(r({},p.editor),p.highlight),V)},"string"==typeof H?{dangerouslySetInnerHTML:{__html:H+"<br />"}}:{children:H})),l.createElement("textarea",{ref:function(e){return L.current=e},style:r(r(r({},p.editor),p.textarea),V),className:d+(K?" ".concat(K):""),id:I,value:M,onChange:function(e){var t=e.currentTarget,n=t.value,r=t.selectionStart,a=t.selectionEnd;G({value:n,selectionStart:r,selectionEnd:a},!0),C(n)},onKeyDown:function(e){if(!j||(j(e),!e.defaultPrevented)){"Escape"===e.key&&e.currentTarget.blur();var t=e.currentTarget,n=t.value,r=t.selectionStart,a=t.selectionEnd,i=(v?" ":"\t").repeat(z);if("Tab"===e.key&&!m&&U)if(e.preventDefault(),e.shiftKey){var o=(f=$(n,r)).length-1,s=$(n,a).length-1,l=n.split("\n").map((function(e,t){return t>=o&&t<=s&&e.startsWith(i)?e.substring(i.length):e})).join("\n");if(n!==l){var d=f[o];J({value:l,selectionStart:(null==d?void 0:d.startsWith(i))?r-i.length:r,selectionEnd:a-(n.length-l.length)})}}else if(r!==a){var f,h=(f=$(n,r)).length-1,p=$(n,a).length-1;d=f[h],J({value:n.split("\n").map((function(e,t){return t>=h&&t<=p?i+e:e})).join("\n"),selectionStart:d&&/\S/.test(d)?r+i.length:r,selectionEnd:a+i.length*(p-h+1)})}else{var g=r+i.length;J({value:n.substring(0,r)+i+n.substring(a),selectionStart:g,selectionEnd:g})}else if("Backspace"===e.key){var x=r!==a;n.substring(0,r).endsWith(i)&&!x&&(e.preventDefault(),g=r-i.length,J({value:n.substring(0,r-i.length)+n.substring(a),selectionStart:g,selectionEnd:g}))}else if("Enter"===e.key){if(r===a){var y=$(n,r).pop(),b=null==y?void 0:y.match(/^\s+/);if(null==b?void 0:b[0]){e.preventDefault();var S="\n"+b[0];g=r+S.length,J({value:n.substring(0,r)+S+n.substring(a),selectionStart:g,selectionEnd:g})}}}else if(57===e.keyCode||219===e.keyCode||222===e.keyCode||192===e.keyCode){var w=void 0;57===e.keyCode&&e.shiftKey?w=["(",")"]:219===e.keyCode?w=e.shiftKey?["{","}"]:["[","]"]:222===e.keyCode?w=e.shiftKey?['"','"']:["'","'"]:192!==e.keyCode||e.shiftKey||(w=["`","`"]),r!==a&&w&&(e.preventDefault(),J({value:n.substring(0,r)+w[0]+n.substring(r,a)+w[1]+n.substring(a),selectionStart:r,selectionEnd:a+2}))}else!(u?e.metaKey&&90===e.keyCode:e.ctrlKey&&90===e.keyCode)||e.shiftKey||e.altKey?(u?e.metaKey&&90===e.keyCode&&e.shiftKey:c?e.ctrlKey&&89===e.keyCode:e.ctrlKey&&90===e.keyCode&&e.shiftKey)&&!e.altKey?(e.preventDefault(),function(){var e=B.current,t=e.stack,n=e.offset,r=t[n+1];r&&(Q(r),B.current.offset=Math.min(n+1,t.length-1))}()):77!==e.keyCode||!e.ctrlKey||u&&!e.shiftKey||(e.preventDefault(),W((function(e){return!e}))):(e.preventDefault(),function(){var e=B.current,t=e.stack,n=e.offset,r=t[n-1];r&&(Q(r),B.current.offset=Math.max(n-1,0))}())}},onClick:w,onKeyUp:k,onFocus:D,onBlur:S,disabled:a,form:i,maxLength:x,minLength:y,name:b,placeholder:R,readOnly:A,required:T,autoFocus:n,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),l.createElement("style",{dangerouslySetInnerHTML:{__html:f}}))})),p={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}};t.default=h},8453:(e,t,n)=>{n.d(t,{R:()=>i});var r=n(6540);const a=r.createContext({});function i(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}}}]);