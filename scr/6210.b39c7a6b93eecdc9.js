"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([["6210"],{1278(s,e,n){s.exports=n.p+"bin/suzanne.f1e9692cdd07ad81.glb"},4937(s,e,n){n.r(e),n.d(e,{default:()=>u});var a=n(4848),l=n(8453),t=n(2155);function c(s){let e,n,a;if(!s)return;let l=new t.TgdContext(s);return e=new t.TgdPainterClear(l,{color:[.1,.2,.3,1],depth:1}),(n=new t.TgdPainterMesh(l)).logic.add(s=>{n.transfo.setEulerRotation(100*s,-37*s,0)}),(a=new t.TgdPainterState(l,{depth:t.webglPresetDepth.less})).add(n),l.add(e,a),l.play(),()=>l.delete()}function r(){return(0,a.jsx)("canvas",{ref:c,width:300,height:300})}function h(s){let e,n;if(!s)return;let a=new t.TgdContext(s);return e=new t.TgdPainterClear(a,{color:[.1,.2,.3,1],depth:1}),n=new t.TgdPainterMesh(a),a.add(e,n),a.paint(),()=>a.delete()}function i(){return(0,a.jsx)("canvas",{ref:h,width:300,height:300})}function d(s){let e,n,a;if(!s)return;let l=new t.TgdContext(s);return e=new t.TgdPainterClear(l,{color:[.1,.2,.3,1],depth:1}),n=new t.TgdPainterMesh(l),(a=new t.TgdPainterState(l,{depth:t.webglPresetDepth.less})).add(n),l.add(e,a),l.paint(),()=>l.delete()}function j(){return(0,a.jsx)("canvas",{ref:d,width:300,height:300})}var o=n(1278);function p(s){let e,n;if(!s)return;let a=new t.TgdContext(s);return e=new t.TgdPainterClear(a,{color:[.1,.2,.3,1],depth:1}),n=new t.TgdPainterState(a,{depth:t.webglPresetDepth.less}),a.add(e,n),a.play(),(0,t.tgdLoadGlb)(o).then(s=>{if(!s)return;let e=new t.TgdPainterMeshGltf(a,{asset:s});e.logic.add(s=>{e.transfo.setEulerRotation(100*s,-37*s,0)}),n.add(e)}),()=>a.delete()}function x(){return(0,a.jsx)("canvas",{ref:p,width:300,height:300})}function m(s){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),a.forEach(function(e){var a;a=n[e],e in s?Object.defineProperty(s,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[e]=a})}return s}function N(s){var e=m({a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",span:"span",strong:"strong"},(0,l.R)(),s.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h1,{children:"Quick start"}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsxs)(e.p,{children:["Note: All the code that follows is written in ",(0,a.jsx)(e.a,{href:"https://www.typescriptlang.org/",children:"Typescript"}),"."]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{children:"Hello world!"}),"\n",(0,a.jsx)(e.p,{children:"In this tutorial, we want to animate a spinnig cube like this:"}),"\n",(0,a.jsx)(r,{}),"\n",(0,a.jsx)(e.p,{children:"Let's install the library:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"hljs language-sh",children:"npm install --save @tolokoban/tgd\n"})}),"\n",(0,a.jsxs)(e.p,{children:["The first think you need is to create a ",(0,a.jsx)(e.a,{href:"docs/classes/TgdContext.html",children:"TgdContext"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-ts",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"import"})," { ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdContext"})," } ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"hljs-string",children:'"@tolokoban/tgd"'}),"\n\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"function"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"init"}),"(",(0,a.jsxs)(e.span,{className:"hljs-params",children:[(0,a.jsx)(e.span,{className:"hljs-attr",children:"context"}),": ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdContext"})]}),") {\n    ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// We will fill this function later..."}),"\n}\n\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"function"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"createContext"}),"(",(0,a.jsxs)(e.span,{className:"hljs-params",children:[(0,a.jsx)(e.span,{className:"hljs-attr",children:"canvas"}),": ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"HTMLCanvasElement"})," | ",(0,a.jsx)(e.span,{className:"hljs-literal",children:"null"})]}),") {\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"if"})," (!canvas) ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"return"}),"\n\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," context = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdContext"}),"(canvas)\n    ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"init"}),"(context)\n\n    ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// Return a cleanup function"}),"\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"return"})," ",(0,a.jsx)(e.span,{className:"hljs-function",children:"() =>"})," context.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"delete"}),"()\n}\n"]})}),"\n",(0,a.jsxs)(e.p,{children:["If you need more control, the ",(0,a.jsx)(e.code,{children:"TgdContext"})," constructor accepts a second argument of type ",(0,a.jsx)(e.a,{href:"docs/types/TgdContextOptions.html",children:"TgdContextOptions"}),"."]}),"\n",(0,a.jsxs)(e.p,{children:["So, now that we have a context, let's ",(0,a.jsx)(e.strong,{children:"paint"})," something."]}),"\n",(0,a.jsxs)(e.p,{children:["TGD works with ",(0,a.jsx)(e.strong,{children:"Painters"}),". They are classes starting with ",(0,a.jsx)(e.code,{children:"TgdPainter*"}),".\nThey will be executed for each frame of the animation, and in the order you add them to the context."]}),"\n",(0,a.jsxs)(e.p,{children:["A simple one, but useful one, is ",(0,a.jsx)(e.a,{href:"docs/classes/TgdPainterClear.html",children:(0,a.jsx)(e.code,{children:"TgdPainterClear"})}),".\nIt will clear the screen with a defined color (dark blue in oour example) and set the depth-buffer to 1,\nwhich is the far plane of the camera. The depth-buffer is needed if you deal with 3D objects."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-ts",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"import"})," { ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdContext"}),", ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterClear"})," } ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"hljs-string",children:'"@tolokoban/tgd"'}),"\n\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"function"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"init"}),"(",(0,a.jsxs)(e.span,{className:"hljs-params",children:[(0,a.jsx)(e.span,{className:"hljs-attr",children:"context"}),": ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdContext"})]}),") {\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," clear = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterClear"}),"(context, {\n        ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// Set all pixels a dark blue."}),"\n        ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"color"}),": [",(0,a.jsx)(e.span,{className:"hljs-number",children:"0.1"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"0.2"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"0.3"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"1"}),"],\n        ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// Z-buffer initialized to 1 for every pixel."}),"\n        ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"depth"}),": ",(0,a.jsx)(e.span,{className:"hljs-number",children:"1"}),",\n    })\n    context.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"add"}),"(clear)\n    ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// Paint on the canvas."}),"\n    context.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"paint"}),"()\n}\n"]})}),"\n",(0,a.jsxs)(e.p,{children:["Now, you can call ",(0,a.jsx)(e.code,{children:"createContext()"})," with the canvas of you choice to see the result."]}),"\n",(0,a.jsx)(e.p,{children:"If you are using React, here is a way of binding the context to a component:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-tsx",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"export"})," ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"function"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"MyComponentWithWebGL"}),"(",(0,a.jsx)(e.span,{className:"hljs-params"}),") {\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"return"}),' <canvas ref={createContext} style={{ width: "100%", height: "100%" }}></canvas>\n}\n']})}),"\n",(0,a.jsxs)(e.p,{children:["Now, let's paint a cube. For this, we will use ",(0,a.jsx)(e.a,{href:"docs/classes/TgdPainterMesh.html",children:(0,a.jsx)(e.code,{children:"TgdPainterMesh"})}),"."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-ts",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"import"})," {\n    ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdContext"}),",\n    ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterClear"}),",\n    ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterMesh"}),",\n} ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"hljs-string",children:'"@tolokoban/tgd"'}),"\n\n\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"function"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"init"}),"(",(0,a.jsxs)(e.span,{className:"hljs-params",children:[(0,a.jsx)(e.span,{className:"hljs-attr",children:"context"}),": ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdContext"})]}),") {\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," clear = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterClear"}),"(context, {\n        ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"color"}),": [",(0,a.jsx)(e.span,{className:"hljs-number",children:"0.1"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"0.2"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"0.3"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"1"}),"],\n        ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"depth"}),": ",(0,a.jsx)(e.span,{className:"hljs-number",children:"1"}),",\n    })\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," mesh = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdContextMesh"}),"(context)\n    context.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"add"}),"(clear, mesh)\n    ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// Paint on the canvas."}),"\n    context.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"paint"}),"()\n}\n"]})}),"\n",(0,a.jsx)(i,{}),"\n",(0,a.jsx)(e.p,{children:"Oh! But what's this? By looking to a cube from its front side, one would expect to see a perfect square.\nBut we can see some borders now. Why is that?"}),"\n",(0,a.jsxs)(e.p,{children:["The fact is that ",(0,a.jsx)(e.strong,{children:"TGD"})," (like WebGL) is not a 3D library. It's just a ",(0,a.jsx)(e.strong,{children:"painting"})," library,\nand if you need something for the 3D, you have to say it explicitly."]}),"\n",(0,a.jsxs)(e.p,{children:["The borders that we see here, are the side faces that are painted before the front one.\nIn 3D, the depth-buffer is what will fix this. We already reset it with ",(0,a.jsx)(e.code,{children:"TgdPainterClear"}),",\nbut we need now to tell WebGL to use it.\nThis is done with a multipurpose painter that acts as a group of painters: ",(0,a.jsx)(e.a,{href:"docs/classes/TgdPainterState",children:(0,a.jsx)(e.code,{children:"TgdPainterState"})}),".\nSo, instead of adding ",(0,a.jsx)(e.code,{children:"mesh"})," to the context, you will add it to ",(0,a.jsx)(e.code,{children:"state"})," which in turn will be added to the context:"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-ts",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"function"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"init"}),"(",(0,a.jsxs)(e.span,{className:"hljs-params",children:[(0,a.jsx)(e.span,{className:"hljs-attr",children:"context"}),": ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdContext"})]}),") {\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," clear = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterClear"}),"(context, {\n        ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"color"}),": [",(0,a.jsx)(e.span,{className:"hljs-number",children:"0.1"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"0.2"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"0.3"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"1"}),"],\n        ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"depth"}),": ",(0,a.jsx)(e.span,{className:"hljs-number",children:"1"}),",\n    })\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," mesh = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterMesh"}),"(context)\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," state = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterState"}),"(context, {\n        ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// This preset will only paint a pixel if its depth is less"}),"\n        ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// than the last painted one (in the same position)."}),"\n        ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"depth"}),": webglPresetDepth.",(0,a.jsx)(e.span,{className:"hljs-property",children:"less"}),",\n    })\n    ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// Add the mesh to this state."}),"\n    state.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"add"}),"(mesh)\n    context.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"add"}),"(clear, state)\n    context.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"paint"}),"()\n}\n"]})}),"\n",(0,a.jsx)(j,{}),"\n",(0,a.jsx)(e.p,{children:"Much better!\nNow, we just need to animate the rotation of the cube."}),"\n",(0,a.jsx)(e.p,{children:"For now, we add a logic function that will be called before the mesh in painted:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-ts",children:["mesh.",(0,a.jsx)(e.span,{className:"hljs-property",children:"logic"}),".",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"add"}),"(",(0,a.jsxs)(e.span,{className:"hljs-function",children:["(",(0,a.jsx)(e.span,{className:"hljs-params",children:"time"}),") =>"]})," {\n    mesh.",(0,a.jsx)(e.span,{className:"hljs-property",children:"transfo"}),".",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"setEulerRotation"}),"(",(0,a.jsx)(e.span,{className:"hljs-number",children:"100"})," * time, -",(0,a.jsx)(e.span,{className:"hljs-number",children:"37"})," * time, ",(0,a.jsx)(e.span,{className:"hljs-number",children:"0"}),")\n})\n"]})}),"\n",(0,a.jsx)(e.p,{children:"But wait! If you just test it now, the cube won't rotate."}),"\n",(0,a.jsxs)(e.p,{children:["That's because we used ",(0,a.jsx)(e.code,{children:"context.paint()"})," which will only paint the canvas once.\nTo paint for every frame, we need to do this instead: ",(0,a.jsx)(e.code,{children:"context.play()"}),"."]}),"\n",(0,a.jsx)(e.p,{children:"Here is the full code:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-tsx",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"import"})," {\n    ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdContext"}),",\n    ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterClear"}),",\n    ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterMesh"}),",\n    ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterState"}),",\n    webglPresetDepth,\n} ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"hljs-string",children:'"@tolokoban/tgd"'}),"\n\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"function"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"init"}),"(",(0,a.jsxs)(e.span,{className:"hljs-params",children:[(0,a.jsx)(e.span,{className:"hljs-attr",children:"context"}),": ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdContext"})]}),") {\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," clear = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterClear"}),"(context, {\n        ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"color"}),": [",(0,a.jsx)(e.span,{className:"hljs-number",children:"0.1"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"0.2"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"0.3"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"1"}),"],\n        ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"depth"}),": ",(0,a.jsx)(e.span,{className:"hljs-number",children:"1"}),",\n    })\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," mesh = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterMesh"}),"(context)\n    mesh.",(0,a.jsx)(e.span,{className:"hljs-property",children:"logic"}),".",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"add"}),"(",(0,a.jsxs)(e.span,{className:"hljs-function",children:["(",(0,a.jsx)(e.span,{className:"hljs-params",children:"time"}),") =>"]})," {\n        mesh.",(0,a.jsx)(e.span,{className:"hljs-property",children:"transfo"}),".",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"setEulerRotation"}),"(",(0,a.jsx)(e.span,{className:"hljs-number",children:"100"})," * time, -",(0,a.jsx)(e.span,{className:"hljs-number",children:"37"})," * time, ",(0,a.jsx)(e.span,{className:"hljs-number",children:"0"}),")\n    })\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," state = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterState"}),"(context, {\n        ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"depth"}),": webglPresetDepth.",(0,a.jsx)(e.span,{className:"hljs-property",children:"less"}),",\n    })\n    state.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"add"}),"(mesh)\n    context.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"add"}),"(clear, state)\n    context.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"play"}),"()\n}\n\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"function"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"createContext"}),"(",(0,a.jsxs)(e.span,{className:"hljs-params",children:[(0,a.jsx)(e.span,{className:"hljs-attr",children:"canvas"}),": ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"HTMLCanvasElement"})," | ",(0,a.jsx)(e.span,{className:"hljs-literal",children:"null"})]}),") {\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"if"})," (!canvas) ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"return"}),"\n\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," context = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdContext"}),"(canvas)\n    ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"init"}),"(context)\n\n    ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// Return a cleanup function"}),"\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"return"})," ",(0,a.jsx)(e.span,{className:"hljs-function",children:"() =>"})," context.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"delete"}),"()\n}\n\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"export"})," ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"default"})," ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"function"})," (",(0,a.jsx)(e.span,{className:"hljs-params"}),") {\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"return"})," <canvas ref={createContext} width={300} height={300}></canvas>\n}\n"]})}),"\n",(0,a.jsx)(e.h2,{children:"Loading assets"}),"\n",(0,a.jsxs)(e.p,{children:["We can use more complex 3D objects stored in ",(0,a.jsx)(e.a,{href:"https://www.khronos.org/gltf/",children:"GLB"})," files:"]}),"\n",(0,a.jsx)(x,{}),"\n",(0,a.jsxs)(e.p,{children:["To display a GLTF mesh, we will use ",(0,a.jsx)(e.a,{href:"docs/classes/TgdPainterMeshGltf.html",children:(0,a.jsx)(e.code,{children:"TgdPainterMeshGltf"})}),"\nintead of the more generic ",(0,a.jsx)(e.code,{children:"TgdPainterMesh"}),"."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-ts",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," mesh = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterMeshGltf"}),"(context, {\n    asset,\n})\n"]})}),"\n",(0,a.jsxs)(e.p,{children:["And to load the asset asynchronously, TGD provides the function ",(0,a.jsx)(e.a,{href:"docs/functions/tgdLoadGlb.html",children:(0,a.jsx)(e.code,{children:"tgdLoadGlb"})}),"."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-ts",children:[(0,a.jsx)(e.span,{className:"hljs-title function_",children:"tgdLoadGlb"}),"(",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"SuzanneURL"}),").",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"then"}),"(",(0,a.jsxs)(e.span,{className:"hljs-function",children:["(",(0,a.jsx)(e.span,{className:"hljs-params",children:"asset"}),") =>"]})," {\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"if"})," (!asset) ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"return"}),"\n\n})\n"]})}),"\n",(0,a.jsx)(e.p,{children:"If the GLB file is big and/or your network connection is poor, you will see en empty background\nfor some time, then the mesh will appear and start rotating.\nTo reduce the file size of your GLB files, try to use Draco compression."}),"\n",(0,a.jsxs)(e.p,{children:["Here is the ful code of ",(0,a.jsx)(e.code,{children:"init()"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-ts",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"function"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"init"}),"(",(0,a.jsxs)(e.span,{className:"hljs-params",children:[(0,a.jsx)(e.span,{className:"hljs-attr",children:"context"}),": ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdContext"})]}),") {\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," clear = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterClear"}),"(context, {\n        ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"color"}),": [",(0,a.jsx)(e.span,{className:"hljs-number",children:"0.1"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"0.2"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"0.3"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"1"}),"],\n        ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"depth"}),": ",(0,a.jsx)(e.span,{className:"hljs-number",children:"1"}),",\n    })\n    ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," state = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterState"}),"(context, {\n        ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"depth"}),": webglPresetDepth.",(0,a.jsx)(e.span,{className:"hljs-property",children:"less"}),",\n    })\n    context.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"add"}),"(clear, state)\n    context.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"play"}),"()\n    ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// Loading asset"}),"\n    ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"tgdLoadGlb"}),"(",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"SuzanneURL"}),").",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"then"}),"(",(0,a.jsxs)(e.span,{className:"hljs-function",children:["(",(0,a.jsx)(e.span,{className:"hljs-params",children:"asset"}),") =>"]})," {\n        ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"if"})," (!asset) ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"return"}),"\n\n        ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," mesh = ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"TgdPainterMeshGltf"}),"(context, {\n            asset,\n        })\n        mesh.",(0,a.jsx)(e.span,{className:"hljs-property",children:"logic"}),".",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"add"}),"(",(0,a.jsxs)(e.span,{className:"hljs-function",children:["(",(0,a.jsx)(e.span,{className:"hljs-params",children:"time"}),") =>"]})," {\n            mesh.",(0,a.jsx)(e.span,{className:"hljs-property",children:"transfo"}),".",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"setEulerRotation"}),"(",(0,a.jsx)(e.span,{className:"hljs-number",children:"100"})," * time, -",(0,a.jsx)(e.span,{className:"hljs-number",children:"37"})," * time, ",(0,a.jsx)(e.span,{className:"hljs-number",children:"0"}),")\n        })\n        state.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"add"}),"(mesh)\n    })\n}\n"]})})]})}function u(){var s,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=m({},(0,l.R)(),n.components).wrapper;return t?(0,a.jsx)(t,(s=m({},n),e=e={children:(0,a.jsx)(N,m({},n))},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):(function(s,e){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);n.push.apply(n,a)}return n})(Object(e)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(e,n))}),s)):N(n)}},8453(s,e,n){n.d(e,{R:()=>t});var a=n(6540);let l=a.createContext({});function t(s){let e=a.useContext(l);return a.useMemo(function(){return"function"==typeof s?s(e):{...e,...s}},[e,s])}}}]);