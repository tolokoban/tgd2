"use strict";(self.webpackChunk_tolokoban_tgd=self.webpackChunk_tolokoban_tgd||[]).push([["2933"],{3172(e,t,n){n.d(t,{A:()=>x});var r=n(4848),a=n(6540),s=n(6671);function i({className:e,label:t,min:n,max:a,value:i,onChange:l}){return(0,r.jsxs)("div",{className:s.Sxu.classNames.join(e,"u8HaymDuvmcx5Xlm"),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:t}),(0,r.jsx)("div",{children:(0,r.jsx)("strong",{children:i.toFixed(2)})})]}),(0,r.jsx)("input",{type:"range",step:(a-n)/100,min:n,max:a,value:i,onChange:e=>{l(parseFloat(e.target.value))}})]})}function l({className:e,values:t,onChange:n}){let[l,c]=a.useState(!1);return(0,r.jsxs)("div",{className:s.Sxu.classNames.join(e,"O3eUw2E6kJAY5Kzb",l?"fh6L2aMFrodrLYWv":"LFyaXnIfeqU4RizM"),children:[(0,r.jsx)("button",{type:"button",onClick:()=>c(!l),children:(0,r.jsx)("svg",{style:{width:"1.5em",height:"1.5em"},viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet","stroke-width":"1.5",children:(0,r.jsx)("path",{d:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",stroke:"none",fill:"#fff"})})}),(0,r.jsx)("div",{children:Object.keys(t).map(e=>{let a=t[e];if(!a)return null;let s=a.min??0,l=a.max??1;return(0,r.jsx)(i,{label:a.label,min:s,max:l,value:a.value,onChange:r=>{n({...t,[e]:{...t[e],value:r}})}},e)})})]})}var c=n(2155),o=n(3289);let u="NwIHvuh9THszhNCj",d="OvO7uXOT0RoimVco",h="r0e5CaWIlKI2oFZu",p="qgsDNUq3iYtpdR4I";function x({className:e,options:t,onReady:n,gizmo:i=!1,width:x="640px",height:g="480px",noBorder:f=!1,assets:b,controller:j,settings:v,children:y,disableDefaultDoubleTap:C=!1}){let O=a.useRef(null),[w,k]=a.useState(v),L=a.useCallback(()=>{if(!w)return{};let e={};for(let t of Object.keys(w))e[t]=w[t].value;return e},[w]);a.useEffect(()=>{if(w){let e={};for(let t of Object.keys(w))e[t]=w[t].value;O.current?.(L())}},[w,L]);let[S,N]=a.useState(null),[P,T]=a.useState(!0),[R,A]=a.useState(!1),E=a.useRef(null),F=a.useRef(null),I=a.useRef(null),M=a.useRef(null),z=a.useRef(null),[D,q]=a.useState(!0);x.endsWith("px")&&g.endsWith("px")&&(x.substring(x.length-2),g.substring(g.length-2));let W=e=>{if(!e||F.current)return;F.current=e;let r=new c.TgdContext(e,t);console.log("Depht buffer bits:",r.gl.getParameter(r.gl.DEPTH_BITS)),E.current=r,q(!0),m(b).then(e=>{try{if(j){let e=new c.TgdControllerCameraOrbit(r,{debug:!0,inertiaOrbit:1e3,inertiaZoom:500,inertiaPanning:500,...j});z.current=e,r.inputs.pointer.eventTapMultiple.addListener(t=>{console.log("\uD83D\uDE80 [tgd] evt.tapsCount =",t.tapsCount),t.preventTap(),2!==t.tapsCount||C||e.reset((j.inertiaOrbit??500)*.001)})}O.current=n(r,e),O.current?.(L()),r.paint()}catch(e){N(e instanceof Error?e.message:JSON.stringify(e)),console.error(e)}q(!1)}).catch(e=>{console.error("Unable to initialize the scene!",e),q(!1)});let a=I.current;a&&a.attachContext(r)},X=e=>{let t=new c.TgdCanvasGizmo({canvas:e});I.current=t,t.eventTipClick.addListener(({to:e})=>{let t=E.current;t&&t.animSchedule({duration:.2,easingFunction:c.tgdEasingFunctionInOutCubic,action:(0,c.tgdActionCreateCameraInterpolation)(t.camera,{orientation:e})})});let n=E.current;n&&t.attachContext(n)};return(a.useEffect(()=>{let e=F.current,t=E.current;if(!e||!t)return;let n=new ResizeObserver(()=>t.paint());return n.observe(e),e.requestFullscreen||(e.requestFullscreen=e.webkitRequestFullscreen),A(!!e.requestFullscreen),()=>n.unobserve(e)},[E.current,F.current]),f)?(0,r.jsxs)("div",{ref:M,className:u,style:{width:P?x:g,height:P?g:x},children:[(0,r.jsx)("canvas",{className:d,ref:W}),i&&(0,r.jsx)("canvas",{className:h,ref:X}),w&&(0,r.jsx)(l,{values:w,onChange:k}),S&&(0,r.jsx)("div",{className:p,children:S})]}):(0,r.jsxs)("div",{className:s.Sxu.classNames.join(e,"MESVmxyHbYMu0P0r"),children:[(0,r.jsxs)("div",{className:s.Sxu.classNames.join("OBhA17iAKaUaAbSS",!D&&"dxtnW6vkWWweMZbP"),children:[(0,r.jsx)("div",{children:(0,r.jsx)(s.I64,{onClick:()=>T(!P)})}),(0,r.jsx)("div",{children:(0,r.jsx)(s.kRc,{onClick:()=>{let e=E.current;e&&e.takeSnapshot().then(e=>{let t=document.createElement("a");document.body.appendChild(t),t.style.display="none",t.href=e.src,t.download="snapshot.png",t.click(),window.setTimeout(()=>document.body.removeChild(t),3e4)})}})}),R&&(0,r.jsx)("div",{children:(0,r.jsx)(s.L9n,{onClick:()=>{let e=M.current;e&&e.requestFullscreen()}})}),j&&(0,r.jsx)("div",{children:(0,r.jsx)(s.zgT,{onClick:()=>{let e=z.current,t=E.current;t&&e&&(e.cameraInitialState=t.camera.getCurrentState(),e.resetZoom())}})})]}),(0,r.jsxs)("div",{className:"IctJ7LNrbc0x_gIB",children:[(0,r.jsxs)("div",{ref:M,className:u,style:{width:P?x:g,height:P?g:x},children:[(0,r.jsx)("canvas",{className:d,ref:W}),i&&(0,r.jsx)("canvas",{className:h,ref:X}),w&&(0,r.jsx)(l,{values:w,onChange:k}),S&&(0,r.jsx)("div",{className:p,children:S})]}),(0,r.jsx)("div",{className:s.Sxu.classNames.join("w7EXkaA82Y850o5V",D&&"c4TMDjqUWvQOmkt9"),children:(0,r.jsx)(o.A,{})}),y]})]})}async function m({glb:e,data:t,text:n,image:r}={}){let a={glb:{},data:{},text:{},image:{}},s=[];return r&&Object.keys(r).forEach(e=>{s.push(async()=>{let t=r[e];console.log("Loading image:",t);let n=await (0,c.tgdLoadImage)(t);n&&(a.image[e]=n)})}),e&&Object.keys(e).forEach(t=>{s.push(async()=>{let n=e[t];console.log("Loading GLB:",n);let r=await (0,c.tgdLoadGlb)(n);r&&(a.glb[t]=r)})}),t&&Object.keys(t).forEach(e=>{s.push(async()=>{let n=t[e],r=await (0,c.tgdLoadArrayBuffer)(n);r&&(a.data[e]=r)})}),n&&Object.keys(n).forEach(e=>{s.push(async()=>{let t=n[e],r=await (0,c.tgdLoadText)(t);r&&(a.text[e]=r)})}),await Promise.all(s.map(e=>e())),a}},1278(e,t,n){e.exports=n.p+"bin/suzanne.f1e9692cdd07ad81.glb"},1635(e,t,n){n.r(t),n.d(t,{default:()=>p});var r=n(4848),a=n(8453),s=n(2155),i=n(3172);let l=n.p+"bin/brain.ac181199172af1fc.glb";var c=n(1278);function o(e,t){let n=new s.TgdPainterClear(e,{color:[0,0,0,1],depth:1}),r=new s.TgdPainterXRay(e,{color:[.1,.2,1,1],exponent:1.2,intensity:4,geometry:new s.TgdGeometryGltf({data:t.glb.brain})}),a=new s.TgdPainterXRay(e,{color:[1,.333,.1,1],exponent:5,intensity:20,geometry:new s.TgdGeometryGltf({data:t.glb.suzanne})}),i=new s.TgdPainterState(e,{children:[r,a],depth:s.webglPresetDepth.less});return e.add(n,i),e.paint(),e.camera.transfo.distance=5,new s.TgdControllerCameraOrbit(e,{inertiaOrbit:2e3}),t=>{let n=t.exponent1??1.2,s=t.intensity1??4;r.exponent=n,r.intensity=s;let i=t.exponent2??5,l=t.intensity2??20;a.exponent=i,a.intensity=l,e.paint()}}function u(){return(0,r.jsx)(i.A,{onReady:o,assets:{glb:{brain:l,suzanne:c}},settings:{exponent1:{label:"exponent (brain)",value:1.2,min:-20,max:20},intensity1:{label:"intentity (brain)",value:4,min:0,max:20},exponent2:{label:"exponent (monkey)",value:5,min:-20,max:20},intensity2:{label:"intentity (monkey)",value:20,min:0,max:20}}})}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function h(e){var t=d({a:"a",h1:"h1",hr:"hr",p:"p"},(0,a.R)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{children:(0,r.jsx)(t.a,{href:"docs/classes/TgdPainterXRay.html",children:"TgdPainterXRay"})}),"\n",(0,r.jsx)(u,{}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"#/articles/painter",children:"Back"})})]})}function p(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=d({},(0,a.R)(),n.components).wrapper;return s?(0,r.jsx)(s,(e=d({},n),t=t={children:(0,r.jsx)(h,d({},n))},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e)):h(n)}},8453(e,t,n){n.d(t,{R:()=>s});var r=n(6540);let a=r.createContext({});function s(e){let t=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}}}]);